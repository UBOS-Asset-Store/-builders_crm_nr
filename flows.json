[
    {
        "id": "20c53500e7b814e0",
        "type": "tab",
        "label": "ENV",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c740254358c79788",
        "type": "tab",
        "label": "Links",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c8b39bad946d8ab6",
        "type": "tab",
        "label": "Auth Module",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5d37dc5e8bf693d8",
        "type": "tab",
        "label": "Users",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "275886e37bea4c3c",
        "type": "tab",
        "label": "Сounterparties",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ad9491c611cf1057",
        "type": "tab",
        "label": "Team",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "87640173a031323f",
        "type": "tab",
        "label": "Project settings",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "dbcf23dd39eba172",
        "type": "tab",
        "label": "Projects",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2fce404005fef31a",
        "type": "tab",
        "label": "Contracts",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "acc787df1bb9a04e",
        "type": "tab",
        "label": "Structure",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e1ca8aeb52e770fa",
        "type": "subflow",
        "name": "Skyscraper construction template",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": [
                    {
                        "id": "b36094549859b237"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 300,
                "y": 40,
                "wires": [
                    {
                        "id": "b36094549859b237",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "9ffc66369df29712",
        "type": "subflow",
        "name": "Contracts template",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "6b19f211ea059b3f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 360,
                "y": 80,
                "wires": [
                    {
                        "id": "6b19f211ea059b3f",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "81031a41452292e5",
        "type": "group",
        "z": "c8b39bad946d8ab6",
        "name": "Admin Roles page",
        "style": {
            "label": true,
            "color": "#000000",
            "fill": "#ffffbf"
        },
        "nodes": [
            "04ab9e97bf9e23e7",
            "84a24b2bf96c7d10",
            "561598685195f480",
            "c5be1687df4038a9",
            "fe134326442270d0",
            "a5211f330054a0f9",
            "b0766e91bd6c6a00",
            "d9487f0690457157",
            "9710436b969b38d7",
            "68b716a28a9c06f9",
            "31c23a05e29832de",
            "67d53a0197042a25",
            "e7c108f3663fd09c",
            "22579b498a3c1141",
            "69547a71e13702ba",
            "c2a121b11062dbc8",
            "99069fd281c3aa62",
            "1abe7468edf9c502",
            "3baac374b1dd3f4d",
            "ee3708d6d2779c2c",
            "3594cb050006f93b",
            "612e0a2b392767a6",
            "d223f3d36f46a91d",
            "731ac723f96cc33b",
            "110f980283b587bc",
            "b26cafe18475e3cb",
            "c1c36f3949756248",
            "306adf550fae80e8"
        ],
        "x": 54,
        "y": 859
    },
    {
        "id": "a8bcf74ef7690d27",
        "type": "group",
        "z": "c8b39bad946d8ab6",
        "name": "Modules",
        "style": {
            "label": true,
            "color": "#000000",
            "fill": "#ffefbf"
        },
        "nodes": [
            "081c8c3d3092e3d2",
            "8c9188bca9c91600",
            "8e90850289063c0f",
            "ca87b60d60b99eb0",
            "48a302c4afb1b770",
            "c3b02c1f4edbee09",
            "2b147567f51c6f9d",
            "8155b8084ded1330",
            "94ae2989955beeda",
            "b017876ae60e280c",
            "98b2c82db768e5e1",
            "edf06a17bf884f9f",
            "33228ac20bb88129",
            "8a003992c216e032",
            "8886a378d607c9c3",
            "cdf04d878afee1d5",
            "5cbf5ba2c4c74a4f",
            "b473ee4234249f14",
            "620b6e5d1c9e4858",
            "d868f70232c05f3c",
            "382da0ed3f1de901",
            "411b69c681820b0e",
            "500861a5b5623bc5",
            "81bdba71023d5429",
            "3000e64189b3ff39",
            "6d5c9e567735125f",
            "0d8e4b5e24ee7f2c",
            "080f87898258c1e5",
            "3835bedd5b59284c",
            "920e683749d9b015",
            "7001dd6d6d4622d6",
            "ae293692fead8475",
            "732470b6749e6a6e"
        ],
        "x": 814,
        "y": 859
    },
    {
        "id": "dd0a2b2a3a923ff7",
        "type": "group",
        "z": "c8b39bad946d8ab6",
        "name": "User Management",
        "style": {
            "label": true,
            "color": "#000000",
            "fill": "#bfdbef"
        },
        "nodes": [
            "2ae46a4303e606aa",
            "5237b46d44a1b3a4",
            "1825fb3d6b513900",
            "e23355de69d75283",
            "ab2b5e34abca1e9b",
            "5a78c40d046ce8f6",
            "ddef97bd0e2b5923",
            "0a2fd87870718fdd",
            "30f5e7a6a546c113",
            "57e581e2ecb4249c",
            "3941ed959f6a49e2",
            "224f13cf53c48cde",
            "e7f454c30483e885",
            "de68f6ef9390d5d0",
            "23e04e8b3f4f3a6b",
            "784130e27331077d"
        ],
        "x": 54,
        "y": 1759
    },
    {
        "id": "9005e0b501e3898f",
        "type": "group",
        "z": "5d37dc5e8bf693d8",
        "name": "Users",
        "style": {
            "stroke": "#0070c0",
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "65a2701306f207e9",
            "f9bb8b0e09d6fbe4",
            "a5c87b50388ce826",
            "2f51da3ab5e15577",
            "b61e36cac84a8579",
            "f195bbb56d220aa0",
            "2225f6bd64a90ebc",
            "bfa5582e164e3230",
            "69c0fd0810fa38f9",
            "ce50a0a3f0b75d1e",
            "882297fa3849ccf3",
            "218c981dccceb5fc",
            "1d8d0a411d7b0752",
            "9e47a3a4bc029182",
            "7c83f1861d8d6c7b",
            "47d390f8d18b1c49",
            "8946711ea977905a",
            "689ddad7f0e4f927",
            "79310709129ef287",
            "c172bcb9922c2b92",
            "349236110cd7c236",
            "82ab33d60d6d5752",
            "6f70f661f167dd24",
            "a307777256a983c9",
            "3bc3b863ac50762a",
            "66781a92163ddcfa",
            "b217632d1ea117f8",
            "7b10265f4470a82e",
            "4b4a37a942c45925",
            "0a39ceaa1f545df1",
            "a16db9e1645a78a9",
            "35e52520ef2d942b",
            "dd9ed1418193c650",
            "8f939b31c9c893f7",
            "7bb96201778da3bd",
            "814d76bb908c1113",
            "d48317cb5e42f0b5",
            "88086cee5a92386a",
            "580fc81c4dd87c31",
            "7742b6cd44216d77",
            "687ecdb367fb1ae7",
            "4ff271b6b3e503ce",
            "605cec69b9e36241",
            "b7b22f783f5d5ee8",
            "305212294e30f5b2",
            "82f5ba55116bdb6b",
            "bb42a56b681a980a",
            "3fd77827868d2d7c",
            "0987e2ce0c909f26",
            "b04e776fbe1a26ff",
            "f4c82543ec4d105a",
            "3da3504bb2dc748c",
            "32903bbff5891ba6"
        ],
        "x": 14,
        "y": 39
    },
    {
        "id": "f49c4844a8fd418b",
        "type": "group",
        "z": "c8b39bad946d8ab6",
        "name": "Home google",
        "style": {
            "stroke": "#001f60",
            "fill": "#bfc7d7",
            "label": true
        },
        "nodes": [
            "37e8938d6e6be501",
            "1e91697ac2db3998",
            "789c8b4acff2f6b7",
            "f44a8595ea0bcb12",
            "e658de794a3c71fb",
            "ac5463129970ea57",
            "18757ce4ce343bab",
            "32f2fb7d2d4e6a4f",
            "ae7478b0efa0f670",
            "e30c726e83877e71",
            "7f716983a77c86a6",
            "c77f1cb54c3e7637",
            "5be258b7b4f76c08",
            "7276ef91a4fcfbba",
            "96ddd1fd107d0fb1",
            "8e3d911803fb42c8",
            "048839a0841bf326",
            "b1a0dbb265b01eb0",
            "8c1b30db3408fa4f",
            "3a8b64a602016860",
            "39af801020f87f81",
            "22b08a1354cd7157",
            "3ec27d1aa2132072"
        ],
        "x": 24,
        "y": 19
    },
    {
        "id": "f6ba04031958c468",
        "type": "group",
        "z": "dbcf23dd39eba172",
        "name": "logo project",
        "style": {
            "stroke": "#92d04f",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "bfb1d90bdfc84567",
            "aeb701579a4fa8d9",
            "d0257bdc7526d076",
            "70f745abad2027af",
            "ba3f65e37ff826ce",
            "61b5e6c37417b092",
            "1c6308a3236eaf00",
            "ab702302159cf5a3",
            "eb7779bea1afe8c6",
            "4b04f737e8feab4c",
            "8a781a93d9bb4e85",
            "016ec444e7de8502",
            "a705a5326fe59cd7"
        ],
        "x": 54,
        "y": 19
    },
    {
        "id": "629b12ad2c8a2432",
        "type": "group",
        "z": "c740254358c79788",
        "name": "копіювання коллекцій з тестової в прод",
        "style": {
            "fill": "#dbcbe7",
            "label": true
        },
        "nodes": [
            "9308320ee32458bc",
            "2c69511896561dd6",
            "a3f98ae34e50564f",
            "7f534143e33ec6de",
            "c59aa6803771969a",
            "6cdc23a401c563cf",
            "9bb4420db5057482"
        ],
        "x": 34,
        "y": 879
    },
    {
        "id": "49efeb2f042463b1",
        "type": "group",
        "z": "c740254358c79788",
        "name": "шрифти",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "76fd70890eb5f7a6",
            "95a1c44caead784a",
            "21ed0e58f6517192",
            "74115e6f7285d4ad",
            "fa0b651230faaafa",
            "d8c409caa9de242c",
            "a892adf233912587"
        ],
        "x": 34,
        "y": 559
    },
    {
        "id": "0c12ce383a397a7d",
        "type": "group",
        "z": "c740254358c79788",
        "name": "линкинг",
        "style": {
            "fill": "#bfc7d7",
            "label": true
        },
        "nodes": [
            "346e518816416d1d",
            "b7c366424b9b7e6e",
            "1764f8568a80ddbd",
            "286431cd31c9fc7a",
            "4307ecabcc6486c7",
            "6544322b922c1a49",
            "7739c6ef4683fa04",
            "5accd99f247f88ec",
            "7ce3e0949b4a483f",
            "6a3c98d4b6b016de",
            "a902fac8c21085e6",
            "84c75bed55ab1dd8"
        ],
        "x": 34,
        "y": 179
    },
    {
        "id": "b0ef14992c694846",
        "type": "group",
        "z": "c740254358c79788",
        "name": "стилі",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "a186ba9dfbca2916",
            "781e82cf462af243",
            "4dbc400d7c9ea753"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "59374a27ad18d0ed",
        "type": "group",
        "z": "275886e37bea4c3c",
        "name": "",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "873564be61a3d25d",
            "50151e0f11718ee8",
            "372b88562ed197f1",
            "4fc4e82c9cb4812b",
            "bf0a5316a13da341",
            "4e326b4ef5ade7f3",
            "a9792a1ca09a37f5",
            "1fbf569916fefee8",
            "58fb5ece36193006",
            "ce40f0ede9272b8a",
            "6a2035ce7694fc0a",
            "36b5a4f4388ec6b5",
            "df718d4659b8b88d",
            "88f13a52fc379724",
            "2d780e1d69bdc66b",
            "33860c6e8a7bfc5f",
            "a86b4cb2c331997f"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "59348ed242f896b4",
        "type": "group",
        "z": "ad9491c611cf1057",
        "name": "",
        "style": {
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "5624f63c204df958",
            "28aa94638c497270",
            "e403a19303e7799e",
            "9aa3ce8119fd2a54",
            "9281654135ca06f4",
            "13a1b79ff069dc44",
            "1dce600190a4a9c9",
            "9061a70595dd7fd2",
            "06f6cc31429066b9",
            "dc634aa8a7ad00db",
            "f8549111db794081",
            "9da0baae3f444e50",
            "96c1b91a368fc3c8",
            "b572dab5d747eda6",
            "269004503e3db0c6",
            "54b37124ec23f521",
            "855f7c885ece2092",
            "a89d44915dc6faae",
            "996ff4af6346a5ab",
            "1f121ce86bb02e0f",
            "f563e30b1a8d6fce",
            "2a48e722d10c4221",
            "103227fe873ca13f",
            "5d77de9682537422",
            "23959014cf68df6e",
            "ee68aea7e306bb48"
        ],
        "x": 14,
        "y": 59
    },
    {
        "id": "a7c23722d7220194",
        "type": "group",
        "z": "87640173a031323f",
        "name": "",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "3ce4d9fc61c23cff",
            "697b246380bab337",
            "026e7a7bfd4bccbd",
            "239be4628c082e71",
            "4a13fe29d6c2f664",
            "95ec39872113e4dd",
            "8a221c2a595dd53c",
            "efb60abb1100f980"
        ],
        "x": 54,
        "y": 99
    },
    {
        "id": "af30c153e4a2f931",
        "type": "group",
        "z": "2fce404005fef31a",
        "name": "CRUD contracts",
        "style": {
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "955bbd52b897ea6a",
            "f8107261ba917794",
            "5a65c0579fd30460",
            "01191c563f0a44b2",
            "d680877d36b6e41e",
            "c1145e3ed344a9a6",
            "01a2bbc33f521f83",
            "db57a9b6cce779b2",
            "d75a2b0757bb7917",
            "745b5b49a4a49d75",
            "067b68b976661a9b",
            "842fa0ed416bc586",
            "4e61643d7e2eeef4",
            "f11a6518230dad19",
            "1eb58dfc3c53652e",
            "c7948033242081f6",
            "afedd21cd8476d9f",
            "dee2cc530ca7302b",
            "697bf9f3871fd9e6",
            "e3b0f976b7fab6da",
            "9d141589bbc28a80",
            "61a8d3db925de742",
            "76f7a6644dcdf9cf",
            "bc50b6ad50753784",
            "284d11b060e43c49",
            "c53b7c709cec0285",
            "b5e59ef8c474dbd2",
            "b539feaed9250c26",
            "43ce92f8a2d68c14",
            "d6df89ac8abd270d",
            "7b804d228b0b44da",
            "4c93b07221cdbc2c"
        ],
        "x": 54,
        "y": 19
    },
    {
        "id": "27c22d2d957ff945",
        "type": "group",
        "z": "2fce404005fef31a",
        "name": "CRUD RelatedTasks",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "1c8602006144e782",
            "1c583ec9d72ccdf5",
            "8028088e703d14df",
            "5fb97f652fa207e6",
            "ff99d1196e942c2c",
            "9aca235bb533829e",
            "483a635e7d5b0335",
            "a0cac1aae940342b",
            "1af8005243b9f020",
            "09e8fd33ae39701d",
            "802ef173e7f2b9c4",
            "8b24f2b4ee9bd9ac",
            "1d95d265265fb653",
            "a955652eb0e3dcd2",
            "6798f5ff0cf2801c",
            "5e5f504ed2d662c0",
            "ec498974f9b3c857",
            "038bcf957fc24d7c",
            "d90fa795bd833f4f",
            "d0742a0f2f1ae384",
            "edd6f70fef927d09",
            "d83b27f1656d9ffa",
            "83787c5b17f6e95f",
            "24e7624cdcf5b536",
            "48d6f5054425ddcd",
            "defee9fcc890722e",
            "14845c805539c303",
            "3c9f62b170fccd18",
            "344993d9ea90795c",
            "d93bbd24bb7d51a7",
            "a76d9678e0bca051",
            "ca008617b71152e8",
            "c18ff9866bc98e67",
            "830a8012206b15eb",
            "6f7d709e0d6e7abd",
            "451538534f99b497",
            "6e1f58672a97ee9b",
            "2f47bfacc338c9bc",
            "a40eb23045701770",
            "e39cd6d6fa11d3f0"
        ],
        "x": 54,
        "y": 959
    },
    {
        "id": "989e4177d031381d",
        "type": "group",
        "z": "2fce404005fef31a",
        "name": "CRUD AdminExpenses",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "f5cba08970c55c28",
            "0aa2797e5bdaaa0b",
            "372117134362e856",
            "dff55f8282cda739",
            "a9c8a0dc342b6248",
            "c2e21cdb4be184ba",
            "3e021b2d1294a61f",
            "2dd98b703d8eb65f",
            "6c9439a0ebaa9a90",
            "60cd9a9ccb5ed6c0",
            "5f1fd2608e9174e6",
            "da89b3386508286f",
            "ae968d5778c122f5",
            "5cd8a26093900df4",
            "830c78036aabcf14",
            "0a55ba32b5e920b2"
        ],
        "x": 54,
        "y": 659
    },
    {
        "id": "20afcaf136d6dde7",
        "type": "group",
        "z": "2fce404005fef31a",
        "name": "",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "66e3bf81ccba914b",
            "919fa0c142ac67a0",
            "d19579b8ec9353b5",
            "3ac08972c417107c",
            "53351ac003d9be83",
            "5b8f9d5440abebde",
            "5cdf8275af0c20a2",
            "ad3ee56a708222ae",
            "3a4e62d715309e7d",
            "f9eb5e7b5755354f"
        ],
        "x": 54,
        "y": 459
    },
    {
        "id": "a7efc7ad66cb4641",
        "type": "group",
        "z": "2fce404005fef31a",
        "name": "CRUD RelatedContracts",
        "style": {
            "fill": "#dbcbe7",
            "label": true
        },
        "nodes": [
            "f1830b6d3371058a",
            "af3bb84c1734c5e2",
            "483fa3d78befdd4c",
            "fb8f03f18209b637",
            "57bfa3b6dd3879df",
            "df31f16ea9437ba2",
            "f0c4830b1efc7b8f",
            "1cb2b27a899b2e3f",
            "b6727db62d61220f",
            "1669b0e2a0c5c615",
            "a2460af9080770ea",
            "401f3f2ec5428305",
            "bbe5472f11826c06",
            "9a2913b59ad43a2f",
            "ceb1e01ecf9c388a",
            "2f6c77a5bd6b17bc",
            "13c428ce28cf8aab"
        ],
        "x": 54,
        "y": 1399
    },
    {
        "id": "f490d1a0e639dbca",
        "type": "group",
        "z": "dbcf23dd39eba172",
        "name": "for menu",
        "style": {
            "stroke": "#ffffbf",
            "label": true,
            "fill": "#ffefbf"
        },
        "nodes": [
            "0a590ec5fe4a04e1",
            "52014652dff83890",
            "a9bd6fc6ca7159b5",
            "a971bdcb5ac86f2c",
            "b444a12c396d00a0",
            "3d38916c91ad4978",
            "a6986173fb8d4c24",
            "4a5dcdc1547bfe14",
            "611477050d6b691b"
        ],
        "x": 54,
        "y": 779
    },
    {
        "id": "b63354a505b04f2a",
        "type": "group",
        "z": "acc787df1bb9a04e",
        "name": "",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "09bf4d031a8bc6ab",
            "4e96844dd33e2963",
            "b510cec7a3cce9a8",
            "25b4680492fd81b1",
            "05a87d36d28e0f78",
            "7346dda9aed9e709",
            "d4e73fb9ec8d4928",
            "5becc68119dcc218",
            "a0ff14e0e2ed8f4d",
            "c51d0170ab259232",
            "bbff4f8088a44f91",
            "1a602ac5529d1eb2",
            "a001579cf250c47d",
            "e3d35efaef992176",
            "1bcd034b84df529c",
            "f9d8b43f44239ccf",
            "93e543775aa7762a",
            "70e538942bf89972",
            "5fb93b1673fe1bba",
            "57003c487e04905f",
            "b20dc1823e58b854",
            "f7a1457df1fd98e1",
            "b45b533cf18f84a6",
            "36ba4af3784e168a",
            "eed809dfda35e3f9",
            "fd4d016fc81051a5",
            "90c1cd9d8ab6bf55",
            "f0de0410c3525cd2",
            "4a7ee60186a990df",
            "b0a772d0ad46e62f",
            "1a755fb538ca8bfe",
            "c8d60dfdad78e6a2",
            "dc0839267f84ab94",
            "a3504e17aa715ac7",
            "b09c8a21731ead0f",
            "e2c2c3cc68f9d82a",
            "301969398eac6c02",
            "425a53cbaa7a56eb",
            "99dac3c9f0867017",
            "56614656293393f9",
            "8a34ce1a4615020c"
        ],
        "x": 24,
        "y": 39
    },
    {
        "id": "dc482170debe4996",
        "type": "group",
        "z": "dbcf23dd39eba172",
        "name": "logo project",
        "style": {
            "stroke": "#92d04f",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "6ea930b96016ad60",
            "b66e03f867714b74",
            "10623fc92fc83dbb",
            "6353d2401b54f0e2",
            "d1299d9977ddf95b",
            "661e5eef1450df65",
            "1fb63d6085cf834e",
            "14ac6f34675ad2f0",
            "abce67a211970ccc",
            "9d86890e0d68202a"
        ],
        "x": 54,
        "y": 1039
    },
    {
        "id": "acc26a2de722bcc9",
        "type": "group",
        "z": "5d37dc5e8bf693d8",
        "name": "avatar",
        "style": {
            "stroke": "#92d04f",
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "de45f9d797c4f84e",
            "0e164b52e568feca",
            "e9718e2f61302fe4",
            "9d68256b8b394174",
            "4366feda21bb4933",
            "fe995ae37d7a0456",
            "dd6afca9782df5c4",
            "e9214b72b2feea6e",
            "839bb05b3f90bc6f",
            "cdc1a73aa180bc5e",
            "536aa982959aa2cb",
            "e8f9e3928b7fbecd",
            "a633b0f8e148da75",
            "a5d4c55657c115d1"
        ],
        "x": 14,
        "y": 799
    },
    {
        "id": "0bed0c28c4bac75e",
        "type": "group",
        "z": "dbcf23dd39eba172",
        "name": "Projects",
        "style": {
            "stroke": "#ffC000",
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "b5cae29d02aa07e3",
            "c2697ec2eaf68cf8",
            "88a71851b4acc502",
            "7225e15ca50493b9",
            "2d66e56faeb9d137",
            "97d5f6017d9cc4da",
            "aa69a6157e948135",
            "fe46a1033b86c46d",
            "2210299cc2393cf0",
            "74476512cb91bd4f",
            "1fd33d5317455bce",
            "0106699ae5392cfb",
            "fd0af88b0b7eaf49",
            "0fd55436c4c999da",
            "0252dcf345e82fb2",
            "22678679d170ab6c",
            "b039c520d5d8fe5b",
            "fe6b09520cf15488",
            "788ba2601e88f7d2",
            "cf230257d66c4ff0",
            "68b5fe40edf3306c",
            "83417b4d517555c4",
            "865b40d59249526b",
            "ece1e7f9b6a0d0ae",
            "3f078f87586d95ee",
            "82033996b8da365b",
            "c5e7ec04bf4816eb",
            "bf1873d6733e8bc7",
            "1b87af3185bcd7d9",
            "bc2359cc908e7f4a",
            "e9f6f901262137a7"
        ],
        "x": 54,
        "y": 219
    },
    {
        "id": "1b6ca111575aced8",
        "type": "group",
        "z": "2fce404005fef31a",
        "name": "Contracts files",
        "style": {
            "stroke": "#6f2fa0",
            "fill": "#dbcbe7",
            "label": true
        },
        "nodes": [
            "f2d195642f902a5b",
            "f2853d85c0b6a608",
            "eaeac9194da4aabf",
            "a65defd60ed00b0d",
            "d7021d368575cfc0",
            "3202bea804e3ce2a",
            "706092818b736ae5",
            "23ade0959e470859",
            "8dc972495afc14f0",
            "2bcb02a85316f5e5",
            "06d783a9d85ab013",
            "fbf0868688ad85e3",
            "b60aab3c0e88747d",
            "93e9cb3a1643abdb",
            "0699f35de10cf859",
            "bbe16133a378f5e5"
        ],
        "x": 54,
        "y": 1679
    },
    {
        "id": "3767b80692da44bf",
        "type": "group",
        "z": "acc787df1bb9a04e",
        "name": "Dublicate section",
        "style": {
            "stroke": "#0070c0",
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "235f2a43b15819dc",
            "3446e41b57f373fa",
            "d505651e1af88476",
            "996869a33dae8be9",
            "61424dd16d0be35e",
            "dde2994d9ae385eb",
            "8f08e8a3eed73807",
            "ed2b98dfe29bf971",
            "72514d8dfa0cfb1a",
            "1cb2116cdf6f4439",
            "d7223274e658456a",
            "4b5c61bba904dbbe",
            "fe84a0564d5406d1",
            "6404252790d9250f",
            "3c1fe1e925b52a2b",
            "1914b80f20bb4ccc",
            "6f9b8b689d5a3802",
            "99277a62d46d87a6",
            "34169a8552f94d74",
            "18578002c0caa36b",
            "5eabb50d68265a27",
            "ec2b4ac2259bbd8d"
        ],
        "x": 2194,
        "y": 39
    },
    {
        "id": "735e9617b665865a",
        "type": "group",
        "z": "acc787df1bb9a04e",
        "name": "For navigate menu",
        "style": {
            "stroke": "#ffC000",
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "97e7c25d11f4f7c7",
            "9bf628bd1715e171",
            "9d504ac206d7ba26",
            "cbc6214cda2ef4b1",
            "3ace07a31bb9c912"
        ],
        "x": 2194,
        "y": 379
    },
    {
        "id": "8674d609260a3fc0",
        "type": "group",
        "z": "acc787df1bb9a04e",
        "name": "Related tasks for contract and revers",
        "style": {
            "stroke": "#001f60",
            "fill": "#bfc7d7",
            "label": true
        },
        "nodes": [
            "c44248c6bf6e8b09",
            "56b5db5dd6ce57e7",
            "3e48e13d7e4a3e86",
            "d80789a3c721658e",
            "bb49491fe8c8f6c5",
            "22425a15704e5f76",
            "3d516991c14bcf76",
            "11beda57b9408624",
            "181d68c484b0c8d6",
            "74133a96953a3b83",
            "31dca149954bb883",
            "6e5c5ecd8645ed46",
            "02cf7ae6bb9f1533",
            "d5f6614e54fcb112",
            "0e6a43b82da9839b",
            "4a578b5692b022a2",
            "5b1fdb3da92eba80",
            "ce7e6d08b25048d2",
            "f63b0363f29d6a6b",
            "e5874f6214fc308f",
            "a07928bab16fc814",
            "8110bc8711a2e285",
            "33dffa05ef97cd45",
            "0c9dcf98bbf14589",
            "26d924b7a75c09d6",
            "fa0e4b2bd431fac2",
            "be73909d9deef3c6",
            "cad3a06032e63733",
            "bfff11711962b5c7",
            "c9549a83baf6194d",
            "d6957686550cd08d",
            "edae50cfc78c5f76",
            "639218032cd060c6",
            "b19900c6f17740d9",
            "03256cfb4b3d8c5f",
            "a0eeda0d78a44bfd",
            "9797931c6e2fc458",
            "c715b366f1828723",
            "556530fbb67892a0",
            "6265d27831e2392c",
            "8e045652e842cb6e",
            "928422543da3c165",
            "290ed3ac63f878e4",
            "403ea0ffd1b0048f",
            "a011f5b38f17d868",
            "9c5001444520276d",
            "6a67558cfbe618ee",
            "2614eb0b5065dbdc",
            "9a4d0e3b374f7b6c",
            "89cfd7ec9eb38c97",
            "42cb9cb39169aade",
            "c03ae43e9279e964",
            "0e9b686fe28cda64"
        ],
        "x": 34,
        "y": 479
    },
    {
        "id": "d78377c07a215120",
        "type": "group",
        "z": "c8b39bad946d8ab6",
        "name": "Authorization",
        "style": {
            "label": true,
            "color": "#000000",
            "fill": "#ffbfbf"
        },
        "nodes": [
            "d390b9504c129252",
            "b457f0b5c3fd5d96",
            "097b05d6f95dab62",
            "dd3e208dfbba0a56",
            "265641df05c1ca83",
            "de79ea462e97e016",
            "73893182e2e2ed57",
            "cfc7631182b5ef67",
            "a602a24988dcc60f",
            "1a6b5d862a0b4bfc",
            "ca2dc46c7edc0fb2",
            "92a82d990292b9c2",
            "e653dc9c2aa956f2",
            "0b6ff6d92b1de7e7"
        ],
        "x": 34,
        "y": 539
    },
    {
        "id": "4b6589c667fa1af4",
        "type": "group",
        "z": "acc787df1bb9a04e",
        "name": "Add new Task for structure",
        "style": {
            "stroke": "#6f2fa0",
            "fill": "#b797cf",
            "label": true,
            "color": "#ffffff"
        },
        "nodes": [
            "3cc8704d4aef9dca",
            "c72f8ef34625fc8b",
            "78fbfa77a8e6500d",
            "ac704515ae83fc34",
            "ab9b9df3a575502f",
            "1bc31a56e64cd895",
            "86925d8fbfa1ba82",
            "f2018d7d93224eaf",
            "952fc3d0a04c20db",
            "8d9d2d2157272493",
            "265d418790a27a93",
            "adf77aa9e81ec34f",
            "dbaf96a1e74e7d16",
            "08bd8d66da225b16",
            "133f2e03a2fcbc9e",
            "68beaffaf0139b21",
            "165239088e4f52f9",
            "4d5b8e4d4f21d01e",
            "7fb607085048eccd",
            "b1514f504b8eb737",
            "460ff8aec99f0138"
        ],
        "x": 34,
        "y": 1239
    },
    {
        "id": "89c8ac8cfeb7384d",
        "type": "group",
        "z": "acc787df1bb9a04e",
        "name": "",
        "style": {
            "stroke": "#001f60",
            "fill": "#7f7f7f",
            "label": true
        },
        "nodes": [
            "81ad1fc4f1dec749",
            "348fb0e38f12a2a5",
            "0c1ab8a2f63c3aad",
            "d0d349fe530d32eb",
            "f75150102630f853",
            "641c27051a22e993",
            "e80fb4e18d71a36f",
            "b299b28befa18854",
            "9b143a89257e169d",
            "e380f07992b64d42",
            "3b78f7ccf254397b",
            "763ef4debcb59b7d",
            "4d9853a9cf0e26fe",
            "6b8182973c07a7e5",
            "6354983948bb2271",
            "b9d63c345b7f48fb",
            "8e526c34e8b90458",
            "915f13a2e2e26286",
            "07cc1b528d90ed18",
            "909eb1ad0e131b80",
            "09bc51a558ca4e8f"
        ],
        "x": 1574,
        "y": 479
    },
    {
        "id": "bf1873d6733e8bc7",
        "type": "group",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "style": {
            "label": true,
            "fill": "#bfdbef"
        },
        "nodes": [
            "dbbedf8751d5fc19",
            "6a2b7fc3ddea8ee0",
            "c645c0b7c4eea5a8",
            "1db316312e20508c",
            "eaabddecfcf633c9",
            "5d807e7665f5f5d7",
            "1aeb69b887617149",
            "86be7b836191a995",
            "03e28db711080d9d",
            "01b3a72edd22ed84"
        ],
        "x": 1134,
        "y": 479
    },
    {
        "id": "40e92400c5b4fa25",
        "type": "mongodb",
        "hostname": "${mongoHost}",
        "topology": "direct",
        "connectOptions": "authSource=admin",
        "port": "27017",
        "db": "${mongoName}",
        "name": "mongoDB"
    },
    {
        "id": "eef59e6e9401d087",
        "type": "mongodb",
        "hostname": "mongo-8339-ubos-8wnkn-mongo-8339.ubos-8wnkn",
        "topology": "direct",
        "connectOptions": "authSource=admin",
        "port": "27017",
        "db": "mongo-8339",
        "name": "sagadb"
    },
    {
        "id": "8dbe537de8c3d3cc",
        "type": "mongodb",
        "hostname": "testmongo-ubos-lhwnf-testmongo.ubos-lhwnf",
        "topology": "direct",
        "connectOptions": "authSource=admin",
        "port": "27017",
        "db": "testmongo",
        "name": "тест"
    },
    {
        "id": "b36094549859b237",
        "type": "function",
        "z": "e1ca8aeb52e770fa",
        "name": "empty template",
        "func": "msg.payload = [\n   \n            {\n                \"key\": objectid(),\n                \"type\": \"етап\",\n                \"name\": \"Урбан концепт LOD 0\",\n                \"status\": \"\",\n                \"deadline\": \"\",\n                \"customer\": \"\",\n                \"client\": \"\",\n                \"difference\": \"\",\n                \"performer\": \"\",\n                \"children\": [\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Аналіз існуючої містобудівної ситуації (1-й Етап 30%)\",\n                        \"status\": \"\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Аналіз існуючої ситуації відповідно до призначення об'єкту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Аналіз робочих/житлових/рекреаційних та інших просторів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Перспектива розвітку ділянки разом з містом\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Типологія зовнішніх та внутрішніх просторів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Розташування ділянки в місті\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Ситуаційний план\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Функціональне зонування району (існуюче)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Існуюча інфраструктура. Оточуюча забудова району (існуючий стан: освітні заклади, оздоровчі заклади, торгівельні заклади, пам’ятки історії та архітектури, інші)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Транспортна інфраструктура\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Громадський транспорт\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Пішохідні потоки і простори. Існуючи велодоріжки (якщо є в наявності поблизу)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Існуючи зелені зони, зони відпочинку (радіуси доступності\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема планувальних обмежень\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Аналіз рельєфу (основні відмітки існуючого рельєфу, відмітки існуючих будівель оточуючого середовища)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Аналіз переваг та перспективний розвиток ділянки (висновки)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Фотофіксація\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"status\": \"\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"name\": \"Деталізація програми забудови (2-й Етап 40%)\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема формоутворення\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема забудови (об'ємна)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема майстер-плану\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема ділення на черги та пускові комплекси\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема функціонального зонування території\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема функціонального зонування будівель (об'ємна)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схеми взаімоз'язків транспортних потоків різного типу\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схеми взаімоз'язків пішохідних та велосипедних потоків\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема зберігання автотранспорту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Типологія внутрішніх та зовнішніх просторів (ландшафтне рішення, благоустрій)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схеми планів поверхів (укрупненно, зонування)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Розрізи (кількість за необхідністю для розкриття ідеї)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Техніко-економічні показники загальні (включає ТЕП ділянки орієнтовний, ТЕП по чергах орієнтовний з вказанням кожного виду комерційної площі)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Додатковий презентаційний матеріал (3-й Етап 30%)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Візуалізації (кількість для рокриття ідеї) 10 шт\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Відеографічна подача (презентабельне,комерційне відео для партнерів)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Урбан-Концепт Альбом в друкованому вигляді, зшитий (презентабельний)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"key\": objectid(),\n                \"type\": \"етап\",\n                \"name\": \"Архітектурна концепція (АК) LOD50\",\n                \"deadline\": \"\",\n                \"customer\": \"\",\n                \"client\": \"\",\n                \"difference\": \"\",\n                \"performer\": \"\",\n                \"children\": [\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Деталізація генерального плану (1-й Етап 30%)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема генерального плану\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Техніко економічні показники генерального плану\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема зонування території з типологієї просторів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема концептуального благоустрою\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема транспортних з'язків по території (пішохідні, велосипедні, індивідуального транспорту, спеціального транспорту)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема організації рельєфу (основні відмітки та перепади)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема інсоляції з зазначенням неінсолюючих приміщень (інсоляція існуючих будівель та проектних будівель)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема сміттєвидалення, розрахунок площі зон тимчасового зберігання сміття, тип зберігання сміття\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Евакуаційна схема по поверхах та території\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема роботи пожежного автотранспорту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема завантаження комерційних приміщень по території та поверхах\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Деталізація будівель (2-й Етап 40%)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Планування всіх типових та нетипових поверхів (опрацьованих з інженерами та конструкторами)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Розрізи по будинках (відмітки, тип конструкцій наповнення підлог, стін)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Фасади будинків з позначенням матеріалів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Технiко-економiчнi показники\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Участь в розробки КТР по прийнятим рішенням\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель з набіркою всіх зон, в форматі pla, IFC, BIMx, згідно вимог Замовника\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вiзуалiзацiї від 4 шт\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD50\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Концептуальний дизайн МЗК та ліфтових холів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Планування зон згідно дизайн проекту з розташуванням меблів, декорів, тощо.)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Візуалізації дизайну (кількісь що дозволяє розкрити ідею)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Додатковий презентаційний матеріал (3-й Етап 30%)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Відеоматеріал згідно маркетингової концепції для зовнішнього ринку\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комерційні візуалізації\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Комплект продажної документації\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект документації для продажів, виконаний згідно регламенту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"key\": objectid(),\n                \"type\": \"етап\",\n                \"name\": \"Інженерна концепція (ІК) LOD100\",\n                \"deadline\": \"\",\n                \"customer\": \"\",\n                \"client\": \"\",\n                \"difference\": \"\",\n                \"performer\": \"\",\n                \"children\": [\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Архітектурні рішення (АР)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Рецензія на Архітектурну концепцію\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Адаптація технологічних рішень\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Плани, фасади, розрізи (формат PDF)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Плани, фасади, розрізи (формат dwg)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Техніко економічні показникі (згідно ДБН та вимог замовника)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Завдання для конструкторів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Завдання для інженерів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель в форматі BIMx\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель в форматі IFC\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зведена 3D-модель (АР+КБ+Інж)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD100\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Том Ескізного проекту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Комплект продажної документації\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект документації для продажів, виконаний згідно регламенту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Генеральний план (ГП)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема генерального плану 1:1000 в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Ситуаційна схема розміщення об'єкту в місті в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема ГП з розбивкою на черги в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема функціонального зонування території та організація систем обслуговування М1:2000 в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Техніко економічні показники генерального плану\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Інсоляційна схема М 1:500 у форматі PDF та dwg;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Принциповий концепт благоустрою в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Принципове рішення типів покритів в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Конструкції покритів в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Принціпові ріщення деталей, вузлів в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зведений план інженерних мереж в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема покритів в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD100\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Том Ескізного проекту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Конструктив (КБ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Визначення конструктивної схеми\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Визначення сітки колон (пілонів), ядра жорсткості та інше.\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Розрахункова модель\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Пояснювальна записка в довільній формі. Аналіз прийнятого рішення\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Креслення у форматі pdf\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Креслення у форматі dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель в форматі IFC\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD100\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Водопостачання та каналізація (ВК)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Опитувальні листи встановленого зразка у форматі PDF з розрахунками;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Передбачувані/пропоновані місця інженерних приміщень з їх площею і відображенням на плані поверху в форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Наявність і місця для стояків, місця для поверхових шаф, ревізій, ніш з відображенням на плані поверху у форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ опалення, вентиляція та кондиціонування (ОВіК)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Опитувальні листи встановленого зразка у форматі PDF з розрахунками;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Передбачувані/пропоновані місця інженерних приміщень з їх площею і відображенням на плані поверху в форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зони встановлення зовнішніх блоків кондиціонерів житлових приміщень і комерції (за необхідності) з відображенням на плані поверху в форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Плями вентблоків / вентканалів з відображенням на плані поверху в форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Наявність і місця для стояків, місця для поверхових шаф, ревізій, ніш з відображенням на плані поверху у форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Електротехнічні рішення (ЕТР)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Опитувальні листи встановленого зразка у форматі PDF з розрахунками;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Передбачувані/пропоновані місця інженерних приміщень з їх площею і відображенням на плані поверху в форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Наявність і місця для стояків, місця для поверхових шаф, ревізій, ніш з відображенням на плані поверху у форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Пожежної безпеки (ПБ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Опитувальні листи встановленого зразка у форматі PDF з розрахунками;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Передбачувані/пропоновані місця інженерних приміщень з їх площею і відображенням на плані поверху в форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Наявність і місця для стояків, місця для поверхових шаф, ревізій, ніш з відображенням на плані поверху у форматі PDF\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі з Водопостачання та каналізації (ЗІМ-ВК)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі ВК: проходження, концепція та підключення (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі з Теплопостачання (ЗІМ-ТМ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі Теплопостачання: проходження, концепція та підключення (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі з Електротехнічних рішень (ЗІМ-ЕТР)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі ЕТР, ЕО: проходження, концепція та підключення (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі з Системи зв'язку (ЗІМ-СЗ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі СС, СЗ: проходження, концепція та підключення (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Концепція організації будівництва (ПОБ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Концепція організації будівництва\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Концепція організації дорожнього руху (ОДР)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Концепція організації дорожнього руху\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Концепція енергоефективності та енергозбреження (ЕЕ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Концепція енергоефективності та енергозбреження\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Аналіз необхідності влаштування СПП (ІТЗ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Аналіз необхідності влаштування СПП\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"key\": objectid(),\n                \"type\": \"етап\",\n                \"name\": \"Проектування стадії Проект LOD200\",\n                \"deadline\": \"\",\n                \"customer\": \"\",\n                \"client\": \"\",\n                \"difference\": \"\",\n                \"performer\": \"\",\n                \"children\": [\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Архітектурні рішення (АР) - LOD200\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи (docx, pdf) для завантаження в ЕДССБ (окремо ПЗ, додаткові ТЕП, окремі плани, фасади)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Технологічні рішення об'єкта\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Плани, фасади, розрізи з фврхуванням повної ув'язки з розділами КБ, ІНЖ, ПБ та інш. у форматах PDF та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Техніко економічні показникі (згідно ДБН та вимог замовника)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Завдання для конструкторів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Завдання для інженерів\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель в форматі BIMx\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель в форматі IFC\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зведена 3D-модель (АР+КБ+Інж)  ifc / nwd\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD200\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Комплект продажної документації - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект документації для продажів, виконаний згідно регламенту\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Генеральний план (ГП) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи (docx, pdf)(окремо ПЗ, окремий файл з основною схемою)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема генерального плану 1:1000 в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Ситуаційна схема розміщення об'єкту в місті М1:10000 в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Генеральний план М1:500 в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Техніко економічні показники генерального плану\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"План благоустрою та озеленення М 1:500 в форматах pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Схема транспортно-пішохідних зв’язків М 1:500 у форматі PDF та dwg;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Інсоляційна схема М 1:500 у форматі PDF та dwg;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зведений план внутрішньоквартальних інженерних мереж М 1:500 у форматі PDF та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"План організації рельєфу М 1:500 у форматі PDF та dwg;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"План земляних мас М 1:500 у форматі PDF та dwg;\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD100 (Вивантаженні об’єми матеріалів благоустрою: загальна площа асфальтування, загальна площа оздоблення зелених зон, довжина бордюрних каменів, загальна площа мощення)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Конструктив (КБ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи (docx, pdf)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Визначення сітки колон (пілонів), ядра жорсткості та інше.\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Уточнена конструктивна схема / Розрахункова модель\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Пояснювальна записка в довільній формі. Аналіз прийнятого рішення\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Креслення у форматі pdf\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Креслення у форматі dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель в форматі IFC\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Об'єми згідно LOD200\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Водопостачання та каналізація (ВК) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи (docx, pdf)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Принципові схеми систем та обладнання по розділам у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень з нанесеними та ув'язаними з іншими розділами місцями інженерних приміщень з їх площею та обладнанням технічними коридорами основних мереж, стояками, шахтами, ревізіями і т.д. у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ опалення, вентиляція та кондиціонування (ОВіК) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи (docx, pdf)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Принципові схеми систем та обладнання по розділам у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень з нанесеними та ув'язаними з іншими розділами місцями інженерних приміщень з їх площею та обладнанням технічними коридорами основних мереж, плямами вентблоків, зовнішніх блоків кондиціонерів, їх дренаж, стояками, шахтами, ревізіями і т.д. у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Електротехнічні рішення (ЕТР) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи (docx, pdf)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Принципові схеми систем та обладнання по розділам у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень з нанесеними та ув'язаними з іншими розділами місцями інженерних приміщень з їх площею та обладнанням технічними коридорами основних мереж, стояками, шахтами, ревізіями і т.д. у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Пожежної безпеки (ПБ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект для експертизи ПС, ОП, ДВ, АК, ОС, АКГ, АПГ, БЗ (docx, pdf)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідні файли у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Передбачувані/пропоновані місця інженерних приміщень з їх площею і відображенням на плані поверху в форматі PDF, dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Наявність і місця для стояків, місця для поверхових шаф, ревізій, ніш з відображенням на плані поверху у форматі PDF, dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Індивідуальний тепловий пункт (ІТП) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Індивідуальний тепловий пункт у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Внутрішні системи зв'язку (СЗ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Внутрішні системи зв'язку у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Автоматизація та диспетчеризація інженерних систем (АК) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Автоматизація та диспетчеризація інженерних систем у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Проект (ПОБ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Проект організації будівництва у форматі pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Оцінка впливів на навколишнє середовище (ОВНС) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Оцінка впливів на навколишнє середовище pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Енергоефективність (ЕЕ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Енергоефективність pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Захист від шуму та вібрації (ЗШ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Захист від шуму pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Розрахунок часу евакуації людей (РЧЕ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Розрахунок часу евакуації pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Інженерно-технічні заходи по запобіганню аварійних ситуації та ліквідація наслідків (ІТЗ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Інженерно-технічні заходи по запобіганню аварійних ситуації та ліквідація наслідків pdf та dwg\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Оцінка вогнестійкості будівельних конструкцій (ОВБК) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень  pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Розрахунок на стійкість до прогресуючого обвалення внаслідок пожежі (РСПО) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень  pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Дахова газова котельня. Тепло-механічні рішення (ТМК) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Дахова газова котельня. Тепло-механічні рішення pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі з Водопостачання та каналізації (ЗІМ-ВК)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі ВК: проходження, концепція та підключення (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі з Теплопостачання (ЗІМ-ТМ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі Теплопостачання: проходження, концепція та підключення (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі Електропостачання. Трансформаторна підстанція (ЗІМ-ЕП ТП)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі ЕП, ТП\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі Система зв’язку зовнішнє (ЗІМ-СЗЗ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі Система зв’язку зовнішнє (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Розділ Електроосвітлення зовнішнє* (ЕЗ) - LOD200\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Комплект креслень Електроосвітлення зовнішнє pdf та dwg\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"група\",\n                        \"name\": \"Зовнішні інженерні мережі Газопостачання зовнішнє (ЗІМ-ГПЗ)\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Зовнішні мережі Система зв’язку зовнішнє (ІК)\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"задача\",\n                                \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                \"status\": \"\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"key\": objectid(),\n                \"type\": \"етап\",\n                \"name\": \"Робоча документація (РД) LOD 300\",\n                \"status\": \"\",\n                \"deadline\": \"\",\n                \"customer\": \"\",\n                \"client\": \"\",\n                \"difference\": \"\",\n                \"performer\": \"\",\n                \"children\": [\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"секція\",\n                        \"name\": \"Матеріали об'єднаних секцій '00'\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Комплект продажної документації - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект документації для продажів, виконаний згідно регламенту\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Розділи пожежної безпеки\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АПГ Автоматична система спринклерного водяного пожежогасіння у форматах pdf, dwg, ifc, rvt\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - БЗ Зовнішня блискавкозахисна система у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ОС Система пожежної сигналізації у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ОП Система оповіщення про пожежу у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ППГ Автоматична система порошкового пожежогасіння у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ДВ Системи протидимного захисту у форматах pdf, dwg, ifc, rvt\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АК Автоматизація систем протидимного захисту. Автоматизація протипожежних клапанів. Автоматизація внутрішнього протипожежного водопроводу у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ОС Система охоронної сигналізації у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АКГ1 Система автоматичної сигналізації довибухонебезпечних концентрацій газу метану у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АКГ2 Система автоматичної сигналізації мікроконцентрацій чадного газу у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Генеральний план (ГП) - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Генеральний план М1:500 в форматах pdf та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Техніко економічні показники генерального плану\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"План благоустрою та озеленення М 1:500 в форматах pdf та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Схема транспортно-пішохідних зв’язків М 1:500 у форматі PDF та dwg;\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Зведений план внутрішньоквартальних інженерних мереж М 1:500 у форматі PDF та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"План організації рельєфу М 1:500 у форматі PDF та dwg;\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"План земляних мас М 1:500 у форматі PDF та dwg;\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Об'єми згідно LOD300 (Вивантаженні об’єми матеріалів благоустрою: загальна площа асфальтування, загальна площа оздоблення зелених зон, довжина бордюрних каменів, загальна площа мощення)\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Зовнішні інженерні мережі з Водопостачання та каналізації (ЗІМ-ВК)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Зовнішні мережі ВК\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Зовнішні інженерні мережі Електропостачання. Трансформаторна підстанція (ЗІМ-ЕП ТП)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Зовнішні мережі ЕП, ТП\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Зовнішні інженерні мережі з Теплопостачання (ЗІМ-ТМ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Зовнішні мережі Теплопостачання: проходження, концепція та підключення (ІК)\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Винос інженерних мереж з під плям забудови\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Винос інженерних мереж з під плям забудови\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Позамайданчикове проектування (ПМП)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Позамайданчикове проектування' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"План організації будівництва (ПОБ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'План організації будівництва' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"План підготовчих робіт (ППР)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'План підготовчих робіт' (ППР) у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"План виконання будівельних робіт (ПВР)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'План виконання будівельних робіт' (ПВР) у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Вертикальний транспорт (ВТ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Вертикальний транспорт' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Технологічні рішення (ТХ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Технологічні рішення' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Підсвітка фасадів (ПСФ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Концепція підсвітки фасадів' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Робочий проект підсвітки фасадів' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Робочий проект фасадів (СПОК)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Фасадів та СПОК' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Дизайн проект МЗК\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Дизайн головних холів' у форматі PDF та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Дизайн типових поверхів' у форматі PDF та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Холодопостачання та кондиціонування (ХП)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Холодопостачання та кондиціонування' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Дренажна система в межах будівельного майданчика (ДС)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Дренажна система в межах будівельного майданчика' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Дублюючий розрахунок будівельних конструкцій (ДР)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Дублюючий розрахунок будівельних конструкцій' у форматі PDF\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Дублююча розрахункова схема\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Авторський нагляд - Архітектурні рішення (АН-АР)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Десять виїздів на майданчик головного спеціаліста\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Авторський нагляд - Конструкції будівельні (АН-КБ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Десять виїздів на майданчик головного спеціаліста\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Авторський нагляд - Інженерні мережі (АН-ІНЖ)\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Десять виїздів на майданчик головного спеціаліста\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            }\n                        ]\n                    },\n                    {\n                        \"key\": objectid(),\n                        \"type\": \"секція\",\n                        \"name\": \"Комплект для секції '01'\",\n                        \"deadline\": \"\",\n                        \"customer\": \"\",\n                        \"client\": \"\",\n                        \"difference\": \"\",\n                        \"performer\": \"\",\n                        \"isAction\": true,\n                        \"children\": [\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"АРХІТЕКТУРНІ РІШЕННЯ (АР) - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Модель у форматі IFC\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.1 Плани\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.2 Розрізи\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.3 Фасади\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.С Специфікації\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.В Відомості\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.Д1 Деталі та вузли\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.Д2 Індивідуальні вироби\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"АР.Ф Паспорт опорядження фасадів\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Об'єми згідно LOD300\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Модель у форматі BIMx з комплектом креслень, що відповідають підкомплектам\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Конструктивні рішення\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Розрахункова схема будівлі\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Модель IFC\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.1 - Підготовчі конструкції\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.2 - Фундаменти\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.3.1 - Вертикальні елементи до типового поверху\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.3.2 - Вертикальні елементи типового поверху\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.3.3 - Вертикальні елементи верхніх поверхів\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.4.1 - Плити перекриття до типового поверху\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ4.2 - Плити перекриття типових поверхів\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ4.3 - Плити перекриття верхніх поверхів\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.5 - Сходи, пандуси, рампи\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"КБ.6 - Ганки, приямки\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Розділ Водопостачання та каналізація (ВК) - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Водопостачання та каналізація' у форматі pdf та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Розділ опалення, вентиляція та кондиціонування (ОВіК) - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'опалення, вентиляція та кондиціонування' у форматі pdf та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Розділ Електротехнічні рішення (ЕТР) - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Електротехнічні рішення' у форматі pdf та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Модель ifc та rvt що пройшла координацію з іншими розділами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Розділ Системи зв'язку (СЗ) - LOD300\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Вихідний файл у нативному форматі з усіма підключеними бібліоткеами, видами, листами\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"Комплект креслень 'Системи зв'язку' у форматі pdf та dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            },\n                            {\n                                \"key\": objectid(),\n                                \"type\": \"група\",\n                                \"name\": \"Розділи пожежної безпеки\",\n                                \"deadline\": \"\",\n                                \"customer\": \"\",\n                                \"client\": \"\",\n                                \"difference\": \"\",\n                                \"performer\": \"\",\n                                \"isAction\": true,\n                                \"children\": [\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АПГ Автоматична система спринклерного водяного пожежогасіння у форматах pdf, dwg, ifc, rvt\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - БЗ Зовнішня блискавкозахисна система у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ОС Система пожежної сигналізації у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ОП Система оповіщення про пожежу у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ППГ Автоматична система порошкового пожежогасіння у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ДВ Системи протидимного захисту у форматах pdf, dwg, ifc, rvt\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АК Автоматизація систем протидимного захисту. Автоматизація протипожежних клапанів. Автоматизація внутрішнього протипожежного водопроводу у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - ОС Система охоронної сигналізації у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\"\n                                    },\n                                    {\n                                        \"key\": objectid(),\n                                        \"type\": \"задача\",\n                                        \"name\": \"DF - АКГ2 Система автоматичної сигналізації мікроконцентрацій чадного газу у форматах pdf, dwg\",\n                                        \"status\": \"\",\n                                        \"deadline\": \"\",\n                                        \"customer\": \"\",\n                                        \"client\": \"\",\n                                        \"difference\": \"\",\n                                        \"performer\": \"\",\n                                        \"isAction\": true\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 180,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "6b19f211ea059b3f",
        "type": "function",
        "z": "9ffc66369df29712",
        "name": "template structure",
        "func": "\nmsg.payload = [\n    {\n        \"key\": objectid(),\n        \"name\": \"Тип контрагенту: Замовник\",\n        \"type\": \"\",\n        \"isAction\": true,\n        \"children\": []\n    },\n    {\n        \"key\": objectid(),\n        \"name\": \"Тип контрагенту: Підрядник\",\n        \"isAction\": true,\n        \"children\": []\n    },\n]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 230,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "e4b34b8ab72c2466",
        "type": "function",
        "z": "20c53500e7b814e0",
        "name": "env",
        "func": "let process_env = {\n    CLIENTID:'663345603096-k5d1496bo81989aaflpi38e0trkmqdpa',\n    CLIENTSECRET:'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',\n    REDIRECTURL:'https://www.visia-terra.pro/LogInGoogle',\n    EMAIL:'fen9206@gmail.com',\n    EMAILPASSWORD:'bmup ghpu gnqx king'\n}\n\nglobal.set(\"process_env\", process_env)\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "a70e7dbdb4c50aa6",
        "type": "inject",
        "z": "20c53500e7b814e0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 80,
        "wires": [
            [
                "e4b34b8ab72c2466"
            ]
        ]
    },
    {
        "id": "61c07f425931fa4d",
        "type": "function",
        "z": "20c53500e7b814e0",
        "name": "helpers",
        "func": "let currentDate = new Date();\n\n// Створюємо об'єкт опцій для форматування\nlet options = {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    timeZone: 'Europe/Kiev',\n};\n\n// Отримуємо форматовану поточну дату\nlet formattedDate = currentDate.toLocaleDateString('uk-UA', options);\n\n// Додаємо 3 дні до поточної дати\nlet datePlus3Days = new Date(currentDate);\ndatePlus3Days.setDate(currentDate.getDate() + 3);\n\n// Отримуємо форматовану дату з додаванням 3 днів\nlet formattedDatePlus = datePlus3Days.toLocaleDateString('uk-UA', options);\n\n// Записуємо результати у глобальні змінні, конвертуючи їх у рядки\nglobal.set(\"convert_date\", formattedDate.toString());\nglobal.set(\"convert_dateplusdays\", formattedDatePlus.toString());\n\n\n\n\n// Повертаємо об'єкт msg\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "6bdddf6959cadeb6",
        "type": "inject",
        "z": "20c53500e7b814e0",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 140,
        "wires": [
            [
                "61c07f425931fa4d"
            ]
        ]
    },
    {
        "id": "346e518816416d1d",
        "type": "link in",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "mongo Find",
        "links": [],
        "x": 75,
        "y": 220,
        "wires": [
            [
                "a902fac8c21085e6"
            ]
        ]
    },
    {
        "id": "b7c366424b9b7e6e",
        "type": "link in",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "mongo Aggregate",
        "links": [],
        "x": 75,
        "y": 280,
        "wires": [
            [
                "84c75bed55ab1dd8"
            ]
        ]
    },
    {
        "id": "1764f8568a80ddbd",
        "type": "link in",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "mongo Insert",
        "links": [],
        "x": 85,
        "y": 400,
        "wires": [
            [
                "7739c6ef4683fa04",
                "7ce3e0949b4a483f"
            ]
        ]
    },
    {
        "id": "286431cd31c9fc7a",
        "type": "link in",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "mongo Update",
        "links": [],
        "x": 85,
        "y": 460,
        "wires": [
            [
                "5accd99f247f88ec",
                "6a3c98d4b6b016de"
            ]
        ]
    },
    {
        "id": "4307ecabcc6486c7",
        "type": "link out",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "link out 1",
        "mode": "return",
        "links": [],
        "x": 335,
        "y": 220,
        "wires": []
    },
    {
        "id": "6544322b922c1a49",
        "type": "link out",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "link out 2",
        "mode": "return",
        "links": [],
        "x": 345,
        "y": 280,
        "wires": []
    },
    {
        "id": "7739c6ef4683fa04",
        "type": "link out",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "link out 4",
        "mode": "return",
        "links": [],
        "x": 235,
        "y": 360,
        "wires": []
    },
    {
        "id": "5accd99f247f88ec",
        "type": "link out",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "name": "link out 5",
        "mode": "return",
        "links": [],
        "x": 235,
        "y": 500,
        "wires": []
    },
    {
        "id": "7ce3e0949b4a483f",
        "type": "mongodb out",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 270,
        "y": 400,
        "wires": []
    },
    {
        "id": "6a3c98d4b6b016de",
        "type": "mongodb out",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "update",
        "x": 270,
        "y": 460,
        "wires": []
    },
    {
        "id": "a902fac8c21085e6",
        "type": "mongodb in",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "operation": "find",
        "x": 230,
        "y": 220,
        "wires": [
            [
                "4307ecabcc6486c7"
            ]
        ]
    },
    {
        "id": "84c75bed55ab1dd8",
        "type": "mongodb in",
        "z": "c740254358c79788",
        "g": "0c12ce383a397a7d",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "operation": "aggregate",
        "x": 230,
        "y": 280,
        "wires": [
            [
                "6544322b922c1a49"
            ]
        ]
    },
    {
        "id": "76fd70890eb5f7a6",
        "type": "function",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "function 487",
        "func": "//  msg.buffer = msg.req.files[0].buffer\nmsg.path = `/data/fonts1/FixelDisplay-Medium.woff`\n//  msg.payload = msg.req.files[0].buffer\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 720,
        "wires": [
            [
                "fa0b651230faaafa"
            ]
        ]
    },
    {
        "id": "95a1c44caead784a",
        "type": "file",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 500,
        "y": 600,
        "wires": [
            [
                "21ed0e58f6517192"
            ]
        ]
    },
    {
        "id": "21ed0e58f6517192",
        "type": "http response",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 660,
        "wires": []
    },
    {
        "id": "74115e6f7285d4ad",
        "type": "http in",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "",
        "url": "/fonts",
        "method": "get",
        "upload": true,
        "swaggerDoc": "",
        "x": 120,
        "y": 720,
        "wires": [
            [
                "76fd70890eb5f7a6"
            ]
        ]
    },
    {
        "id": "fa0b651230faaafa",
        "type": "file in",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 520,
        "y": 720,
        "wires": [
            [
                "21ed0e58f6517192"
            ]
        ]
    },
    {
        "id": "d8c409caa9de242c",
        "type": "function",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "function 488",
        "func": "//  msg.buffer = msg.req.files[0].buffer\nmsg.path = `/data/fonts1/FixelDisplay-Medium.woff`\n msg.payload = msg.req.files[0].buffer\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 600,
        "wires": [
            [
                "95a1c44caead784a"
            ]
        ]
    },
    {
        "id": "a892adf233912587",
        "type": "http in",
        "z": "c740254358c79788",
        "g": "49efeb2f042463b1",
        "name": "",
        "url": "/fonts",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 130,
        "y": 600,
        "wires": [
            [
                "d8c409caa9de242c"
            ]
        ]
    },
    {
        "id": "a186ba9dfbca2916",
        "type": "http in",
        "z": "c740254358c79788",
        "g": "b0ef14992c694846",
        "name": "",
        "url": "/css",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 80,
        "wires": [
            [
                "4dbc400d7c9ea753"
            ]
        ]
    },
    {
        "id": "781e82cf462af243",
        "type": "http response",
        "z": "c740254358c79788",
        "g": "b0ef14992c694846",
        "name": "",
        "statusCode": "",
        "headers": {
            "content-type": "text/css"
        },
        "x": 430,
        "y": 80,
        "wires": []
    },
    {
        "id": "9308320ee32458bc",
        "type": "inject",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 920,
        "wires": [
            [
                "2c69511896561dd6"
            ]
        ]
    },
    {
        "id": "2c69511896561dd6",
        "type": "function",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "name": "function 585",
        "func": "msg.collection = \"tasks\";\nmsg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "a3f98ae34e50564f",
        "type": "function",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "name": "function 586",
        "func": "msg.payload = msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 920,
        "wires": [
            [
                "7f534143e33ec6de"
            ]
        ]
    },
    {
        "id": "7f534143e33ec6de",
        "type": "mongodb out",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 820,
        "y": 920,
        "wires": []
    },
    {
        "id": "c59aa6803771969a",
        "type": "inject",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 1060,
        "wires": [
            [
                "6cdc23a401c563cf"
            ]
        ]
    },
    {
        "id": "6cdc23a401c563cf",
        "type": "function",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "name": "function 587",
        "func": "msg.collection=\"section\";\nmsg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1060,
        "wires": [
            [
                "9bb4420db5057482"
            ]
        ]
    },
    {
        "id": "9bb4420db5057482",
        "type": "mongodb in",
        "z": "c740254358c79788",
        "g": "629b12ad2c8a2432",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "operation": "find",
        "x": 520,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "4dbc400d7c9ea753",
        "type": "template",
        "z": "c740254358c79788",
        "g": "b0ef14992c694846",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "css",
        "syntax": "mustache",
        "template": "@font-face {\n  font-family: \"Fixel Display\";\n  src: url(\"/fonts\") format(\"woff\");\n  font-weight: normal;\n  font-style: normal;\n}\n:root {\n  --brand-color: #303d51;\n  --bg-color: #f8f8f8;\n  --modal-bg-color: #8e8e8e;\n  --menu-bg-color: #1d1d1d;\n  --menu-item-color: #292929;\n  --white-color: #ffffff;\n  --agreed-status-color: #8ad66f;\n  --rejected-status-color: #ff3d00;\n  --pending-status-color: #ffc700;\n  --processing-status-color: #605bff;\n  --stage-bg-color: #f3ede4;\n  --section-bg-color: #f9f5f1;\n  --bold-text-color: #222222;\n  --text-color: #787675;\n  --button-bg-color: #f3ede4;\n\n  --main-font: Fixel Display, sans-serif;\n  --secondary-font: Inter, sans-serif;\n}\n\n/* _____________BASE_________________ */\ninput {\n  border-radius: 4px !important;\n}\nbutton {\n  border-radius: 4px !important;\n}\nlabel {\n  border-radius: 4px !important;\n}\n\n\nbody {\n  font-family: var(--main-font);\n  background-color: var(--bg-color) !important;\n}\nsection {\n  background-color: var(--bg-color) !important;\n}\n\nspan > textarea {\n  border-radius: 4px !important;\n}\n.bp3-button .bp3-input-group{\n  border-radius: 8px!important;\n}\n::-webkit-scrollbar {\n  width: 0.1px;\n}\n\n\n\n.ant-table-row-level-0{\n    background-color: #f5eada!important;\n}\n.ant-table-row-level-1{\n   background-color:#F9F5F1!important;\n}\n.ant-table-row-level-2{\n    background-color: #fdfcfc!important;\n}\n.ant-table-thead th:not(:first-child){\n  width:250px!important;\n}\n.ant-table-thead th[title=\"Назва\"]{\n    width:850px!important;\n\n}\n\n.contractInputInModal>div>div>div>div>div>div>span>span textarea {   \n  font-size: 40px !important;\n  border-radius: 4px !important;\n  color: var(--bold-text-color) !important;\n  font-family: var(--main-font) !important; \n  font-weight: 400 !important;\n  line-height: 1.25 !important; /* 125% */\n  letter-spacing: -0.8px !important;\n  padding-bottom: 5px  !important;\n  padding-top: 5px  !important; \n  background-color: transparent !important;\n  /* padding-bottom: 2px !important; */\n}\n\n.contractInputInModal>div>div>div>div>div>div>div>div>div>div>div>span>span textarea::placeholder {\n  color: var( --text-color) !important; \n }\n \n.modalStatusBtn > div > div > div > div > div > button{\n  color: var(----white-color) !important;\n}\n\n.modalSwitchBtn > div > div > div > div > label > span {\n  background-color: var(--brand-color) !important;\n  border: 1px solid var(--brand-color) !important;\n}\n\n.modalSwitchBtn > div > div > div > div > label.t--switch-widget-inactive > span {\n  background-color: #898e95 !important\n}\n\n.editTaskModalDate div{\n  height: 36px !important;\n  \n  }\n\n  .newProjectmodalForm {\n  position: relative !important;\n  width: 100% !important;\n}\n\n.modalInput {\n  position: initial !important;\n  width: 100% !important;\n}\n.modalInputTask {\n  position: initial !important;\nmargin-left: 6px!important;\nwidth: calc(100% - 6px) !important;\n}\n\n.t--widget-selectwidget{\n  /* width: 200px!important; */\n  border-radius: 10px!important;\n}\n.t--widget-formwidget{\n  left:0!important;\n  /* width: 100%!important; */\n}\ndiv[type=\"FORM_WIDGET\"]>div>div>div>div>div>div>div>div>div{\nleft: 0!important;\n}\n.titleInsideModalTabs>div>div>div>div>div>div>div>span {\ncolor: var(--bold-text-color) !important;\nfont-family: var(--main-font) !important;\nfont-size: 20px !important;\nfont-weight: 400 !important;\nline-height: 1.6 !important; /* 160% */\nletter-spacing: -0.4px !important;\n}\n\n.headerText span {\n  font-family: var(--main-font) !important;\n  color: var(--brand-color) !important;\n  font-size: 1.8vw !important;\n  font-style: normal !important;\n  font-weight: 500 !important;\n  line-height: 60px !important;\n  letter-spacing: 0.8px !important;\n}\n.subText span {\n  color: var(--bold-text-color) !important;\n  font-family: var(--secondary-font) !important;\n  font-size: 20px !important;\n  font-style: normal !important;\n  font-weight: 400 !important;\n  line-height: 32px !important;\n  letter-spacing: -0.4px !important;\n}\n.lightText span {\n  color: var(--text-color) !important;\n  font-family: var(--secondary-font) !important;\n  font-size: 14px !important;\n  font-style: normal !important;\n  font-weight: 400 !important;\n  line-height: 24px !important;\n  letter-spacing: -0.28px !important;\n}\n.baseText span {\n  color: var(--bold-text-color) !important;\n  font-family: var(--secondary-font) !important;\n  font-size: 14px !important;\n  font-style: normal !important;\n  font-weight: 400 !important;\n  line-height: 24px !important;\n  letter-spacing: -0.28px !important;\n}\n\n/* _____________HEADER_________________ */\n.sidebar {\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  height: 100vh !important;\n  padding: 0 !important;\n  background-color: var(--menu-bg-color) !important;\n}\n.sidebar > div > div > div > div > div > div > div > div > div > div {\n  height: 100vh !important;\n}\n.accordion{\n  overflow-y: scroll!important;\n}\n.accordion button {\n  background-color: var(--menu-item-color) !important;\n  color: var(--white-color) !important;\n  display: block !important;\n  box-shadow: none !important;\n}\n.accordion button::after {\n  box-shadow: none !important;\n  border: none !important;\n}\n.sidebar_menuWrapper {\n  height: 270px !important;\n  top: calc(100vh - 290px) !important;\n  left: 4px !important;\n}\n.sidebar_menuWrapper .t--widget-buttonwidget {\n  width: 100% !important;\n  left: 4px !important;\n}\n.menuLogo > div> div> div> div> div> div> div> span {\n  font-size: 3vw !important;\n  cursor: pointer !important;\n}\n\n/*__________________Modal________________________ */\ndiv[id=\"comment-overlay-wrapper-0\"]\n  .bp3-overlay-content.bp3-overlay-appear-done {\n  width: 50% !important;\n  height: 100vh !important;\n  max-height: 100vh !important;\n  right: 0px !important;\n}\n\n.cheker > div > div > div > div span {\n  border-radius: 180px !important;\n  outline: none !important;\n  border: none !important;\n}\n.cheker > div > div > div > div span:before {\n  border-radius: 180px !important;\n  background-color: rgb(20, 22, 20) !important;\n  border: none !important;\n}\n.activtab > div > div > div > div > div > div > div img {\n  border-radius: 180px !important;\n  background-color: #1d1b1b !important;\n}\n\n.init {\n  position: initial !important;\n}\n.hide {\n  display: none;\n  height: 20px !important;\n}\n\n.activ {\n  display: block;\n}\n\n.rc-pagination-prev button::after {\n  content: \"\\25c4\" !important;\n  display: block !important;\n  border: none !important;\n}\n.rc-pagination-next button::after {\n  content: \"\\25ba\" !important;\n  display: block !important;\n}\n.rc-pagination-item {\n  display: none !important;\n}\n\n.contractModalInput {\n  position: relative !important;\n  width: 99% !important;\n}\n\n.contractSaveBtn {\n  left: unset !important;\n  right: 0 !important;\n}\n\n.contractSum {\n  width: 42% !important;\n}\n\n.contractSelectFile {\n  left: unset !important;\n  right: 0 !important;\n}\n\n.modalTitle {\n  width: 100% !important;\n}\n\n/* ____________MODAL ADD PROJECT______________________ */\n.sidemenu {\n  width: 50% !important;\n  padding-left: 10px !important;\n  padding-right: 30px !important;\n  height: 100vh !important;\n  background-color: var(--bg-color) !important;\n  max-height: 100vh !important;\n  min-height: 100vh !important;\n  transform: translate3d(0px, 0px, 0px) !important;\n  right: 0px !important;\n}\n.project_tabs div {\n  background-color: transparent !important;\n  \n}\n.project_tabs > div > div > div > div {\n  height: 100vh !important;\n  background-color: transparent !important;\n  border: none !important; \n  overflow: scroll !important; \n  box-shadow: none !important;\n\n}\n.project_tabs > div > div > div > div > div > div .selectedTab{\n  box-shadow: rgb(235, 239, 242) -1px 0px 0px inset, rgb(235, 239, 242) 0px 0px 0px inset, rgb(3, 3, 3) 0px 4px 0px inset;\n} \n.sidemenu_img {\n  height: 145px !important;\n  width: 155px !important;\n  \n}\n\n.editTaskModalSelect .bp3-button .dropdown-icon {\n   display: none;\n }\n.listInput .t--widget-containerwidget {\n  background-color: var(--white-color) !important;\n} \n\n/*__________________PROJECTS PAGE________________________ */\n\n.testlistitem {\n  width: calc((100% - 45px) / 2) !important;\n  padding: 0 !important;\n  margin: 0 8px 8px 0 !important;\n  background-color: var(--white-color) !important;\n  border-radius: 8px !important;\n  border: 0.5px solid rgba(120, 118, 117, 0) !important;\n\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.1) !important;\n  cursor: pointer !important;\n}\n.testlistitem .bp3-ui-text{\n  cursor: inherit !important;}\n  \n.testlistitem div {\n  padding: 0 !important;\n  cursor: pointer !important;\n}\n\n.testlistitem .canvas > button {\n  display: none !important;\n}\n\n.testlist .custom-wrapper-canvas-list {\n  display: flex !important;\n  flex-direction: row !important;\n  overflow-x: hidden !important;\n  flex-wrap: wrap !important;\n  align-content: flex-start !important;\n  justify-content: flex-start !important;\n  align-items: center !important;\n  column-gap: 24px !important;\n}\n\n.testlist .bp3-icon-plus {\n  display: none !important;\n}\n.list_itemImg > div > div > div > div > div > div > div {\n  border-radius: 0 8px 8px 0 !important;\n  \n}\n.list_itemImg {\n  left: calc(100% - 200px) !important;\n  top: 0px !important;\n  height: 200px !important;\n  width: 200px !important;\n  \n}\n.list_itemImg > div > div > div > div > div > div > div img {\n  display: block !important; \n  overflow: hidden !important;\n  border-radius: 0 8px 8px 0 !important;\n}\n.list_itemDate {\n  top: 159px !important;\n  padding-left: 8px !important;\n}\n\n.list_itemTitle {\n  padding-left: 8px !important;\n}\n.list_itemSubtitle {\n  padding-left: 8px !important;\n}\n\n/*Modal new Task*/\n\n.taskStatus>div>div>div>div>div>div>div>span {\n  background-color: var(--agreed-status-color) !important;\n  border-radius: 4px !important;\n  padding-top: 4px !important;\n  padding-bottom: 4px !important;\n}\n\n.taskStatusDone>div>div>div>div>div>div>div>span {\nbackground-color: var(--agreed-status-color) !important}\n\n.taskStatusInProgress>div>div>div>div>div>div>div>span {\n  background-color:  var(--processing-status-color) !important\n  }\n\n.documentStatusInModal>div>div>div>div>div>div>div {\n  border-radius: 4px !important;\n}\n\n.documentStatusInModalPending>div>div>div>div>div>div>div {\n  background-color: var(--pending-status-color) !important;\n} \n\n.documentStatusInModalRejected>div>div>div>div>div>div>div {\n  background-color: var(--rejected-status-color) !important;\n}\n\n.documentStatusInModalDone>div>div>div>div>div>div>div {\n  background-color: var(--agreed-status-color) !important;\n}\n\n.documentStatusInModalInProgress>div>div>div>div>div>div>div {\n  background-color: var(--processing-status-color) !important;\n}\n\n.inputInModal>div>div>div>div>div>div>span>span textarea {\n  /* width: 100%!important; */\n  border-radius: 4px !important;\n  color: var( --text-color) !important;\n  font-family: var(--main-font) !important;\n  font-size: 25px !important;\n  font-weight: 400 !important;\n  line-height: 1.25 !important; /* 125% */\n  letter-spacing: -0.8px !important;\n  padding-bottom: 5px  !important;\n  padding-top: 5px  !important; \n  background-color: transparent !important;\n}\n\n\n.inputInModal>div>div>div>div>div>div>div>div>div>div>div>span>span textarea::placeholder {\n  color: var( --text-color) !important; \n }\n\n.newTaskTabTitle>div>div>div>div>div{\n  color: #888583  !important;\n  font-family: Fixel Display  !important;\n  font-size: 20px  !important;\n  font-style: normal  !important;\n  font-weight: 400  !important;\n  line-height: 1.6  !important; /* 160% */\n  letter-spacing: -0.4px  !important;\n}\n\n.titleInsideTab {\ncolor: var(--bold-text-color) !important;\nfont-family: var(--main-font) !important;\nfont-size: 20px !important;\nfont-weight: 400 !important;\nline-height: 1.6 !important; /* 160% */\nletter-spacing: -0.4px !important;\n}\n\n.lastPage .t--list-widget-next-page {\n    display: none !important;\n}\n\n.filesList >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div{\n  cursor: initial !important;\n}\n\n.listDisableCursor >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div >div{\n  cursor: initial !important;\n}\n\n.filesList div.t--widget-containerwidget {\n  width: 100%  !important;\n}\n\n.relatedTasksManyModalList div.t--widget-containerwidget {\n  width: 99%  !important;\n}\n\n.editContractArchiveBtn {\n  left: unset !important;\n  right: 0 !important;\n}\n\n.editContractSaveBtn {\n  left: unset !important;\n  right: 140px !important;\n}\n\n\n.containerInsideContractModalTab{\n  width: 100% !important;\n  left: 0 !important;\n}\n\n.chooseContractInModalContainer{\n  width: 100% !important;\n}\n\n.addContractInModalBtn {\n  left: unset !important;\n  right: 0 !important;\n}\n\n.chooseContractInputInModal {\n    width: 80% !important;\n\n}\n\n.wrapperInsideModalTab {\n  width: 100% !important;\n\n}\n\n.addBtnInContractModalTab {\n  left: unset !important;\n  right: 0 !important;\n}\n\n.summaryInContractModalTitle {\n  position: relative !important;\n}\n\n.summaryChildsWrapperInContractModal{\n  width: 100% !important;\n}\n\n.summaryChildsWrapperInContractModal > div > div > div > div > div > div > div > div > div > div > div > div > div {\n  display: flex !important;\n  justify-content: space-between !important;\n}\n\n.summaryChildInContractModal {\n  position: initial !important;\n}\n\n\n\n.editTaskAddBtn {\n  left: unset !important;\n  right: 9px !important;\n}\n\n.managerTableInModal {\n  width: 100% !important;\n  left: 0px !important;\n    top: 0px !important;\n}\n\n.managerTableInModal > div > div > div > div > .tableWrap {\n    width: 100% !important;\n}\n\n.managerTableInModal > div > div > div > div > .tableWrap > div {\n    width: 100% !important;\n}\n\n.managerTableInModal > div> div> div> div> div> div {\n    width: 100% !important; \n}\n\ndiv#tablefi106314hv > div > div > div > div > div {\n  align-items: center !important; \n}\n\n.managerTableInModal > div> div> div> div> div > div> div> div> {\n  align-items: center !important;\n}\n\n.managerTableInModal >div>div>div>div >div>div>div>div{\n  width: 100%!important;\n  overflow: hidden !important; \n  margin: 0 !important;\n}\n.eCoODg{\n  width: 100%!important;\n}\n.managerTableWrapperInModal {\n  width: 100% !important; \n  position: initial !important;\n  \n\n}\n\n.newProjectModalInTabWrapper {\n  width: 100% !important;\n}\n\n.setWidthHundredPercent {\n  width: 100% !important;\n}\n.setWidthHundredPercentUsers {\n  width:96.9% !important;\n}\n.setWidthHundredPercentNestedDivs > div > div > div > div > div > div > div > div > div > div > div > div > div {\n  width: 100% !important;\n}\n\n.setWidthNinetyNinePercent {\n  width: 99% !important;\n}\n\n.setWidthNinetyFivePercent {\n  width: 95% !important;\n}\n\n\n.setWidthNinetyFivePercentNestedDivs > div > div > div > div > div > div > div > div > div > div > div > div > div {\n  width: 95% !important;\n}\n\n.setWidthNinetyEightPercent {\n  width: 98% !important;\n}\n\n.setWidthNinetyEightPercentSecondVersion {\n  width: 98.9% !important;\n \n}\n.setWidthNinetyEightPercentSecondVersion .bp3-button {\n  \n  background-color: transparent!important;\n}\n.setWidthHundredPercentUsers .bp3-button {\n  border-radius: 0px!important;\n  background-color: transparent!important;\n}\n.setBtnRight {\n  left: unset !important;\n  right: 0 !important;\n}\n\n.setBtnLeft {  \n  left: 0 !important;\n}\n\n.setBtnAlmostRight {\n  left: unset !important;\n  right: 10px !important;\n}\n\n.setBtnAlmostLeft {  \n  left: 10px !important;\n}\n\n.setLeftSix {  \n  left: 6px !important;\n}\n.setLeftNane{  \n  left: 9px !important;\n}\n\n.setLeftMarginMinus {  \n  margin-left: -20px !important;\n}\n.setLeftMarginMinusTwo {  \n  margin-left: -14px !important;\n}\n.newProjectModalTabs {\n  cursor: pointer !important\n}\n\n.newProjectModalTabs div{\n  cursor: pointer !important\n}\n\n.saveTaskChangesBtn {\n  left: unset !important;\n  right: 172px !important;\n}\n\n.project_tabs_HideScroll > div > div > div > div {\n  overflow: hidden  !important;   \n\n}\n\n.modalListItemWrapper > div > div> div> div> div> div> div> div> div> div> div> div> div {\n  display: flex !important;\n  align-items: center !important;\n  justify-content: space-between !important;\n}\n\n.modalListItemWrapper > div > div> div> div> div> div> div> div> div> div> div> div> div {\n  display: flex !important;\n  align-items: center !important;\n  justify-content: space-between !important;\n}\n\n.modalListItemWrapperSetGap > div > div> div> div> div> div> div> div> div> div> div> div> div {\n  gap: 10px !important;\n }\n\n\n.modalListItemWrapperAlignEvenly > div > div> div> div> div> div> div> div> div> div> div> div> div {\n  display: flex !important;\n  align-items: center !important;\n  justify-content: space-evenly !important;\n}\n\n.modalListItem {\n  position: static !important;\n}\n\n.setFlexGrow {\n  flex-grow: 1 !important;\n}\n\n.modalListFirstItem {\n  order: 1 !important;\n}\n\n.modalListSecondItem {\n  order: 2 !important;\n  /* width: 238px!important; */\n}\n.modalListThirdItem {\n  order: 3 !important;\n  /* margin-left: 0px!important; */\n}\n.modalListFourthItem {\n  order: 4 !important;\n}\n.modalListFifthItem {\n  order: 5 !important;\n}\n\n.modalListSixItem {\n  order: 6 !important;\n}\n.text_manager{\n  width: 99%!important;\n}\n\n.setDisplayFlexColumn > div > div > div > div > div > div > div > div > div > div > div > div > div{\n  display: flex !important;\n  flex-direction: column !important;\n  align-items: center !important;\n}\n\n\ndiv[id=\"wk9dn7snq0\"]{\ntop:260px !important;\nleft: 0px !important;\n}\ndiv[id=\"6ab8rriixd\"]{\n  top:495px !important;\nleft: 0px !important;\n}\ndiv[id=\"50gg59nmwp\"]{\n    top:495px !important;\nleft: 0px !important;\n}\n\n.main_tableTwo  {\n width: 96.9%!important;\n}\n\n.main_tableTwo>div>div>div>div>div:nth-child(1){\nwidth: 100%!important;\n}\n.main_tableTwo>div>div>div>div>div:nth-child(2){\nwidth: 100%!important;\n}\n.main_tableTwo>div>div>div>div>div>div{\n  width: 100%!important;\n}\n.main_table input.bp3-input{\n\n  height: 20px!important;\n}\n\n\n.editTaskSelectFile {\n  left: unset !important;\n  right: -2px !important;\n}\n\n.setLeftFive {\n  left: 5px !important;\n}\n\n.editTaskModal_FilesListWrapper {\n  left: -5px !important;\n  width: calc(100% + 5px) !important;\n}\n\n.editTaskModal_SummaryWrapper {\n  left: -10px !important;\n  width: calc(100% + 10px) !important;\n}\n\ndiv.t--widget-containerwidget div.editTaskModal_FilesListWrapper {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\ndiv.project_tabs div.editTaskModal_SummaryWrapper {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\ndiv.editTaskModal_ContractListItemWrapper {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\ndiv.editTaskModal_ContractListItemWrapper > div > div > div > div > div > div > div > div > div > div > div > div > div {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\n.editTaskModal_SummaryTitle {\n    left: -2px !important;\n\n}\n\n.editTaskModal_secondListItemWidth {\n  width: 238px !important;\n}\n\n.editTaskModal_thirdListItemWidth {\n  margin-left: 0 !important;\n}\n\n.editTaskModal_SelectCustomerWrapper {\n left: 0px !important;\n width: 100.4% !important;\n}\n.editTaskModal_SelectClientWrapper {\n  left: 0px !important;\n width: 100.4% !important;\n}\n\n.editTaskModal_ContractListItemWrapper {\n  left: 0 !important;\n  width: calc(100% + 6px) !important;\n}\n\n.editTaskModal_ContractList {\n  width: 100% !important;\n  left: 2px !important;\n}\n\n.editUserModal_userName {\n  padding-left: 12px !important;\n}\n\n.editUserModal_userNameWrapper {\n  width: calc(100% - 3px) !important;\n}\n\n.createNewProjectBtn {\n  left: unset !important;\n  right: 16px !important;\n}\n\n.setLeftTwo {\n  left: 2px !important;\n}\n\n.editTaskModal_filesTableHeader {\n  left: -3px !important;\n}\n\n.editTaskModal_filesList{\n  left: -3px !important;\n  width: calc(100% + 6px) !important;\n}\n\n.editTaskModal_SummaryMainWrapper {\n  left: 2px !important;\n}\n\n.editTaskModal_proccessLength {\n  left: 3px !important;\n  width: 96% !important;\n}\n\n.editTaskModal_performerWrapper {\n  padding-left: 0 !important;\n}\n\n.editTaskModal_selectPerformer {\n left: 0px !important;\n }\n\n .editTaskModal_groupInput {\n left: 3px !important;\n }\n\n.editTaskModal_chooseDependenciesWrapper {\n  left: -5px !important;\n  width: 100% !important;\n}\n\n.editTaskModal_contractListContractName > div > div > div > div > div > div > div {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.addContractToManyTasksModal_contactListItemWrapper {\n  left: 0px !important;\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n.widthInput{\n  width: 230px!important;\n}\n.bp3-control {\n  font-size: 12px!important;\n}\n\n.widgetCheck{\n \n    border-radius: 4px !important;\n    background-color: #F3EDE4 !important;\n}\n.widgetCheck > div > div > div > div span {\n  background-color:transparent !important;\n}\n\n\n.addContractToManyTasksModal_contactList {\n  left: 4px !important;\n}\n\n.addContractToManyTasksModal_title {\n  left: 4px !important;\n}\n\n.addContractToManyTasksModal_goBackBtn {\n  left: 8px !important;\n}\n\n.addContractToManyTasksModal_tasksListHeaderFirstItem {\n  padding-left: 7px !important;\n}\n\n.addContractToManyTasksModal_tasksListItemWrapper {\n  left: 0px !important;\n}\n\n.addContractToManyTasksModal_tasksList {\n  width: 98% !important;\n  left: 4px !important;\n}\n\n.newContractModal_saveBtn {\n  left: unset !important;\n  right: 2px !important;\n}\n\n.newContractModal_counterpartySumWrapper {\n  left: 5px !important;\n}\n\n.newContractModal_tabTitle {\n  left: 2px !important;\n}\n\n.newContractModal_filesTableHeader {\n  left: -3px !important;\n}\n\n\n.newContractModal_FilesListWrapper {\n  left: -5px !important;\n  width: calc(100% + 4px) !important\n}\n\n.newContractModal_FilesList {\n  width: calc(100% + 12px) !important;\n    left: -8px !important;\n}\n\ndiv.t--widget-containerwidget div.newContractModal_FilesListWrapper {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\n.editContractModal_ArchiveBtn {\n  right: 2px !important;\n}\n\n.editContractModal_tabTitle {\n  left: -4px !important;\n}\n\n.editContractModal_filesTableHeader {\n  left: -8px !important;\n}\n\n.editContractModal_filesList {\n  left: -8px !important;\n  width: calc(100% + 10px) !important;\n}\n\ndiv.editContractModal_filesList div.modalListItemWrapper  {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\n.editContractModal_FilesListItemWrapper {\n  left: 0px !important;\n  /* width: calc(100% + 4px) !important */\n}\n\n.editContractModal_relatedContractsWrapper {\n  margin-left: -10px;\n  width: calc(100% + 15px) !important;\n}\n\n\n\ndiv.t--widget-containerwidget div.editContractModal_FilesListItemWrapper {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\n.editContractModal_costsMainWrapper {\n  left: -3px !important;\n}\n\n.editContractModal_costsTitle {\n  left: -5px !important;\n}\n\n.editContractModal_addRelatedTaskWrapper {\n  margin-left: -1px !important;\n  width: 100.6% !important;\n}\n\n.editContractModal_addRelatedTaskTitle {\n    left: -4px !important;\n\n}\n\n.editContractModal_selectRelatedTaskWrapper {\n  margin-left: -8px !important;\n  width: calc(100% + 10px) !important;\n  padding-right: 0 !important;\n}\n\n.editContractModal_relatedTaskList {\n  left: 0 !important;\n}\n\n.editContractModal_relatedTaskListItem {\n  width: 100% !important;\n}\n\ndiv.editContractModal_relatedTaskList div.editContractModal_relatedTaskListItem {\n  background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\n\n.editContractModal_summaryWrapper {\n  width: 100% !important;\n \n}\n\n.editContractModal_relatedTasksMainWrapper {\n  width: calc(100% + 28px) !important;\n   margin-left: -18px !important;\n}\n\n.editContractModal_relatedContractsTitleWrapper { \n   margin-left: -12px !important;\n}\n\n.editContractModal_chooseRelatedContractWrapper { \n   margin-left: -10px !important;\n  width: calc(100% + 15px) !important;\n}\n\n.editContractModal_relatedContractsHeaderWrapper { \n   left: 0 !important;\n}\n\n.editContractModal_relatedContractsList { \n  left: -3px !important;\n  width: calc(100% + 10px) !important;\n}\n\n.editContractModal_relatedContractsListItem { \n  left: -4px !important;\n  width: calc(100% + 4px) !important;\n}\n\ndiv.editContractModal_relatedContractsList div.editContractModal_relatedContractsListItem {\n   background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\n\ndiv.project_tabs div.editContractModal_summaryWrapper {\n   background-color: var(--white-color) !important;\n  border-radius: 4px !important;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.10) !important;\n}\nspan.bp3-popover-target >div{\n height: 36px!important;\n}\n.selectClientName{\n  left: -4px !important;\n}\n .hideActionBtnsInNestedTable div.ant-table-wrapper + div {\n  display: none !important;\n} \n\n\n\n.structureGantBtnGroup {\n  /* border: 1px solid #8E8E8E !important; */\n  left: 6px;\n}\n\ndiv.structureGantBtnGroup div.t--buttongroup-widget button:first-child {\n  border: 0.5px solid #787675 !important;\n  border-radius: 4px 0px 0px 4px !important;\n}\n\ndiv.structureGantBtnGroup div.t--buttongroup-widget button:last-child {\n  border: 0.5px solid #787675 !important;\n  border-radius: 0px 4px 4px 0px !important;\n}\n\n.gantDataFormatBtnGroup {\n  left: 325px;\n}\n\ndiv.gantDataFormatBtnGroup div.t--buttongroup-widget button:first-child {\n  border: 0.5px solid #787675 !important;\n  border-radius: 4px 0px 0px 4px !important;\n}\n\ndiv.gantDataFormatBtnGroup div.t--buttongroup-widget button:nth-child(2) {\n  border: 0.5px solid #787675 !important; \n  border-radius: 0 !important;\n}\n\ndiv.gantDataFormatBtnGroup div.t--buttongroup-widget button:last-child {\n  border: 0.5px solid #787675 !important;\n  border-radius: 0px 4px 4px 0px !important;\n}\n\n.structureTable {\n  left: -3px !important;\n}\n\ndiv.project_tabs div.structureTable {\n  left: -3px !important;\n}\n\n.gantTable {\n  left: -3px !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div:first-child {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > svg {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > svg > g{\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > svg > g > rect{\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > div {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > div > svg {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > div > svg > g.grid {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > div > svg > g.grid > g.gridBody {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > div > svg > g.grid > g.gridBody > g.rows {\n  width: 100% !important;\n}\n\ndiv.gantTable > div > div > div > div > div > div > div > svg > g.grid > g.gridBody > g.rows rect {\n  width: 100% !important;\n}\n\n.teamPage_title {\n  left: 13px !important;\n}",
        "output": "str",
        "x": 280,
        "y": 80,
        "wires": [
            [
                "781e82cf462af243"
            ]
        ]
    },
    {
        "id": "04ab9e97bf9e23e7",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "func": "msg.collection = \"admin_roles\";\n\nmsg.payload={\n    name:msg.payload.name,\n    deleted:false,\n    permissions: [],\n    createdAt: new Date((new Date().toISOString()))\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 1120,
        "wires": [
            [
                "561598685195f480",
                "9710436b969b38d7"
            ]
        ]
    },
    {
        "id": "84a24b2bf96c7d10",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "createRole",
        "url": "/createRole",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1120,
        "wires": [
            [
                "04ab9e97bf9e23e7"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "561598685195f480",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 1140,
        "wires": []
    },
    {
        "id": "c5be1687df4038a9",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "getRoles",
        "url": "/getRoles",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 900,
        "wires": [
            [
                "68b716a28a9c06f9"
            ]
        ]
    },
    {
        "id": "fe134326442270d0",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 630,
        "y": 900,
        "wires": []
    },
    {
        "id": "a5211f330054a0f9",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "addModuleToRole",
        "url": "/addModuleToRole",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 1260,
        "wires": [
            [
                "d9487f0690457157"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "b0766e91bd6c6a00",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 1280,
        "wires": []
    },
    {
        "id": "d9487f0690457157",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "func": "msg.collection = \"admin_roles\";\n\nlet crud = {\n    \"canCreate\": false,\n    \"canRead\": false,\n    \"canEdit\": false,\n    \"canRemove\": false\n}\n\nmsg.payload.options.map(e => {\n    if (e == \"C\") {\n        crud.canCreate = true\n    }\n    else if (e == \"R\") {\n        crud.canRead = true\n    }\n    else if (e == \"U\") {\n        crud.canEdit = true\n    } else if (e == \"D\") {\n        crud.canRemove = true\n    }\n})\n\n\nlet modules = msg.payload.moduleName.map((name, index)=> {\n    return {\n        \"name\": name,\n        \"value\": msg.payload.moduleValue[index]\n    }\n\n})\n\nlet preparedModules\n = modules.map(item => {\n    return{\n        module: item.name,\n        moduleId: objectid(item.value),\n        ...crud\n    }\n})\n\nmsg.query={\n    \"_id\":objectid(msg.payload._id)\n}\n\nmsg.payload={\n    $push: {\n        permissions: {\n            $each: [...preparedModules]\n        }\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 360,
        "y": 1260,
        "wires": [
            [
                "b0766e91bd6c6a00",
                "67d53a0197042a25"
            ]
        ]
    },
    {
        "id": "9710436b969b38d7",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 470,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "68b716a28a9c06f9",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "func": "msg.collection=\"admin_roles\"\nmsg.payload={\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 900,
        "wires": [
            [
                "31c23a05e29832de"
            ]
        ]
    },
    {
        "id": "31c23a05e29832de",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 470,
        "y": 900,
        "wires": [
            [
                "fe134326442270d0"
            ]
        ]
    },
    {
        "id": "67d53a0197042a25",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "e7c108f3663fd09c",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "func": "msg.collection =\"admin_roles\"\n\nmsg.query={\n    _id: objectid(msg.payload._id)\n    // _id: objectid(\"65323c06119eed001144292d\")\n\n}\n\nmsg.payload={\n    $set:{\n        // name: \"Адміністратор\"\n        name: msg.payload.name\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 320,
        "y": 1380,
        "wires": [
            [
                "69547a71e13702ba",
                "c2a121b11062dbc8"
            ]
        ]
    },
    {
        "id": "22579b498a3c1141",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "updateRole",
        "url": "/updateRole",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1380,
        "wires": [
            [
                "e7c108f3663fd09c"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "69547a71e13702ba",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "10",
        "x": 520,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "c2a121b11062dbc8",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 470,
        "y": 1400,
        "wires": []
    },
    {
        "id": "99069fd281c3aa62",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "deleteModuleFromRole",
        "url": "/deleteModuleFromRole",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 1640,
        "wires": [
            [
                "1abe7468edf9c502"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "1abe7468edf9c502",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "func": "msg.collection = \"admin_roles\";\n\nmsg.query = {\n   \"_id\": objectid(msg.payload._id)\n};\n\nconst deleteModulesId = msg.payload.moduleId.map(i => objectid(i));\n\nmsg.payload = {\n    $pull: {\n        permissions: {\n            moduleId: {\n                $in: deleteModulesId\n            }\n        }\n    }\n}\n\n// msg.payload = {\n//     $pull: {\n//         \"permissions\": {\n//             \"moduleId\": objectid(msg.payload.moduleId)\n//         }\n//     }\n// }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 380,
        "y": 1640,
        "wires": [
            [
                "3baac374b1dd3f4d",
                "731ac723f96cc33b"
            ]
        ]
    },
    {
        "id": "3baac374b1dd3f4d",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 580,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "ee3708d6d2779c2c",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "deleteRole",
        "url": "/deleteRole",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1500,
        "wires": [
            [
                "3594cb050006f93b"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "3594cb050006f93b",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "func": "msg.collection =\"admin_roles\"\n\nmsg.query={\n    _id: objectid(msg.payload._id)\n}\n\nmsg.payload={\n    $set:{\n        deleted: true\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 300,
        "y": 1500,
        "wires": [
            [
                "d223f3d36f46a91d",
                "612e0a2b392767a6"
            ]
        ]
    },
    {
        "id": "612e0a2b392767a6",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 1520,
        "wires": []
    },
    {
        "id": "d223f3d36f46a91d",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 500,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "731ac723f96cc33b",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 1640,
        "wires": []
    },
    {
        "id": "110f980283b587bc",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "get roles",
        "func": "msg.collection = \"admin_roles\"\nlet match = {};\nif (msg.payload.name != \",\" && msg.payload.name) {\n    match = {\n        name: { $regex: msg.payload.name, $options: \"i\" }\n    }\n}\n\nmsg.payload = {\n    deleted: false, \n    ...match\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1020,
        "wires": [
            [
                "b26cafe18475e3cb"
            ]
        ]
    },
    {
        "id": "b26cafe18475e3cb",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 490,
        "y": 1020,
        "wires": [
            [
                "c1c36f3949756248"
            ]
        ]
    },
    {
        "id": "c1c36f3949756248",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 650,
        "y": 1020,
        "wires": []
    },
    {
        "id": "306adf550fae80e8",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "81031a41452292e5",
        "name": "getAllRoles",
        "url": "/getAllRoles",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1020,
        "wires": [
            [
                "110f980283b587bc"
            ]
        ],
        "info": "Use in: User Management"
    },
    {
        "id": "081c8c3d3092e3d2",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "createParentModule",
        "url": "/createParentModule",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 930,
        "y": 1020,
        "wires": [
            [
                "8e90850289063c0f"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "8c9188bca9c91600",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1310,
        "y": 980,
        "wires": []
    },
    {
        "id": "8e90850289063c0f",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "func": "msg.collection = \"admin_modules\"\n\nmsg.payload = {\n    ...msg.payload,\n    deleted: false,\n    isParent: false\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 1020,
        "wires": [
            [
                "5cbf5ba2c4c74a4f",
                "8c9188bca9c91600"
            ]
        ]
    },
    {
        "id": "ca87b60d60b99eb0",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "getModules",
        "url": "/getModules",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 910,
        "y": 900,
        "wires": [
            [
                "c3b02c1f4edbee09"
            ]
        ]
    },
    {
        "id": "48a302c4afb1b770",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1430,
        "y": 900,
        "wires": []
    },
    {
        "id": "c3b02c1f4edbee09",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "func": "msg.collection=\"admin_modules\"\nmsg.payload={\n    deleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 900,
        "wires": [
            [
                "33228ac20bb88129"
            ]
        ]
    },
    {
        "id": "2b147567f51c6f9d",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "createChildModule",
        "url": "/createChildModule",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 930,
        "y": 1420,
        "wires": [
            [
                "94ae2989955beeda"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "8155b8084ded1330",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1310,
        "y": 1420,
        "wires": []
    },
    {
        "id": "94ae2989955beeda",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "query",
        "func": "msg.collection = \"admin_modules\";\n\nif (msg.payload.parentModule) {\n    msg.query={\n        \"_id\": objectid(msg.payload.parentModule)\n    };\n\n    msg.payload = {\n        $addToSet: {\n            childModules: {\n                name: msg.payload.childModule,\n                page_id: msg.payload.childModule,\n                position: msg.payload.position\n            }\n        },\n        $set: {\n            isParent: true\n        }\n    }\n\n    return [msg,];\n} else {\n    \n    \n    msg.payload={\n        ...msg.payload,\n        deleted: false,\n        isParent: false\n    }\n    return [,msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1150,
        "y": 1420,
        "wires": [
            [
                "cdf04d878afee1d5",
                "8155b8084ded1330"
            ],
            [
                "8886a378d607c9c3",
                "8155b8084ded1330"
            ]
        ]
    },
    {
        "id": "b017876ae60e280c",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "deleteChildModule",
        "url": "/deleteChildModule",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 930,
        "y": 1700,
        "wires": [
            [
                "98b2c82db768e5e1"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "98b2c82db768e5e1",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "query",
        "func": "msg.collection=\"admin_modules\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $pull: {\n        \"childModules\": {\n            \"name\": msg.payload.childModule_id\n        }\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1150,
        "y": 1700,
        "wires": [
            [
                "8a003992c216e032",
                "edf06a17bf884f9f"
            ]
        ]
    },
    {
        "id": "edf06a17bf884f9f",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1310,
        "y": 1660,
        "wires": []
    },
    {
        "id": "33228ac20bb88129",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1270,
        "y": 900,
        "wires": [
            [
                "48a302c4afb1b770"
            ]
        ]
    },
    {
        "id": "8a003992c216e032",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1340,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "8886a378d607c9c3",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1330,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "cdf04d878afee1d5",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1340,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "5cbf5ba2c4c74a4f",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1330,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "b473ee4234249f14",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1360,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "620b6e5d1c9e4858",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "updateChildModule",
        "url": "/updateChildModule",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 930,
        "y": 1580,
        "wires": [
            [
                "d868f70232c05f3c"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "d868f70232c05f3c",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "query",
        "func": "msg.collection = \"admin_modules\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id),\n    \"childModules.name\": msg.payload.name\n};\n\nmsg.payload = {\n    $set: {\n        \"childModules.$.position\": msg.payload.position\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1150,
        "y": 1580,
        "wires": [
            [
                "b473ee4234249f14",
                "382da0ed3f1de901"
            ]
        ]
    },
    {
        "id": "382da0ed3f1de901",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1330,
        "y": 1540,
        "wires": []
    },
    {
        "id": "411b69c681820b0e",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "\"deleted\": true",
        "func": "msg.collection = \"admin_modules\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1160,
        "y": 1260,
        "wires": [
            [
                "81bdba71023d5429"
            ]
        ]
    },
    {
        "id": "500861a5b5623bc5",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "url": "/deleteModule",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 940,
        "y": 1280,
        "wires": [
            [
                "411b69c681820b0e",
                "3000e64189b3ff39",
                "6d5c9e567735125f"
            ]
        ]
    },
    {
        "id": "81bdba71023d5429",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1360,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "3000e64189b3ff39",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "delete using pull",
        "func": "msg.collection = \"admin_roles\"\n\nmsg.query = {\n    \"permissions.moduleId\": objectid(msg.payload._id)\n}\n\nmsg.payload =\n    { $pull: { \"permissions\": { \"moduleId\": objectid(msg.payload._id) } } }\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1160,
        "y": 1300,
        "wires": [
            [
                "0d8e4b5e24ee7f2c"
            ]
        ]
    },
    {
        "id": "6d5c9e567735125f",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1530,
        "y": 1280,
        "wires": []
    },
    {
        "id": "0d8e4b5e24ee7f2c",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1360,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "080f87898258c1e5",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "update roles",
        "func": "msg.collection = \"admin_roles\";\n\nmsg.query = {\n    \"permissions.moduleId\": objectid(msg.payload._id)\n    }\n\nmsg.payload = {\n    $set: {\n        \"permissions.$.module\": msg.payload.name\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1130,
        "y": 1100,
        "wires": [
            [
                "920e683749d9b015"
            ]
        ]
    },
    {
        "id": "3835bedd5b59284c",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "updateParentModule",
        "url": "/updateParentModule",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 930,
        "y": 1120,
        "wires": [
            [
                "ae293692fead8475",
                "080f87898258c1e5",
                "7001dd6d6d4622d6"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "920e683749d9b015",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1320,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "7001dd6d6d4622d6",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1510,
        "y": 1120,
        "wires": []
    },
    {
        "id": "ae293692fead8475",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "update parent",
        "func": "msg.collection = \"admin_modules\";\n\nmsg.query = {\n    _id: objectid(msg.payload._id)\n};\n\nmsg.payload = {\n    $set: {\n        icon: msg.payload.icon,\n        position: msg.payload.position,\n        name: msg.payload.name\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1140,
        "y": 1140,
        "wires": [
            [
                "732470b6749e6a6e"
            ]
        ]
    },
    {
        "id": "732470b6749e6a6e",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "a8bcf74ef7690d27",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1340,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "0cfa0691dcae508d",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "name": "menu grouping",
        "func": "msg.payload = msg.payload[0];\nmsg.permissions = msg.payload.permissions;\n\nfunction sortByPositionNumber(arr) {\n    return arr.sort((a, b) => +a.position - +b.position);\n}\n\nmsg.menu = sortByPositionNumber(msg.payload.menu).map(el => {\n\n    if (el.isParent) {\n        return {\n            \"label\": el.name,\n            \"value\": el.name,\n            \"icon\": el.icon ? el.icon : \"\",\n            \"children\": el.childModules.length \n                ? sortByPositionNumber(el.childModules)\n                  .map(item => ({\n                      \"label\": item.name,\n                      \"value\": item.name,\n                      \"icon\": item.icon ? item.icon : \"\"\n                  })) \n                : []\n        }\n    } else {\n        return {\n            \"label\": el.name,\n            \"value\": el.name,\n            \"children\": [],\n            \"icon\": el.icon ? el.icon : \"\",\n        }\n    }\n    \n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1480,
        "y": 600,
        "wires": [
            [
                "14cc1d46a9f6856f"
            ]
        ]
    },
    {
        "id": "14cc1d46a9f6856f",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "name": "check user permissions",
        "func": "const pageName = msg.check.page_id.replace('%20', ' ');\n\nconst parentPage = msg.menu.map((el) => el.label).includes(pageName);\nconst childPage = msg.menu.filter((e) => e.children.length > 0).flatMap((el) => el.children).map((elem) => elem.label).includes(pageName);\n\nif (parentPage || childPage || \"Structure\" ||'LogInGoogle') {\n\n    msg.statusCode = 200;\n    msg.payload = {\n        auth: \"Success\",\n        code: 200,\n        user: {\n            \"menu\": msg.menu,\n            \"permission\": msg.permissions,\n            \"translation\": msg.payload.translation[0],\n            \"info\": msg.user\n        }\n    }\n\n} else {\n\n    msg.payload = {\n        auth: \"Unautorizate\",\n        code: 401,\n        login_id: msg.menu[0].value + `?pageName=${msg.menu[0].value}`,\n        app_id: msg.check.app_id\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1710,
        "y": 600,
        "wires": [
            [
                "a602a24988dcc60f"
            ]
        ]
    },
    {
        "id": "2ae46a4303e606aa",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "delete user query",
        "func": "msg.collection = \"admins\"\n\nmsg.query = {\n    // \"_id\": objectid(msg.payload._id)\n    \"_id\": objectid(\"6555307f89764c100000000b\")\n};\n\nmsg.payload = {\n    $set: { \"deleted\": true }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 1920,
        "wires": [
            [
                "0a2fd87870718fdd",
                "ddef97bd0e2b5923"
            ]
        ]
    },
    {
        "id": "5237b46d44a1b3a4",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "editUserRole",
        "url": "/editUserRole",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1840,
        "wires": [
            [
                "1825fb3d6b513900"
            ]
        ],
        "icon": "font-awesome/fa-edit"
    },
    {
        "id": "1825fb3d6b513900",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "edit role query",
        "func": "msg.collection = \"admins\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n}\n\nmsg.payload = {\n    $set: {\n        \"roles\": [objectid(msg.payload.role)]\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 380,
        "y": 1840,
        "wires": [
            [
                "ab2b5e34abca1e9b",
                "e23355de69d75283"
            ]
        ]
    },
    {
        "id": "e23355de69d75283",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "ab2b5e34abca1e9b",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 550,
        "y": 1840,
        "wires": []
    },
    {
        "id": "5a78c40d046ce8f6",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "deleteUser",
        "url": "/deleteUser",
        "method": "delete",
        "upload": true,
        "swaggerDoc": "",
        "x": 140,
        "y": 1920,
        "wires": [
            [
                "2ae46a4303e606aa"
            ]
        ],
        "icon": "font-awesome/fa-remove"
    },
    {
        "id": "ddef97bd0e2b5923",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 570,
        "y": 1920,
        "wires": []
    },
    {
        "id": "0a2fd87870718fdd",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 1880,
        "wires": [
            []
        ]
    },
    {
        "id": "30f5e7a6a546c113",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "createUser",
        "url": "/createUser",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 2000,
        "wires": [
            [
                "57e581e2ecb4249c"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "57e581e2ecb4249c",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "query",
        "func": "msg.collection = \"admins\";\nmsg.oldpayload = msg.payload;\n\nmsg.payload = {\n    email: msg.payload.email,\n    deleted: false\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 2000,
        "wires": [
            [
                "3941ed959f6a49e2"
            ]
        ]
    },
    {
        "id": "3941ed959f6a49e2",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 2000,
        "wires": [
            [
                "224f13cf53c48cde"
            ]
        ]
    },
    {
        "id": "224f13cf53c48cde",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "check",
        "func": "if (msg.payload.length > 0) {\n    msg.payload = {\n        data: \"This email address already exists\",\n        code: 400,\n    }\n    return [null, msg]\n}\nelse{\n    return [msg, null]\n}\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 2000,
        "wires": [
            [
                "de68f6ef9390d5d0"
            ],
            [
                "e7f454c30483e885"
            ]
        ]
    },
    {
        "id": "e7f454c30483e885",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "statusCode": "400",
        "headers": {},
        "x": 860,
        "y": 2040,
        "wires": []
    },
    {
        "id": "de68f6ef9390d5d0",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "registration user",
        "func": "let randomColor = \"#\" + Math.floor(Math.random() * 16777215).toString(16);\n\n\nmsg.payload = {\n    \"_id\": objectid(),\n    \"deleted\": false,\n    \"avatarColor\": randomColor,\n    \"createdAt\": new Date(),\n    \"updatedAt\": new Date(),\n    \"roles\": [objectid(msg.oldpayload.role)],\n    \"active\": true,\n    \"firstname\": msg.oldpayload.firstname,\n    \"lastname\": msg.oldpayload.lastname,\n    \"email\": msg.oldpayload.email,\n    verifyToken: null,\n    resetPassToken: \"\",\n    resetPassExpireToken: null,\n    \"phone\": msg.oldpayload.phone,\n    \"status\": msg.oldpayload.status,\n    \"company\": msg.oldpayload.company,\n}\n\nreturn msg;\n\n\n\n\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            },
            {
                "var": "bcrypt",
                "module": "bcrypt"
            },
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 880,
        "y": 1980,
        "wires": [
            [
                "23e04e8b3f4f3a6b",
                "784130e27331077d"
            ]
        ]
    },
    {
        "id": "23e04e8b3f4f3a6b",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1120,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "784130e27331077d",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "dd0a2b2a3a923ff7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1090,
        "y": 1980,
        "wires": []
    },
    {
        "id": "37e8938d6e6be501",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "url": "/loginG",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 120,
        "y": 320,
        "wires": [
            [
                "96ddd1fd107d0fb1"
            ]
        ]
    },
    {
        "id": "1e91697ac2db3998",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "func": "const { google } = googleapis;\n// const clientId = '595459114748-mubn4uvc9sc7mnbprnhpoe7auqsqiq2c';\n// const clientSecret = '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';\n// const redirectUri = 'https://authui-8247-650e926d920d771100000117.ubos.tech/Home';\n\nconst clientId = '667292788413-no7j1clmq48fv7d4i7hbqtfbetdvk0d7';\nconst clientSecret = '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';\nconst redirectUri = 'https://authui-8247-650e926d920d771100000117.ubos.tech/LogInGoogle';\nconst oauth2Client = new google.auth.OAuth2(clientId, clientSecret, redirectUri);\nlet code = msg.req.query.code;\n\noauth2Client.getToken(code, (err, tokens) => {\n    if (err) {\n        msg.payload = { error: err };\n        node.send(msg);\n    } else {\n        oauth2Client.setCredentials(tokens);\n        const peopleApi = google.people({ version: 'v1', auth: oauth2Client });\n        peopleApi.people.get({\n            resourceName: 'people/me',\n            personFields: 'emailAddresses,names,photos',\n        }, (err, res) => {\n            if (err) {\n               \n                msg.payload = { error: 'Failed to get user information' };\n            } else {\n                msg.payload = res.data;\n            }\n            node.send(msg);\n        });\n    }\n});",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "googleapis",
                "module": "googleapis"
            }
        ],
        "x": 390,
        "y": 320,
        "wires": [
            [
                "789c8b4acff2f6b7"
            ]
        ]
    },
    {
        "id": "789c8b4acff2f6b7",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "check ",
        "func": "\nconst email = msg.payload.emailAddresses[0].value;\nmsg.userGooglePhoto = msg.payload.photos[0].url\n\n    msg.collection = \"admins\";\n    msg.oldpayload = msg.payload;\n\n    msg.payload = {\n        email: email,\n        deleted: false\n    };\n\nreturn msg\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 320,
        "wires": [
            [
                "f44a8595ea0bcb12"
            ]
        ]
    },
    {
        "id": "f44a8595ea0bcb12",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 680,
        "y": 320,
        "wires": [
            [
                "e658de794a3c71fb"
            ]
        ]
    },
    {
        "id": "e658de794a3c71fb",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "check",
        "func": "if(msg.payload.length>0){\n    \n    return [msg,null]\n}else{\n    return [null,msg]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            },
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 860,
        "y": 320,
        "wires": [
            [
                "8c1b30db3408fa4f"
            ],
            [
                "048839a0841bf326"
            ]
        ]
    },
    {
        "id": "ac5463129970ea57",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "signout",
        "url": "/signout",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 160,
        "wires": [
            [
                "32f2fb7d2d4e6a4f"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "18757ce4ce343bab",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 590,
        "y": 160,
        "wires": []
    },
    {
        "id": "32f2fb7d2d4e6a4f",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "check jwt",
        "func": "msg.cookies={\n    user_token: null\n}\n\nmsg.payload={\n    success: true\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 160,
        "wires": [
            [
                "ae7478b0efa0f670"
            ]
        ]
    },
    {
        "id": "ae7478b0efa0f670",
        "type": "delay",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 420,
        "y": 160,
        "wires": [
            [
                "18757ce4ce343bab"
            ]
        ]
    },
    {
        "id": "e30c726e83877e71",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1580,
        "y": 260,
        "wires": []
    },
    {
        "id": "7f716983a77c86a6",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "jwt token",
        "func": "node.warn(msg.payload[0]._id)\nconst token = jwt.sign(\n    { user_id: msg.payload[0]._id, email: msg.payload[0].email },\n    \"test\",\n    {\n        expiresIn: '24h',  \n    }\n);\n\nmsg.cookies = {};\nmsg.cookies[\"user_token\"] = token;\nmsg.payload = token;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 1410,
        "y": 260,
        "wires": [
            [
                "e30c726e83877e71"
            ]
        ]
    },
    {
        "id": "c77f1cb54c3e7637",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "URL",
        "func": "const { google } = googleapis;\n\n// const oauth2Client = new google.auth.OAuth2(\n//   `595459114748-mubn4uvc9sc7mnbprnhpoe7auqsqiq2c`,\n//   `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`,\n//   `https://authui-8247-650e926d920d771100000117.ubos.tech/Home`\n// )\nconst oauth2Client = new google.auth.OAuth2(\n  `667292788413-no7j1clmq48fv7d4i7hbqtfbetdvk0d7`,\n  `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`,\n  `https://authui-8247-650e926d920d771100000117.ubos.tech/LogInGoogle`\n)\n\n// Access scopes for read-only Drive activity.\nconst scopes = [\n  'https://www.googleapis.com/auth/drive.metadata.readonly',\n  'https://www.googleapis.com/auth/userinfo.email',\n  'https://www.googleapis.com/auth/userinfo.profile'\n];\n\n// Generate a url that asks permissions for the Drive activity scope\nconst authorizationUrl = oauth2Client.generateAuthUrl({\n  // 'online' (default) or 'offline' (gets refresh_token)\n  access_type: 'offline',\n  /** Pass in the scopes array defined above.\n    * Alternatively, if only one scope is needed, you can pass a scope URL as a string */\n  scope: scopes,\n  // Enable incremental authorization. Recommended as a best practice.\n  include_granted_scopes: true\n});\n\nmsg.payload = authorizationUrl;\n\nreturn msg;\n\n// https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.metadata.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&include_granted_scopes=true&response_type=code&client_id=595459114748-mubn4uvc9sc7mnbprnhpoe7auqsqiq2c&redirect_uri=https%3A%2F%2Fauthui-8247-650e926d920d771100000117.ubos.tech%2FHome",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "googleAuthLibrary",
                "module": "google-auth-library"
            },
            {
                "var": "googleapis",
                "module": "googleapis"
            }
        ],
        "x": 280,
        "y": 60,
        "wires": [
            [
                "7276ef91a4fcfbba"
            ]
        ]
    },
    {
        "id": "5be258b7b4f76c08",
        "type": "inject",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "c77f1cb54c3e7637"
            ]
        ]
    },
    {
        "id": "7276ef91a4fcfbba",
        "type": "debug",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "debug 467",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 60,
        "wires": []
    },
    {
        "id": "96ddd1fd107d0fb1",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "function 533",
        "func": "if (msg.req.query?.code && msg.req.query?.code !==\"null\"){\n    return [msg,null]\n}else{\n    return[null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 275,
        "y": 320,
        "wires": [
            [
                "1e91697ac2db3998"
            ],
            [
                "8e3d911803fb42c8"
            ]
        ],
        "l": false
    },
    {
        "id": "8e3d911803fb42c8",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 440,
        "y": 380,
        "wires": []
    },
    {
        "id": "048839a0841bf326",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "user not exists in platform",
        "func": "msg.payload = {\n    data: 'Користувач не існує в системі'\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 400,
        "wires": [
            [
                "b1a0dbb265b01eb0"
            ]
        ]
    },
    {
        "id": "b1a0dbb265b01eb0",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1200,
        "y": 400,
        "wires": []
    },
    {
        "id": "8c1b30db3408fa4f",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "check user active",
        "func": "msg.fromdb = msg.payload\n\nif (msg.payload[0].active) {\n    \n    return [msg, null];\n} else {\n    return [null, msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 300,
        "wires": [
            [
                "7f716983a77c86a6"
            ],
            [
                "3a8b64a602016860"
            ]
        ],
        "outputLabels": [
            "active",
            "not active user"
        ]
    },
    {
        "id": "3a8b64a602016860",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "update user data",
        "func": "msg.collection = \"admins\";\n\nmsg.query = {\n    \"_id\": objectid(msg.payload[0]._id)\n}\n\nmsg.payload = {\n    $set: {\n        \"active\": true,\n        \"firstname\": msg.oldpayload.names[0].familyName,\n        \"lastname\": msg.oldpayload.names[0].givenName,\n        \"finishAt\": global.get(\"convert_date\"),\n        \"googleAvatar\": msg.userGooglePhoto\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1400,
        "y": 320,
        "wires": [
            [
                "39af801020f87f81"
            ]
        ]
    },
    {
        "id": "39af801020f87f81",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1610,
        "y": 320,
        "wires": [
            [
                "22b08a1354cd7157"
            ]
        ]
    },
    {
        "id": "22b08a1354cd7157",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "jwt token",
        "func": "node.warn(msg.fromdb[0]._id)\nconst token = jwt.sign(\n    { user_id: msg.fromdb[0]._id, email: msg.fromdb[0].email },\n    \"test\",\n    {\n        expiresIn: '24h',  \n    }\n);\n\nmsg.cookies = {};\nmsg.cookies[\"user_token\"] = token;\nmsg.payload = token;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 1770,
        "y": 320,
        "wires": [
            [
                "3ec27d1aa2132072"
            ]
        ]
    },
    {
        "id": "3ec27d1aa2132072",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "f49c4844a8fd418b",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1920,
        "y": 320,
        "wires": []
    },
    {
        "id": "d390b9504c129252",
        "type": "http in",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "check_tokens",
        "url": "/check_tokens",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 620,
        "wires": [
            [
                "097b05d6f95dab62"
            ]
        ],
        "icon": "node-red/arrow-in.svg"
    },
    {
        "id": "b457f0b5c3fd5d96",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "statusCode": "401",
        "headers": {},
        "x": 1060,
        "y": 660,
        "wires": []
    },
    {
        "id": "097b05d6f95dab62",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "check jwt",
        "func": "msg.check = msg.payload;\nconst decoded = jwt.verify(msg.payload.token, 'test');\nnode.warn(decoded)\nmsg.payload = decoded\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 340,
        "y": 620,
        "wires": [
            [
                "73893182e2e2ed57"
            ]
        ]
    },
    {
        "id": "dd3e208dfbba0a56",
        "type": "catch",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "scope": [
            "097b05d6f95dab62"
        ],
        "uncaught": false,
        "x": 120,
        "y": 720,
        "wires": [
            [
                "265641df05c1ca83"
            ]
        ]
    },
    {
        "id": "265641df05c1ca83",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "func": "msg.payload = {\n    auth: \"Unautorizate\",\n    code: 401,\n    login_id: `Home?pageName=Home`,\n    app_id: msg.check.app_id\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 720,
        "wires": [
            [
                "de79ea462e97e016"
            ]
        ]
    },
    {
        "id": "de79ea462e97e016",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 720,
        "wires": []
    },
    {
        "id": "73893182e2e2ed57",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "check",
        "func": "msg.collection = \"admins\"\nmsg.fromApp = msg.payload\nmsg.payload = {\n    _id: objectid(msg.payload.user_id),\n    deleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 510,
        "y": 620,
        "wires": [
            [
                "1a6b5d862a0b4bfc"
            ]
        ]
    },
    {
        "id": "cfc7631182b5ef67",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "check auth",
        "func": "\nif(msg.payload.length > 0){\n    msg.payload = msg.payload[0]\n    msg.user = {\n        auth: \"Success\",\n        code:200,\n        user: msg.payload\n    }\n    return [msg,null]\n}else{\n    msg.payload = {\n        auth: \"Unautorizate\",\n        code: 401,\n        login_id:msg.check.login_id,\n        app_id:msg.check.app_id\n    }\n    return [null,msg]\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 620,
        "wires": [
            [
                "92a82d990292b9c2"
            ],
            [
                "b457f0b5c3fd5d96"
            ]
        ]
    },
    {
        "id": "a602a24988dcc60f",
        "type": "http response",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1890,
        "y": 580,
        "wires": []
    },
    {
        "id": "1a6b5d862a0b4bfc",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 700,
        "y": 620,
        "wires": [
            [
                "cfc7631182b5ef67"
            ]
        ]
    },
    {
        "id": "ca2dc46c7edc0fb2",
        "type": "link call",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1250,
        "y": 580,
        "wires": [
            [
                "0cfa0691dcae508d"
            ]
        ]
    },
    {
        "id": "92a82d990292b9c2",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "get roles",
        "func": "msg.collection = \"admin_roles\"\n\nmsg.payload = [\n    {\n        $match:{\n            \"_id\": ObjectId(msg.payload.role)\n        }\n    },\n    {\n        $lookup: {\n            from: 'translation',\n            as: 'translation',\n            pipeline: [\n                {\n                    $match: {\n                        deleted: false,\n                        language: msg.user.user.language\n                    }\n                }\n            ]\n        }\n    },\n    {\n        $lookup:\n        {\n            from: \"admin_modules\",\n            localField: \"permissions.moduleId\",\n            foreignField: \"_id\",\n            as: \"menu\"\n    }\n},\n]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "ObjectId",
                "module": "objectid"
            }
        ],
        "x": 1060,
        "y": 580,
        "wires": [
            [
                "ca2dc46c7edc0fb2"
            ]
        ]
    },
    {
        "id": "e653dc9c2aa956f2",
        "type": "catch",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "g",
        "scope": [
            "92a82d990292b9c2"
        ],
        "uncaught": false,
        "x": 1490,
        "y": 660,
        "wires": [
            [
                "0b6ff6d92b1de7e7"
            ]
        ]
    },
    {
        "id": "0b6ff6d92b1de7e7",
        "type": "function",
        "z": "c8b39bad946d8ab6",
        "g": "d78377c07a215120",
        "name": "show err Unautorizate",
        "func": "msg.payload ={\n    auth: \"Unautorizate\",\n    code: 401,\n    login_id: msg.check.login_id,\n    }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1680,
        "y": 660,
        "wires": [
            [
                "a602a24988dcc60f"
            ]
        ]
    },
    {
        "id": "65a2701306f207e9",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "url": "/addUser",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 120,
        "wires": [
            [
                "f9bb8b0e09d6fbe4"
            ]
        ]
    },
    {
        "id": "f9bb8b0e09d6fbe4",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "find user",
        "func": "// msg.oldpayload = JSON.parse(msg.payload);\nmsg.oldpayload =msg.payload\nmsg.collection = \"admins\";\n\nmsg.payload = {\n    email: msg.payload.email\n  \n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 120,
        "wires": [
            [
                "a5c87b50388ce826"
            ]
        ]
    },
    {
        "id": "a5c87b50388ce826",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 470,
        "y": 120,
        "wires": [
            [
                "2f51da3ab5e15577"
            ]
        ]
    },
    {
        "id": "2f51da3ab5e15577",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "check user",
        "func": "if (msg.payload.length > 0) {\n    return [msg, null]\n} else {\n    return [null, msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 120,
        "wires": [
            [
                "bfa5582e164e3230"
            ],
            [
                "b61e36cac84a8579"
            ]
        ],
        "outputLabels": [
            "user exists",
            "not user"
        ]
    },
    {
        "id": "b61e36cac84a8579",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "registration user",
        "func": "\nmsg.userId = objectid();\n\nmsg.payload = {\n    \"_id\": msg.userId,\n    \"deleted\": false,\n    \"createdAt\": global.get(\"convert_date\"),\n    \"role\": objectid(msg.oldpayload.role), // Admin\n    \"active\": false,\n    \"firstname\": \"\",\n    \"lastname\": \"\",\n    \"email\": msg.oldpayload.email,\n    \"phone\":\"\",\n    \"company\":\"\"\n}\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            },
            {
                "var": "bcrypt",
                "module": "bcrypt"
            },
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            }
        ],
        "x": 860,
        "y": 180,
        "wires": [
            [
                "218c981dccceb5fc",
                "f195bbb56d220aa0"
            ]
        ]
    },
    {
        "id": "f195bbb56d220aa0",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1050,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "2225f6bd64a90ebc",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "send email for app",
        "func": "const nodeUrl = env.get(\"uiUrl\");\nconst url = `https://authui-8247-650e926d920d771100000117.ubos.tech/Home`;\n\nconst colorHeading = `color: #1D1D1D;\nfont-family: \"Inter\";\nfont-size: 40px;\nfont-style: normal;\nfont-weight: 400;\nline-height: 48px; /* 120% */\nletter-spacing: -0.8px;`\n\nconst basicText = `color: #8E8E8E;\nfont-family: Inter;\nfont-size: 14px;\nfont-style: normal;\nfont-weight: 400;\nline-height: 24px; /* 171.429% */\nletter-spacing: -0.28px;`\n\nconst link = `\ndisplay: inline-flex;\npadding: 12px 10px;\njustify-content: center;\nalign-items: center;\nborder-radius: 5px;\nbackground: #1D1D1D;\ngap: 4px;\ncolor: #FFF;\nfont-family: Inter;\nfont-size: 14px;\nfont-style: normal;\nfont-weight: 400;\nline-height: 24px; /* 171.429% */\n`\n\nconst text = `\n<div style=\"padding: 10px 0; color: black;\">\n    <h1  style=\"${colorHeading}\">Доступ до Visia</h1>\n    <p style=\"${basicText}\">Ви отримали доступ до системи Visia. Перейдіть до системи для того щоб завершити реєстрацію і отримати доступ до призначених проектів</p>\n    <p style=\"${basicText}\"></p>\n    <a href=\"${url}\" style=\"${link}\">Завершити реєстрацію</a>\n    <p style=\"${basicText}\">У разі виникнення питань щодо роботи реєстрації та роботи з продутом пишіть на admin@visia.pro</p>\n</div>\n`;\n\nmsg.to = msg.oldpayload.email\nmsg.topic = 'Доступ до Visia';\nmsg.payload = text;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1890,
        "y": 200,
        "wires": [
            [
                "6f70f661f167dd24",
                "9e47a3a4bc029182",
                "3bc3b863ac50762a"
            ]
        ]
    },
    {
        "id": "bfa5582e164e3230",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "response",
        "func": "msg.payload = {\n    data: `Користувач з поштою \"${msg.oldpayload.email}\" вже існує на платформі!`\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 120,
        "wires": [
            [
                "69c0fd0810fa38f9"
            ]
        ]
    },
    {
        "id": "69c0fd0810fa38f9",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 1000,
        "y": 120,
        "wires": []
    },
    {
        "id": "ce50a0a3f0b75d1e",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "projectsQuery",
        "func": "msg.collection = 'projects';\n\nmsg.payload = {\n    _id: {\n        $in: msg.oldpayload.projects.map(i => objectid(i.project))\n    },\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1300,
        "y": 160,
        "wires": [
            [
                "882297fa3849ccf3"
            ]
        ]
    },
    {
        "id": "882297fa3849ccf3",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1470,
        "y": 160,
        "wires": [
            [
                "1d8d0a411d7b0752"
            ]
        ]
    },
    {
        "id": "218c981dccceb5fc",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "check project",
        "func": "\n\nif (msg.oldpayload?.projects) {\n    return [msg, null];\n} else {\n    return [null, msg]\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 180,
        "wires": [
            [
                "ce50a0a3f0b75d1e"
            ],
            [
                "2225f6bd64a90ebc"
            ]
        ],
        "outputLabels": [
            "projects exists",
            "without projects"
        ]
    },
    {
        "id": "1d8d0a411d7b0752",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "check project",
        "func": "if (msg.payload.length > 0) {\n    return [msg, null];\n} else {\n    return [null, msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 120,
        "wires": [
            [
                "689ddad7f0e4f927"
            ],
            [
                "2225f6bd64a90ebc"
            ]
        ],
        "outputLabels": [
            "projects exists",
            "without projects"
        ]
    },
    {
        "id": "9e47a3a4bc029182",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "role",
        "func": "msg.collection = \"admin_roles\"\nmsg.payload = {\n    _id: objectid(msg.oldpayload.role),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2590,
        "y": 200,
        "wires": [
            [
                "7c83f1861d8d6c7b"
            ]
        ]
    },
    {
        "id": "7c83f1861d8d6c7b",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2790,
        "y": 180,
        "wires": [
            [
                "47d390f8d18b1c49"
            ]
        ]
    },
    {
        "id": "47d390f8d18b1c49",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "save to history",
        "func": "msg.collection = \"history\"\n\nmsg.payload = {\n    message: `Ви отримали доступ до середовища Visia у ролі ${msg.payload[0].name}`,\n    createdAt: global.get(\"convert_date\"),\n    deleted: false,\n    userId: msg.userId\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2980,
        "y": 180,
        "wires": [
            [
                "8946711ea977905a"
            ]
        ]
    },
    {
        "id": "8946711ea977905a",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 3170,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "689ddad7f0e4f927",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "user_project_roles",
        "func": "msg.collection = \"user_project_roles\"\n\nmsg.projectNames = msg.payload.map(i => i.name)\n\nmsg.payload = msg.oldpayload.projects.map(i => ({\n    deleted: false,\n    createdAt: global.get(\"convert_date\"),\n    user: msg.userId,\n    project: objectid(i.project),\n    role: objectid(i.role)\n}))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1890,
        "y": 80,
        "wires": [
            [
                "79310709129ef287"
            ]
        ]
    },
    {
        "id": "79310709129ef287",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2090,
        "y": 80,
        "wires": [
            [
                "c172bcb9922c2b92"
            ]
        ]
    },
    {
        "id": "c172bcb9922c2b92",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "send email for app",
        "func": "const nodeUrl = env.get(\"uiUrl\");\nconst url = `${nodeUrl}/Home`;\n\nconst colorHeading = `color: #1D1D1D;\nfont-family: \"Inter\";\nfont-size: 40px;\nfont-style: normal;\nfont-weight: 400;\nline-height: 48px; /* 120% */\nletter-spacing: -0.8px;`\n\nconst basicText = `color: #8E8E8E;\nfont-family: Inter;\nfont-size: 14px;\nfont-style: normal;\nfont-weight: 400;\nline-height: 24px; /* 171.429% */\nletter-spacing: -0.28px;`\n\nconst link = `\ndisplay: inline-flex;\npadding: 12px 10px;\njustify-content: center;\nalign-items: center;\nborder-radius: 5px;\nbackground: #1D1D1D;\ngap: 4px;\ncolor: #FFF;\nfont-family: Inter;\nfont-size: 14px;\nfont-style: normal;\nfont-weight: 400;\nline-height: 24px; /* 171.429% */\n`\n\nconst text = `\n<div style=\"padding: 10px 0; color: black;\">\n    <h1  style=\"${colorHeading}\">Доступ до Visia</h1>\n    <p style=\"${basicText}\">Ви отримали доступ до системи Visia. Перейдіть до системи для того щоб пройти реєстрацію і отримати доступ до призначених проектів</p>\n    \n    <p style=\"${basicText}\">Доступ до існуючих проектів</p>\n    ${msg.projectNames.map(projectName => (\n        `<p style=\"${basicText}\">\n        ${projectName}\n        </p>`\n    ))}\n    \n    <a href=\"${url}\" style=\"${link}\">Завершити реєстрацію</a>\n    <p style=\"${basicText}\">У разі виникнення питань щодо роботи реєстрації та роботи з продуктом пишіть на admin@visia.pro</p>\n</div>\n`;\n\nmsg.to = msg.oldpayload.email\nmsg.topic = 'Доступ до Visia';\nmsg.payload = text;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2290,
        "y": 80,
        "wires": [
            [
                "a307777256a983c9",
                "349236110cd7c236",
                "9e47a3a4bc029182"
            ]
        ]
    },
    {
        "id": "349236110cd7c236",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "save to history",
        "func": "msg.collection = \"history\"\n\nmsg.payload = msg.projectNames.map(i => ({\n    message: `Ви отримали доступ до проекту ${i}`,\n    createdAt: global.get(\"convert_date\"),\n    deleted: false,\n    userId: msg.userId\n}))\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2520,
        "y": 80,
        "wires": [
            [
                "82ab33d60d6d5752"
            ]
        ]
    },
    {
        "id": "82ab33d60d6d5752",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2790,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "6f70f661f167dd24",
        "type": "e-mail",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": false,
        "token": "",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 2210,
        "y": 260,
        "wires": []
    },
    {
        "id": "a307777256a983c9",
        "type": "e-mail",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "server": "smtp.gmail.com",
        "port": "465",
        "authtype": "BASIC",
        "saslformat": false,
        "token": "",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 2530,
        "y": 120,
        "wires": []
    },
    {
        "id": "3bc3b863ac50762a",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 2220,
        "y": 340,
        "wires": []
    },
    {
        "id": "66781a92163ddcfa",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 461",
        "func": "msg.collection = \"admins\";\nlet role = msg.payload.role && msg.payload.role !== \"\" && msg.payload.role !== \"null\" && msg.payload.role !== null ? objectid(msg.payload.role) : ''\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\nmsg.payload = {\n    $set: {\n        ...msg.payload,\n        \"role\": role,\n        \"updatedAt\": global.get(\"convert_date\")\n    }\n\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 310,
        "y": 380,
        "wires": [
            [
                "7b10265f4470a82e",
                "32903bbff5891ba6"
            ]
        ]
    },
    {
        "id": "b217632d1ea117f8",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "url": "/updateUser",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 380,
        "wires": [
            [
                "66781a92163ddcfa"
            ]
        ]
    },
    {
        "id": "7b10265f4470a82e",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 500,
        "y": 380,
        "wires": [
            [
                "4b4a37a942c45925"
            ]
        ]
    },
    {
        "id": "4b4a37a942c45925",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 720,
        "y": 380,
        "wires": []
    },
    {
        "id": "0a39ceaa1f545df1",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 471",
        "func": "msg.collection = \"admins\";\nif (msg.req.query?._id && msg.req.query._id !== \"null\" && msg.req.query._id !== \"\"){\n   let id = msg.req.query._id\n\n    msg.payload = [\n        {\n            $match: {\n                _id: objectid(id),\n                deleted: false\n            }\n        },\n        {\n            $lookup: {\n                \"from\": \"projects\",\n                \"let\": { managerId: \"$_id\" },\n                \"pipeline\": [\n                    {\n                        $match: {\n                            $expr: {\n                                $and: [\n                                    { $in: [\"$$managerId\", \"$managers\"] }\n                                ]\n                            }\n                        }\n                    },\n                    {\n                        $match: {\n                            deleted: false\n                        }\n                    }\n                ],\n                \"as\": \"managers_project\"\n            }\n        },\n        {\n            $lookup: {\n                \"from\": \"projects\",\n                \"let\": { watcherId: \"$_id\" },\n                \"pipeline\": [\n                    {\n                        $match: {\n                            $expr: {\n                                $and: [\n                                    { $in: [\"$$watcherId\", \"$watchers\"] }\n                                ]\n                            }\n                        }\n                    },\n                    {\n                        $match: {\n                            deleted: false\n                        }\n                    }\n                ],\n                \"as\": \"watcher_project\"\n            }\n        }\n    ];\n\n\nreturn[msg,null]\n}\nelse{\n    return[null,msg]\n}\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 540,
        "wires": [
            [
                "a16db9e1645a78a9"
            ],
            [
                "605cec69b9e36241"
            ]
        ]
    },
    {
        "id": "a16db9e1645a78a9",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 540,
        "wires": [
            [
                "8f939b31c9c893f7"
            ]
        ]
    },
    {
        "id": "35e52520ef2d942b",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "url": "/getProjectsProfile",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 540,
        "wires": [
            [
                "0a39ceaa1f545df1"
            ]
        ]
    },
    {
        "id": "dd9ed1418193c650",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 540,
        "wires": []
    },
    {
        "id": "8f939b31c9c893f7",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 474",
        "func": "\n\n\nmsg.a = msg.payload[0].managers_project.map(e=>{\n    return {\n        name:e.name,\n        // _id:e._id,\n        role:\"Менеджер\"\n    }\n})\n\nmsg.b = msg.payload[0].watcher_project.map(e => {\n    return {\n        name: e.name,\n        // _id: e._id,\n        role: \"Наглядач\"\n    }\n})\nmsg.payload = [...msg.a,...msg.b]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 540,
        "wires": [
            [
                "dd9ed1418193c650"
            ]
        ]
    },
    {
        "id": "7bb96201778da3bd",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 470",
        "func": "msg.collection = \"admins\";\n\nmsg.query ={\n    _id: objectid(msg.req.query.id)\n}\nmsg.payload={\n    $set:{  ...msg.payload,\n        \"updatedAt\": global.get(\"convert_date\")}\n  \n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 460,
        "wires": [
            [
                "d48317cb5e42f0b5",
                "3da3504bb2dc748c"
            ]
        ]
    },
    {
        "id": "814d76bb908c1113",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "url": "/updateProfile",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 460,
        "wires": [
            [
                "7bb96201778da3bd",
                "32903bbff5891ba6"
            ]
        ]
    },
    {
        "id": "d48317cb5e42f0b5",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 500,
        "y": 460,
        "wires": [
            [
                "88086cee5a92386a"
            ]
        ]
    },
    {
        "id": "88086cee5a92386a",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 720,
        "y": 460,
        "wires": []
    },
    {
        "id": "580fc81c4dd87c31",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "get users query",
        "func": "\nmsg.collection = \"admins\";\n\nmsg.payload = [\n  {\n    $match: {\n      deleted: false\n    }\n  },\n  {\n    $lookup: {\n      \"from\": \"admin_roles\",\n      \"localField\": \"role\",\n      \"foreignField\": \"_id\",\n      \"as\": \"role_items\"\n    }\n  },\n\n  {\n    $addFields: {\n      role: {\n        $arrayElemAt: [\"$role_items.name\", 0]\n      }\n    }\n  },\n  {\n    $addFields: {\n      projects: {\n        $map: {\n          input: \"$projects\",\n          as: \"project\",\n          in: \"$$project.name\"\n        }\n      }\n    }\n  },\n  {\n    $project: {\n      deleted: 0,\n      avatarColor: 0,\n      password: 0,\n      verifyToken: 0,\n      resetPassToken: 0,\n      resetPassExpireToken: 0\n    }\n  }\n]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 300,
        "wires": [
            [
                "687ecdb367fb1ae7"
            ]
        ]
    },
    {
        "id": "7742b6cd44216d77",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "getUsers",
        "url": "/getAllUsers",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 300,
        "wires": [
            [
                "580fc81c4dd87c31"
            ]
        ]
    },
    {
        "id": "687ecdb367fb1ae7",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 300,
        "wires": [
            [
                "4ff271b6b3e503ce"
            ]
        ]
    },
    {
        "id": "4ff271b6b3e503ce",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 730,
        "y": 300,
        "wires": []
    },
    {
        "id": "3fd77827868d2d7c",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 475",
        "func": "msg.collection = \"admins\";\nlet id = msg.payload._id\n// msg.payload = [\n//     {\n//         $match: {\n//             _id:objectid(id)\n//         }\n//     },\n//     {\n//         $lookup: {\n//             \"from\": \"projects\",\n//             \"localField\": \"_id\",\n//             \"foreignField\": \"managers\",\n//             \"as\": \"managers_project\"\n//         }\n//     },\n//     {\n//         $lookup: {\n//             \"from\": \"projects\",\n//             \"localField\": \"_id\",\n//             \"foreignField\": \"watchers\",\n//             \"as\": \"watcher_project\"\n//         }\n//     }\n// ];\n\n\nmsg.payload = [\n    {\n        $match: {\n            _id: objectid(id),\n            deleted: false\n        }\n    },\n    {\n        $lookup: {\n            \"from\": \"projects\",\n            \"let\": { managerId: \"$_id\" },\n            \"pipeline\": [\n                {\n                    $match: {\n                        $expr: {\n                            $and: [\n                                { $in: [\"$$managerId\", \"$managers\"] }\n                            ]\n                        }\n                    }\n                },\n                {\n                    $match: {\n                        deleted: false\n                    }\n                }\n            ],\n            \"as\": \"managers_project\"\n        }\n    },\n    {\n        $lookup: {\n            \"from\": \"projects\",\n            \"let\": { watcherId: \"$_id\" },\n            \"pipeline\": [\n                {\n                    $match: {\n                        $expr: {\n                            $and: [\n                                { $in: [\"$$watcherId\", \"$watchers\"] }\n                            ]\n                        }\n                    }\n                },\n                {\n                    $match: {\n                        deleted: false\n                    }\n                }\n            ],\n            \"as\": \"watcher_project\"\n        }\n    }\n];\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 720,
        "wires": [
            [
                "0987e2ce0c909f26"
            ]
        ]
    },
    {
        "id": "0987e2ce0c909f26",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 720,
        "wires": [
            [
                "bb42a56b681a980a"
            ]
        ]
    },
    {
        "id": "b04e776fbe1a26ff",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 910,
        "y": 720,
        "wires": []
    },
    {
        "id": "605cec69b9e36241",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 540,
        "y": 580,
        "wires": []
    },
    {
        "id": "b7b22f783f5d5ee8",
        "type": "catch",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "scope": [
            "8f939b31c9c893f7"
        ],
        "uncaught": false,
        "x": 770,
        "y": 600,
        "wires": [
            [
                "305212294e30f5b2"
            ]
        ]
    },
    {
        "id": "305212294e30f5b2",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 480",
        "func": "msg.payload = []\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 600,
        "wires": [
            [
                "dd9ed1418193c650"
            ]
        ]
    },
    {
        "id": "82f5ba55116bdb6b",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "url": "/getData",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 720,
        "wires": [
            [
                "3fd77827868d2d7c"
            ]
        ]
    },
    {
        "id": "bb42a56b681a980a",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "function 478",
        "func": "msg.a = msg.payload[0].managers_project.map(e=>{\n    return {\n        name:e.name,\n        _id:e._id,\n        role:\"Менеджер\"\n    }\n})\n\nmsg.b = msg.payload[0].watcher_project.map(e => {\n    return {\n        name: e.name,\n        _id: e._id,\n        role: \"Наглядач\"\n    }\n})\nmsg.payload = [...msg.a,...msg.b]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 720,
        "wires": [
            [
                "b04e776fbe1a26ff"
            ]
        ]
    },
    {
        "id": "17b8562e3d547277",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 700,
        "y": 220,
        "wires": []
    },
    {
        "id": "4a8ba4abbf89b5be",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 500,
        "y": 220,
        "wires": [
            [
                "17b8562e3d547277"
            ]
        ]
    },
    {
        "id": "e37d93afcb43b4e5",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "name": "function 612",
        "func": "msg.collection = \"admins\";\n\nmsg.query ={\n    _id: objectid(msg.req.query._id)\n}\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 290,
        "y": 220,
        "wires": [
            [
                "4a8ba4abbf89b5be"
            ]
        ]
    },
    {
        "id": "f4c82543ec4d105a",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "",
        "url": "/deleteUser",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 220,
        "wires": [
            [
                "e37d93afcb43b4e5"
            ]
        ]
    },
    {
        "id": "de45f9d797c4f84e",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "url": "/avatar",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 110,
        "y": 840,
        "wires": [
            [
                "0e164b52e568feca"
            ]
        ]
    },
    {
        "id": "0e164b52e568feca",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "function 624",
        "func": "\nmsg.buffer = msg.req.files[0].buffer\nmsg.path = `/data/storage/avatars/${msg.req.files[0].originalname}`\nmsg.payload = msg.req.files[0].buffer\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 840,
        "wires": [
            [
                "e9718e2f61302fe4"
            ]
        ]
    },
    {
        "id": "e9718e2f61302fe4",
        "type": "file",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 480,
        "y": 840,
        "wires": [
            [
                "a633b0f8e148da75"
            ]
        ]
    },
    {
        "id": "9d68256b8b394174",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "url": "/avatar",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 1020,
        "wires": [
            [
                "536aa982959aa2cb",
                "a5d4c55657c115d1"
            ]
        ]
    },
    {
        "id": "4366feda21bb4933",
        "type": "delay",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 425,
        "y": 1020,
        "wires": [
            [
                "fe995ae37d7a0456"
            ]
        ],
        "l": false
    },
    {
        "id": "fe995ae37d7a0456",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "function 625",
        "func": "\nmsg.filename = `/data/storage/avatars/${msg.payload.avatar}`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 1020,
        "wires": [
            [
                "e9214b72b2feea6e"
            ]
        ]
    },
    {
        "id": "dd6afca9782df5c4",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 840,
        "wires": []
    },
    {
        "id": "e9214b72b2feea6e",
        "type": "file in",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 720,
        "y": 1020,
        "wires": [
            [
                "839bb05b3f90bc6f"
            ]
        ]
    },
    {
        "id": "839bb05b3f90bc6f",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "get filename",
        "func": "msg.headers = {\n    // 'Content-Type': 'image/png',\n    'Content-Type': 'image/*'\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 1020,
        "wires": [
            [
                "cdc1a73aa180bc5e"
            ]
        ]
    },
    {
        "id": "cdc1a73aa180bc5e",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 1020,
        "wires": []
    },
    {
        "id": "536aa982959aa2cb",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "function 626",
        "func": "\n\nif (msg.payload.avatar !== \"\" && msg.payload.avatar !== \"null\" && msg.payload.avatar !== undefined && msg.payload.avatar !== \"undefined\"){\n\n\n    return [msg,null]\n}else{\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 1020,
        "wires": [
            [
                "4366feda21bb4933"
            ],
            [
                "e8f9e3928b7fbecd"
            ]
        ]
    },
    {
        "id": "e8f9e3928b7fbecd",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 450,
        "y": 1060,
        "wires": []
    },
    {
        "id": "a633b0f8e148da75",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "function 627",
        "func": "msg.payload = msg.req.files[0].originalname\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 840,
        "wires": [
            [
                "dd6afca9782df5c4"
            ]
        ]
    },
    {
        "id": "4035caf35e6f845d",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "url": "/getUserAvatar",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 940,
        "wires": [
            [
                "023763ae81ac0ef6",
                "a5d4c55657c115d1"
            ]
        ]
    },
    {
        "id": "023763ae81ac0ef6",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "name": "function 628",
        "func": "msg.collection = \"admins\";\n\nlet id = msg.req.query._id\n\nmsg.payload = {\n    \"_id\": objectid(id)\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 370,
        "y": 940,
        "wires": [
            [
                "2811ff010a30b35d"
            ]
        ]
    },
    {
        "id": "2811ff010a30b35d",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 940,
        "wires": [
            [
                "11d86a54c7a1553a"
            ]
        ]
    },
    {
        "id": "11d86a54c7a1553a",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 940,
        "wires": []
    },
    {
        "id": "57ccc05c432afabb",
        "type": "function",
        "z": "5d37dc5e8bf693d8",
        "name": "function 669",
        "func": "msg.collection = \"admins\";\n\nmsg.payload = {\n    _id: objectid(msg.req.query._id)\n\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 310,
        "y": 660,
        "wires": [
            [
                "8a49f5e8129a32fb"
            ]
        ]
    },
    {
        "id": "84a7218d515c512a",
        "type": "http in",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "url": "/getUser",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 660,
        "wires": [
            [
                "57ccc05c432afabb"
            ]
        ]
    },
    {
        "id": "8a49f5e8129a32fb",
        "type": "link call",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 490,
        "y": 660,
        "wires": [
            [
                "00fcfe1ccf1065fd",
                "3da3504bb2dc748c"
            ]
        ]
    },
    {
        "id": "00fcfe1ccf1065fd",
        "type": "http response",
        "z": "5d37dc5e8bf693d8",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 720,
        "y": 660,
        "wires": []
    },
    {
        "id": "3da3504bb2dc748c",
        "type": "debug",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "debug 550",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 500,
        "wires": []
    },
    {
        "id": "32903bbff5891ba6",
        "type": "debug",
        "z": "5d37dc5e8bf693d8",
        "g": "9005e0b501e3898f",
        "name": "debug 551",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 420,
        "wires": []
    },
    {
        "id": "a5d4c55657c115d1",
        "type": "debug",
        "z": "5d37dc5e8bf693d8",
        "g": "acc26a2de722bcc9",
        "name": "debug 552",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 270,
        "y": 900,
        "wires": []
    },
    {
        "id": "873564be61a3d25d",
        "type": "http in",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "url": "/getCounterparties",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 80,
        "wires": [
            [
                "1fbf569916fefee8"
            ]
        ]
    },
    {
        "id": "50151e0f11718ee8",
        "type": "http in",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "url": "/updateCounterparties",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 180,
        "y": 260,
        "wires": [
            [
                "33860c6e8a7bfc5f"
            ]
        ]
    },
    {
        "id": "372b88562ed197f1",
        "type": "http in",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "url": "/deleteCounterparties",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 360,
        "wires": [
            [
                "58fb5ece36193006"
            ]
        ]
    },
    {
        "id": "4fc4e82c9cb4812b",
        "type": "link call",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 590,
        "y": 80,
        "wires": [
            [
                "ce40f0ede9272b8a",
                "a86b4cb2c331997f"
            ]
        ]
    },
    {
        "id": "bf0a5316a13da341",
        "type": "link call",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 590,
        "y": 180,
        "wires": [
            [
                "6a2035ce7694fc0a"
            ]
        ]
    },
    {
        "id": "4e326b4ef5ade7f3",
        "type": "link call",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 260,
        "wires": [
            [
                "36b5a4f4388ec6b5"
            ]
        ]
    },
    {
        "id": "a9792a1ca09a37f5",
        "type": "link call",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 360,
        "wires": [
            [
                "df718d4659b8b88d"
            ]
        ]
    },
    {
        "id": "1fbf569916fefee8",
        "type": "function",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "from app",
        "func": "msg.collection = 'counterparties';\nmsg.payload = {\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 80,
        "wires": [
            [
                "4fc4e82c9cb4812b"
            ]
        ]
    },
    {
        "id": "58fb5ece36193006",
        "type": "function",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "from app",
        "func": "msg.collection = 'counterparties';\n\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n}\nmsg.payload = {\n    $set: {\n        \"deleted\": true,\n        \"updatedAt\": global.get(\"convert_date\")\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 360,
        "wires": [
            [
                "a9792a1ca09a37f5"
            ]
        ]
    },
    {
        "id": "ce40f0ede9272b8a",
        "type": "http response",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 80,
        "wires": []
    },
    {
        "id": "6a2035ce7694fc0a",
        "type": "http response",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 180,
        "wires": []
    },
    {
        "id": "36b5a4f4388ec6b5",
        "type": "http response",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 260,
        "wires": []
    },
    {
        "id": "df718d4659b8b88d",
        "type": "http response",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 360,
        "wires": []
    },
    {
        "id": "88f13a52fc379724",
        "type": "http in",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "",
        "url": "/createCounterparties",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 180,
        "y": 180,
        "wires": [
            [
                "2d780e1d69bdc66b"
            ]
        ]
    },
    {
        "id": "2d780e1d69bdc66b",
        "type": "function",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "from app",
        "func": "msg.collection = 'counterparties';\n\nmsg.payload = {\n    _id: objectid(),\n    ...msg.payload,\n    \"deleted\": false,\n    \"createdAt\": global.get(\"convert_date\"),\n    \"updatedAt\": global.get(\"convert_date\"),\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 180,
        "wires": [
            [
                "bf0a5316a13da341"
            ]
        ]
    },
    {
        "id": "33860c6e8a7bfc5f",
        "type": "function",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "from app",
        "func": "msg.collection = 'counterparties';\nmsg.query ={\n    _id:objectid(msg.req.query._id)\n}\n\nmsg.payload={\n    $set:{\n        ...msg.payload,\n        \"updatedAt\": global.get(\"convert_date\")\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 260,
        "wires": [
            [
                "4e326b4ef5ade7f3"
            ]
        ]
    },
    {
        "id": "a86b4cb2c331997f",
        "type": "debug",
        "z": "275886e37bea4c3c",
        "g": "59374a27ad18d0ed",
        "name": "debug 528",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 120,
        "wires": []
    },
    {
        "id": "5624f63c204df958",
        "type": "http in",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "url": "/updateProjectManagers_team",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 100,
        "wires": [
            [
                "28aa94638c497270"
            ]
        ]
    },
    {
        "id": "28aa94638c497270",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "filter",
        "func": "msg.collection = 'projects';\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n};\n\nlet newManager = {\n    ...msg.payload\n};\n\nmsg.payload = {\n    $set: {\n        managers:[objectid(newManager.userId)]  \n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 100,
        "wires": [
            [
                "e403a19303e7799e"
            ]
        ]
    },
    {
        "id": "e403a19303e7799e",
        "type": "link call",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 100,
        "wires": [
            [
                "9aa3ce8119fd2a54"
            ]
        ]
    },
    {
        "id": "9aa3ce8119fd2a54",
        "type": "http response",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 820,
        "y": 100,
        "wires": []
    },
    {
        "id": "9281654135ca06f4",
        "type": "http in",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "url": "/updateProjectWatchers_team",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 180,
        "y": 160,
        "wires": [
            [
                "13a1b79ff069dc44"
            ]
        ]
    },
    {
        "id": "13a1b79ff069dc44",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "filter",
        "func": "msg.collection = 'projects';\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n};\n\nlet newWatchers = {\n    ...msg.payload\n};\n\nmsg.payload = {\n    $push: {\n        watchers: objectid(newWatchers.userId) \n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 160,
        "wires": [
            [
                "1dce600190a4a9c9"
            ]
        ]
    },
    {
        "id": "1dce600190a4a9c9",
        "type": "link call",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 160,
        "wires": [
            [
                "9061a70595dd7fd2"
            ]
        ]
    },
    {
        "id": "9061a70595dd7fd2",
        "type": "http response",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 820,
        "y": 160,
        "wires": []
    },
    {
        "id": "06f6cc31429066b9",
        "type": "http in",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "url": "/getProgectsWatchers_team",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 280,
        "wires": [
            [
                "96c1b91a368fc3c8"
            ]
        ]
    },
    {
        "id": "dc634aa8a7ad00db",
        "type": "link call",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 630,
        "y": 280,
        "wires": [
            [
                "f8549111db794081"
            ]
        ]
    },
    {
        "id": "f8549111db794081",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "function 483",
        "func": "msg.payload = msg.payload[0].items\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 280,
        "wires": [
            [
                "9da0baae3f444e50"
            ]
        ]
    },
    {
        "id": "9da0baae3f444e50",
        "type": "http response",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 990,
        "y": 280,
        "wires": []
    },
    {
        "id": "96c1b91a368fc3c8",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "function 484",
        "func": "msg.collection = \"projects\";\n\nmsg.payload = [\n    {\n        $match: {\n            _id: objectid(msg.req.query._id)\n        }\n    },\n    {\n        $lookup: {\n            \"from\": \"admins\",\n            \"localField\": \"watchers\",\n            \"foreignField\": \"_id\",\n            \"as\": \"items\"\n        }\n    }\n];\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 280,
        "wires": [
            [
                "dc634aa8a7ad00db"
            ]
        ]
    },
    {
        "id": "b572dab5d747eda6",
        "type": "http in",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "url": "/getProjectManagers_team",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 220,
        "wires": [
            [
                "a89d44915dc6faae"
            ]
        ]
    },
    {
        "id": "269004503e3db0c6",
        "type": "link call",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 630,
        "y": 220,
        "wires": [
            [
                "54b37124ec23f521"
            ]
        ]
    },
    {
        "id": "54b37124ec23f521",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "function 485",
        "func": "msg.payload = msg.payload[0].items\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 220,
        "wires": [
            [
                "855f7c885ece2092"
            ]
        ]
    },
    {
        "id": "855f7c885ece2092",
        "type": "http response",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 990,
        "y": 220,
        "wires": []
    },
    {
        "id": "a89d44915dc6faae",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "function 486",
        "func": "msg.collection = \"projects\";\n\nmsg.payload = [\n    {\n        $match: {\n            _id: objectid(msg.req.query._id)\n        }\n    },\n    {\n        $lookup: {\n            \"from\": \"admins\",\n            \"localField\": \"managers\",\n            \"foreignField\": \"_id\",\n            \"as\": \"items\"\n        }\n    }\n];\n\nreturn msg;\n  ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 430,
        "y": 220,
        "wires": [
            [
                "269004503e3db0c6"
            ]
        ]
    },
    {
        "id": "996ff4af6346a5ab",
        "type": "http in",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "url": "/deleteWatcher_team",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 340,
        "wires": [
            [
                "1f121ce86bb02e0f"
            ]
        ]
    },
    {
        "id": "1f121ce86bb02e0f",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "delete watcher",
        "func": "msg.collection =\"projects\";\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n};\nmsg.payload = JSON.parse(msg.payload)\nlet newWatchers = {\n    ...msg.payload\n};\n\nmsg.payload = {\n    $pull: {\n        watchers: objectid(newWatchers._id)\n    }\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 340,
        "wires": [
            [
                "f563e30b1a8d6fce"
            ]
        ]
    },
    {
        "id": "f563e30b1a8d6fce",
        "type": "link call",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 340,
        "wires": [
            [
                "2a48e722d10c4221"
            ]
        ]
    },
    {
        "id": "2a48e722d10c4221",
        "type": "http response",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 340,
        "wires": []
    },
    {
        "id": "103227fe873ca13f",
        "type": "http in",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "url": "/deleteManager_team",
        "method": "delete",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 400,
        "wires": [
            [
                "5d77de9682537422"
            ]
        ]
    },
    {
        "id": "5d77de9682537422",
        "type": "function",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "delete watcher",
        "func": "msg.collection =\"projects\";\nmsg.query = {\n    _id: objectid(msg.req.query._id)\n};\nmsg.payload = JSON.parse(msg.payload)\nlet newWatchers = {\n    ...msg.payload\n};\n\nmsg.payload = {\n    $pull: {\n        managers: objectid(newWatchers._id)\n    }\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 400,
        "wires": [
            [
                "23959014cf68df6e"
            ]
        ]
    },
    {
        "id": "23959014cf68df6e",
        "type": "link call",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 400,
        "wires": [
            [
                "ee68aea7e306bb48"
            ]
        ]
    },
    {
        "id": "ee68aea7e306bb48",
        "type": "http response",
        "z": "ad9491c611cf1057",
        "g": "59348ed242f896b4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 400,
        "wires": []
    },
    {
        "id": "3ce4d9fc61c23cff",
        "type": "http in",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "",
        "url": "/getProjectsInfo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 140,
        "wires": [
            [
                "026e7a7bfd4bccbd"
            ]
        ]
    },
    {
        "id": "697b246380bab337",
        "type": "link call",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 140,
        "wires": [
            [
                "239be4628c082e71"
            ]
        ]
    },
    {
        "id": "026e7a7bfd4bccbd",
        "type": "function",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "find by id",
        "func": "msg.collection = \"projects\";\nmsg.payload = {\n    _id: objectid(msg.req.query._id),\n    deleted:false\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 140,
        "wires": [
            [
                "697b246380bab337"
            ]
        ]
    },
    {
        "id": "239be4628c082e71",
        "type": "http response",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 710,
        "y": 140,
        "wires": []
    },
    {
        "id": "4a13fe29d6c2f664",
        "type": "http in",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "",
        "url": "/updateProjectsInfo",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 200,
        "wires": [
            [
                "95ec39872113e4dd",
                "239be4628c082e71"
            ]
        ]
    },
    {
        "id": "95ec39872113e4dd",
        "type": "function",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "data to update",
        "func": "msg.collection = \"projects\";\nmsg.query={\n    _id: objectid(msg.req.query._id)\n}\n\nlet baner = msg.payload.banerNew ?msg.payload.banerNew : msg.payload.baner;\ndelete msg.payload.banerNew\nmsg.payload={\n    $set:{\n        ...msg.payload,\n        \"baner\": baner,\n        \"updatedAt\": global.get(\"convert_date\")\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 200,
        "wires": [
            [
                "8a221c2a595dd53c"
            ]
        ]
    },
    {
        "id": "8a221c2a595dd53c",
        "type": "link call",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 200,
        "wires": [
            [
                "efb60abb1100f980"
            ]
        ]
    },
    {
        "id": "efb60abb1100f980",
        "type": "http response",
        "z": "87640173a031323f",
        "g": "a7c23722d7220194",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 790,
        "y": 200,
        "wires": []
    },
    {
        "id": "bfb1d90bdfc84567",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "url": "baner",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "aeb701579a4fa8d9"
            ]
        ]
    },
    {
        "id": "aeb701579a4fa8d9",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "function 398",
        "func": "\nmsg.buffer = msg.req.files[0].buffer\nmsg.path = `/data/storage/baner/${msg.req.files[0].originalname}`\nmsg.payload = msg.req.files[0].buffer\n\n// function removeSpaces(inputString) {\n//     return inputString.replace(/\\s/g, '');\n// }\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 60,
        "wires": [
            [
                "d0257bdc7526d076"
            ]
        ]
    },
    {
        "id": "d0257bdc7526d076",
        "type": "file",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 520,
        "y": 60,
        "wires": [
            [
                "a705a5326fe59cd7"
            ]
        ]
    },
    {
        "id": "70f745abad2027af",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "url": "/image",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "8a781a93d9bb4e85"
            ]
        ]
    },
    {
        "id": "ba3f65e37ff826ce",
        "type": "delay",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 445,
        "y": 100,
        "wires": [
            [
                "61b5e6c37417b092"
            ]
        ],
        "l": false
    },
    {
        "id": "61b5e6c37417b092",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "function 451",
        "func": "\nmsg.filename = `/data/storage/baner/${msg.payload.baner}`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 100,
        "wires": [
            [
                "ab702302159cf5a3"
            ]
        ]
    },
    {
        "id": "1c6308a3236eaf00",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 60,
        "wires": []
    },
    {
        "id": "ab702302159cf5a3",
        "type": "file in",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 700,
        "y": 100,
        "wires": [
            [
                "eb7779bea1afe8c6"
            ]
        ]
    },
    {
        "id": "eb7779bea1afe8c6",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "get filename",
        "func": "msg.headers = {\n    'Content-Type': 'image/*',\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 100,
        "wires": [
            [
                "4b04f737e8feab4c"
            ]
        ]
    },
    {
        "id": "4b04f737e8feab4c",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1030,
        "y": 100,
        "wires": []
    },
    {
        "id": "8a781a93d9bb4e85",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "function 465",
        "func": "\n\nif (msg.payload.baner !== \"\" && msg.payload.baner !== \"null\" && msg.payload.baner !== undefined && msg.payload.baner !== \"undefined\"){\n\n\n    return [msg,null]\n}else{\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 120,
        "wires": [
            [
                "ba3f65e37ff826ce"
            ],
            [
                "016ec444e7de8502"
            ]
        ]
    },
    {
        "id": "016ec444e7de8502",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 490,
        "y": 160,
        "wires": []
    },
    {
        "id": "0a590ec5fe4a04e1",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "",
        "url": "/getProjects2",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 960,
        "wires": [
            [
                "52014652dff83890"
            ]
        ]
    },
    {
        "id": "52014652dff83890",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "function 481",
        "func": "msg.payload = [\n    {\n        \"label\": \"Структура проекту\",\n        \"value\": `Structure?${msg.req.query._id}`,\n        \"icon\": \"\",\n        \"_id\": \"\"\n    },\n    {\n        \"label\": \"Договори\",\n        \"value\": `Сontracts?${msg.req.query._id}`,\n        \"icon\": \"\",\n        \"_id\": \"\"\n    },\n    {\n\n        \"label\": \"ТЕП\",\n        \"value\": `Tep?${msg.req.query._id}`,\n        \"icon\": \"\",\n        \"_id\": \"\"\n    },\n    {\n\n        \"label\": \"Команда\",\n        \"value\": `Team?${msg.req.query._id}`,\n        \"icon\": \"\",\n        \"_id\": \"\"\n    },\n    {\n        \"label\": \"Налаштування\",\n        \"value\": `ProjectSettings?${msg.req.query._id}`,\n        \"icon\": \"\",\n        \"_id\": \"\"\n    }\n]\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 960,
        "wires": [
            [
                "a9bd6fc6ca7159b5"
            ]
        ]
    },
    {
        "id": "a9bd6fc6ca7159b5",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 530,
        "y": 960,
        "wires": []
    },
    {
        "id": "a971bdcb5ac86f2c",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "getAllProjects",
        "func": "msg.collection = 'projects';\n\nmsg.payload = {\n    deleted:false\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 860,
        "wires": [
            [
                "b444a12c396d00a0"
            ]
        ]
    },
    {
        "id": "b444a12c396d00a0",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 860,
        "wires": [
            [
                "4a5dcdc1547bfe14"
            ]
        ]
    },
    {
        "id": "3d38916c91ad4978",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "",
        "url": "/getProjects1",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 860,
        "wires": [
            [
                "a971bdcb5ac86f2c"
            ]
        ]
    },
    {
        "id": "a6986173fb8d4c24",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 910,
        "y": 820,
        "wires": []
    },
    {
        "id": "4a5dcdc1547bfe14",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "function 482",
        "func": "if (msg.payload.length>0){\n    function convertDateFormat(dateString) {\n    const date = new Date(dateString);\n    const options = { year: 'numeric', month: 'numeric', day: 'numeric' };\n    return date.toLocaleDateString(undefined, options);\n}\n\n\nmsg.payload=msg.payload.map(e=>{\n    return{\n        \"label\": e.name,\n         \"value\": `Structure?${e._id}`,\n        \"icon\": e.icon ? e.icon : \"\",\n        \"_id\": e._id\n    }\n})\n\nreturn[msg,null]\n}else{\n    return[null,msg]\n}\n\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 860,
        "wires": [
            [
                "a6986173fb8d4c24"
            ],
            [
                "611477050d6b691b"
            ]
        ]
    },
    {
        "id": "611477050d6b691b",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "f490d1a0e639dbca",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 920,
        "y": 880,
        "wires": []
    },
    {
        "id": "6ea930b96016ad60",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "function 612",
        "func": "msg.buffer = msg.req.files[0].buffer\nmsg.path = `/data/storage/baner/${renameFile(msg.req.files[0].originalname)}`\nmsg.payload = msg.req.files[0].buffer\n\nfunction renameFile(originalName) {\n   \n        const currentDate = new Date();\n        const formattedDate = currentDate.toISOString().replace(/[-T:.Z]/g, '');\n\n        const newName = `${formattedDate}.png`;\n        return newName;\n\n}\n\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1080,
        "wires": [
            [
                "b66e03f867714b74"
            ]
        ]
    },
    {
        "id": "b66e03f867714b74",
        "type": "file",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 520,
        "y": 1080,
        "wires": [
            [
                "d1299d9977ddf95b"
            ]
        ]
    },
    {
        "id": "10623fc92fc83dbb",
        "type": "delay",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 445,
        "y": 1120,
        "wires": [
            [
                "6353d2401b54f0e2"
            ]
        ],
        "l": false
    },
    {
        "id": "6353d2401b54f0e2",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "function 613",
        "func": "\nmsg.filename = `/data/storage/baner/${'20231213125749715.png'}`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 1120,
        "wires": [
            [
                "661e5eef1450df65"
            ]
        ]
    },
    {
        "id": "d1299d9977ddf95b",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1080,
        "wires": []
    },
    {
        "id": "661e5eef1450df65",
        "type": "file in",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "filename": "filename",
        "filenameType": "msg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 700,
        "y": 1120,
        "wires": [
            [
                "1fb63d6085cf834e"
            ]
        ]
    },
    {
        "id": "1fb63d6085cf834e",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "get filename",
        "func": "msg.headers = {\n    'Content-Type': 'image/png',\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 1120,
        "wires": [
            [
                "14ac6f34675ad2f0"
            ]
        ]
    },
    {
        "id": "14ac6f34675ad2f0",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1030,
        "y": 1120,
        "wires": []
    },
    {
        "id": "9d86890e0d68202a",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "url": "/newLogo",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 160,
        "y": 1080,
        "wires": [
            [
                "6ea930b96016ad60"
            ]
        ]
    },
    {
        "id": "abce67a211970ccc",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "dc482170debe4996",
        "name": "",
        "url": "/getLogo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 250,
        "y": 1120,
        "wires": [
            [
                "6353d2401b54f0e2"
            ]
        ]
    },
    {
        "id": "a705a5326fe59cd7",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "f6ba04031958c468",
        "name": "function 614",
        "func": "msg.payload = msg.req.files[0].originalname\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 60,
        "wires": [
            [
                "1c6308a3236eaf00"
            ]
        ]
    },
    {
        "id": "b5cae29d02aa07e3",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "url": "/getProjects",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 300,
        "wires": [
            [
                "0fd55436c4c999da"
            ]
        ]
    },
    {
        "id": "c2697ec2eaf68cf8",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "create",
        "func": "\n// msg.collection = 'projects';\n// msg._id = objectid()\n// let managers = msg.old?.managers && msg.old?.managers!== null && msg.old?.managers.length > 0 ? msg.old?.managers.map(e => objectid(e)) : []\n// let watchers = msg.old?.watchers && msg.old?.watchers!== null && msg.old?.watchers.length > 0 ? msg.old?.watchers.map(e => objectid(e)) : []\n// msg.payload = {\n//     ...msg.old,\n//     watchers,\n//     managers,\n//     createdAt: global.get(\"convert_date\"),\n//     updatedAt: global.get(\"convert_date\"),\n//     _id: msg._id,\n//     deleted: false\n// }\n\n\n\n// return msg;\nmsg.collection = 'projects';\nmsg._id = objectid();\n\n// Check and handle null values for managers and watchers\nlet managers = (msg.old?.managers || []).filter(e => e !== null).map(e => objectid(e));\nlet watchers = (msg.old?.watchers || []).filter(e => e !== null).map(e => objectid(e));\n\nmsg.payload = {\n    ...msg.old,\n    watchers,\n    managers,\n    createdAt: global.get(\"convert_date\"),\n    updatedAt: global.get(\"convert_date\"),\n    _id: msg._id,\n    deleted: false\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 890,
        "y": 460,
        "wires": [
            [
                "88a71851b4acc502"
            ]
        ]
    },
    {
        "id": "88a71851b4acc502",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1080,
        "y": 460,
        "wires": [
            [
                "c824b7ef1fdaf155"
            ]
        ]
    },
    {
        "id": "7225e15ca50493b9",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "url": "/createProject",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "865b40d59249526b",
                "e9f6f901262137a7"
            ]
        ]
    },
    {
        "id": "2d66e56faeb9d137",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "url": "/getUsers",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 620,
        "wires": [
            [
                "97d5f6017d9cc4da"
            ]
        ]
    },
    {
        "id": "97d5f6017d9cc4da",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "filter",
        "func": "msg.collection = \"admins\";\nmsg.payload={\n    deleted:false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 620,
        "wires": [
            [
                "aa69a6157e948135"
            ]
        ]
    },
    {
        "id": "aa69a6157e948135",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 620,
        "wires": [
            [
                "fe46a1033b86c46d"
            ]
        ]
    },
    {
        "id": "fe46a1033b86c46d",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "function 456",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 620,
        "wires": [
            [
                "2210299cc2393cf0"
            ]
        ]
    },
    {
        "id": "2210299cc2393cf0",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 620,
        "wires": []
    },
    {
        "id": "74476512cb91bd4f",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "project_roles",
        "func": "msg.collection = \"project_roles\"\n\nmsg.payload = {\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 360,
        "wires": [
            [
                "1fd33d5317455bce"
            ]
        ]
    },
    {
        "id": "1fd33d5317455bce",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 360,
        "wires": [
            [
                "fd0af88b0b7eaf49"
            ]
        ]
    },
    {
        "id": "0106699ae5392cfb",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "url": "/getProjectRoles",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 360,
        "wires": [
            [
                "74476512cb91bd4f"
            ]
        ]
    },
    {
        "id": "fd0af88b0b7eaf49",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 730,
        "y": 360,
        "wires": []
    },
    {
        "id": "0fd55436c4c999da",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "function 507",
        "func": "msg.collection = 'projects';\nlet page = msg.payload.page && msg.payload.page !== \"null\" ? msg.payload.page :1;\n\nmsg.payload = [\n    {\n        $match: {\n            deleted: false,            \n        }\n    },\n    {\n        $facet: {\n            metadata: [\n                { $count: 'total' },\n                { $addFields: { page }}\n                 ],\n            data: [\n                { $skip: (page - 1) * 6 }, \n                { $limit: 6 }],\n        },\n    }\n\n]\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 300,
        "wires": [
            [
                "0252dcf345e82fb2"
            ]
        ]
    },
    {
        "id": "0252dcf345e82fb2",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 300,
        "wires": [
            [
                "b039c520d5d8fe5b"
            ]
        ]
    },
    {
        "id": "22678679d170ab6c",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 920,
        "y": 280,
        "wires": []
    },
    {
        "id": "b039c520d5d8fe5b",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "function 508",
        "func": "\nif(msg.payload && msg.payload.length>0){\n    msg.payload = {\n        total: Math.ceil(msg.payload[0]?.metadata[0]?.total / 6),\n        data: msg.payload[0]?.data\n    }\n\n    return [msg,null]\n}else{\n    msg.payload =[]\n    return [null,msg]\n}\n\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 300,
        "wires": [
            [
                "22678679d170ab6c",
                "bc2359cc908e7f4a"
            ],
            [
                "fe6b09520cf15488",
                "bc2359cc908e7f4a"
            ]
        ]
    },
    {
        "id": "fe6b09520cf15488",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 920,
        "y": 320,
        "wires": []
    },
    {
        "id": "788ba2601e88f7d2",
        "type": "http in",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "url": "/deleteProject",
        "method": "put",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 720,
        "wires": [
            [
                "cf230257d66c4ff0"
            ]
        ]
    },
    {
        "id": "cf230257d66c4ff0",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "delete project",
        "func": "msg.collection = 'projects';\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n}\n\nmsg.payload = {\n    $set: {\n        deleted: true\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 460,
        "y": 720,
        "wires": [
            [
                "68b5fe40edf3306c"
            ]
        ]
    },
    {
        "id": "68b5fe40edf3306c",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 720,
        "y": 720,
        "wires": [
            [
                "83417b4d517555c4"
            ]
        ]
    },
    {
        "id": "83417b4d517555c4",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 720,
        "wires": []
    },
    {
        "id": "865b40d59249526b",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "check_uniqueness",
        "func": "msg.collection = \"projects\";\nmsg.payload = {\n    ...msg.payload,\n    managers: [msg.payload.managers]\n}\nmsg.old = msg.payload\n\nmsg.payload = {\n    name: msg.req.body.name.trim(),\n    deleted: false\n}\nmsg.name = msg.payload\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 370,
        "y": 480,
        "wires": [
            [
                "ece1e7f9b6a0d0ae"
            ]
        ]
    },
    {
        "id": "ece1e7f9b6a0d0ae",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 480,
        "wires": [
            [
                "3f078f87586d95ee"
            ]
        ]
    },
    {
        "id": "3f078f87586d95ee",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "check",
        "func": "if (msg.payload.length > 0) {\n    return [null, msg];\n} else {\n    \n    return [msg, null];\n}",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "jwt",
                "module": "jsonwebtoken"
            },
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 710,
        "y": 480,
        "wires": [
            [
                "c2697ec2eaf68cf8",
                "bc2359cc908e7f4a"
            ],
            [
                "82033996b8da365b"
            ]
        ]
    },
    {
        "id": "82033996b8da365b",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "not uniqueness",
        "func": "msg.payload = {\n    data: 'Комерційна назва проєкту не унікальна'\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 500,
        "wires": [
            [
                "c5e7ec04bf4816eb"
            ]
        ]
    },
    {
        "id": "c5e7ec04bf4816eb",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "statusCode": "409",
        "headers": {},
        "x": 1040,
        "y": 500,
        "wires": []
    },
    {
        "id": "dbbedf8751d5fc19",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "add to project template",
        "func": "msg.collection =\"projects\";\n\nmsg.id=objectid();\n \nmsg.query = {\n    _id: objectid(msg._id)\n};\nmsg.payload ={\n    $set:{\n        template: objectid(msg.id)\n    }\n    }\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1270,
        "y": 540,
        "wires": [
            [
                "6a2b7fc3ddea8ee0"
            ]
        ]
    },
    {
        "id": "6a2b7fc3ddea8ee0",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1520,
        "y": 540,
        "wires": [
            [
                "c645c0b7c4eea5a8"
            ]
        ]
    },
    {
        "id": "c645c0b7c4eea5a8",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "function 535",
        "func": "msg.collection = 'tasks';\n\n\nmsg.payload ={\n\n}\n\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1635,
        "y": 540,
        "wires": [
            [
                "1db316312e20508c"
            ]
        ],
        "l": false
    },
    {
        "id": "1db316312e20508c",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1770,
        "y": 540,
        "wires": [
            [
                "5d807e7665f5f5d7"
            ]
        ]
    },
    {
        "id": "eaabddecfcf633c9",
        "type": "array-loop",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "",
        "key": "count",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 2000,
        "y": 540,
        "wires": [
            [
                "01b3a72edd22ed84"
            ],
            [
                "1aeb69b887617149"
            ]
        ]
    },
    {
        "id": "5d807e7665f5f5d7",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "function 536",
        "func": "msg.array = msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1875,
        "y": 540,
        "wires": [
            [
                "eaabddecfcf633c9"
            ]
        ],
        "l": false
    },
    {
        "id": "1aeb69b887617149",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "function 537",
        "func": "msg.collection = 'projectsTasks';\ndelete msg.payload._id\nlet _id = objectid()\n\nmsg.payload = {\n    _id,\n   ...msg.payload,\n    startDate: global.get(\"convert_date\"),\n    deadline: global.get(\"convert_dateplusdays\"),\n    key: _id,\n    client: '',\n    clientName: '',\n    customer: '',\n    difference: '',\n    projectTemplateId: objectid(msg.id),\n    deleted: false,\n    status:\"Драфт\",\n    createdAt: global.get(\"convert_date\"),\n    files: [],\n    updatedAt: global.get(\"convert_date\"),  \n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1910,
        "y": 620,
        "wires": [
            [
                "86be7b836191a995"
            ]
        ]
    },
    {
        "id": "86be7b836191a995",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2180,
        "y": 620,
        "wires": [
            [
                "eaabddecfcf633c9"
            ]
        ]
    },
    {
        "id": "03e28db711080d9d",
        "type": "http response",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "",
        "statusCode": "200",
        "headers": {},
        "x": 2340,
        "y": 520,
        "wires": []
    },
    {
        "id": "01b3a72edd22ed84",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "g": "bf1873d6733e8bc7",
        "name": "function 623",
        "func": "msg.payload = {\n    data: 'Проєкт створений успішно'\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2190,
        "y": 520,
        "wires": [
            [
                "03e28db711080d9d"
            ]
        ]
    },
    {
        "id": "c824b7ef1fdaf155",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "function 640",
        "func": "\nmsg.collection = 'section'\nmsg.query = {\n    _id: objectid('65732fca046b1b1000001361')\n}\n\nmsg.payload ={\n    $push:{\n        projectIds: objectid(msg._id)\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1310,
        "y": 400,
        "wires": [
            [
                "5f0e9567ea0c8ccd"
            ]
        ]
    },
    {
        "id": "5f0e9567ea0c8ccd",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1540,
        "y": 400,
        "wires": [
            [
                "0de263394dd94733"
            ]
        ]
    },
    {
        "id": "0de263394dd94733",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "function 641",
        "func": "\nmsg.collection = 'section'\nmsg.query = {\n    _id: objectid('65732fca046b1b1000001362')\n}\n\nmsg.payload ={\n    $push:{\n        projectIds: objectid(msg._id)\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1710,
        "y": 400,
        "wires": [
            [
                "1b87af3185bcd7d9"
            ]
        ]
    },
    {
        "id": "1b87af3185bcd7d9",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1880,
        "y": 400,
        "wires": [
            [
                "dbbedf8751d5fc19"
            ]
        ]
    },
    {
        "id": "bc2359cc908e7f4a",
        "type": "debug",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "debug 554",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 260,
        "wires": []
    },
    {
        "id": "7af5af1cd2ca8998",
        "type": "inject",
        "z": "dbcf23dd39eba172",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1360,
        "wires": [
            [
                "2f6b732baa525f97"
            ]
        ]
    },
    {
        "id": "2f6b732baa525f97",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "function 672",
        "func": "msg.collection = 'tasks';\n\n\nmsg.payload ={\n   \n}\n\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 385,
        "y": 1360,
        "wires": [
            [
                "f8bcbbd2f906e33f"
            ]
        ],
        "l": false
    },
    {
        "id": "f8bcbbd2f906e33f",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 1360,
        "wires": [
            [
                "72a59e77dd2754b4"
            ]
        ]
    },
    {
        "id": "72a59e77dd2754b4",
        "type": "debug",
        "z": "dbcf23dd39eba172",
        "name": "debug 563",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 1300,
        "wires": []
    },
    {
        "id": "36c614938f573721",
        "type": "inject",
        "z": "dbcf23dd39eba172",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 1600,
        "wires": [
            [
                "b665279c2d41e2ba"
            ]
        ]
    },
    {
        "id": "b665279c2d41e2ba",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "function 673",
        "func": "msg.collection = 'section';\n\n\nmsg.payload ={\n\n}\n\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 305,
        "y": 1600,
        "wires": [
            [
                "d483c3daf880a470"
            ]
        ],
        "l": false
    },
    {
        "id": "d483c3daf880a470",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 440,
        "y": 1600,
        "wires": [
            [
                "39f9497a962cfb95"
            ]
        ]
    },
    {
        "id": "39f9497a962cfb95",
        "type": "debug",
        "z": "dbcf23dd39eba172",
        "name": "debug 564",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 610,
        "y": 1600,
        "wires": []
    },
    {
        "id": "a5c3700907239eb3",
        "type": "mongodb out",
        "z": "dbcf23dd39eba172",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 480,
        "y": 1680,
        "wires": []
    },
    {
        "id": "7af90a8c5780313c",
        "type": "inject",
        "z": "dbcf23dd39eba172",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 1680,
        "wires": [
            [
                "f76c82a3198c042c"
            ]
        ]
    },
    {
        "id": "f76c82a3198c042c",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "function 674",
        "func": "msg.collection = 'projects';\n\n\nmsg.payload ={\n    // _id: objectid(\"658b41ec948345120000091b\")\n}\n\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 345,
        "y": 1680,
        "wires": [
            [
                "a5c3700907239eb3"
            ]
        ],
        "l": false
    },
    {
        "id": "146cfc68628a839b",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "function 675",
        "func": "msg.array = msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1420,
        "wires": [
            [
                "d5a72a05ccb0bd10"
            ]
        ]
    },
    {
        "id": "d5a72a05ccb0bd10",
        "type": "array-loop",
        "z": "dbcf23dd39eba172",
        "name": "",
        "key": "count",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 860,
        "y": 1360,
        "wires": [
            [
                "72a59e77dd2754b4"
            ],
            [
                "cbd9dce74794b354"
            ]
        ]
    },
    {
        "id": "cbd9dce74794b354",
        "type": "function",
        "z": "dbcf23dd39eba172",
        "name": "delete project",
        "func": "msg.collection = 'tasks';\n\nmsg.query = {\n    \"_id\": objectid(msg.payload._id)\n}\n\nmsg.payload = {\n    $set: {\n        startDate :\"\"\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 760,
        "y": 1460,
        "wires": [
            [
                "9c65762af52de6df"
            ]
        ]
    },
    {
        "id": "9c65762af52de6df",
        "type": "link call",
        "z": "dbcf23dd39eba172",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1020,
        "y": 1460,
        "wires": [
            [
                "d5a72a05ccb0bd10"
            ]
        ]
    },
    {
        "id": "e9f6f901262137a7",
        "type": "debug",
        "z": "dbcf23dd39eba172",
        "g": "0bed0c28c4bac75e",
        "name": "debug 578",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 410,
        "y": 540,
        "wires": []
    },
    {
        "id": "955bbd52b897ea6a",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "url": "/createNewContract",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 140,
        "wires": [
            [
                "1eb58dfc3c53652e"
            ]
        ]
    },
    {
        "id": "66e3bf81ccba914b",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "",
        "url": "/uploadContractFile",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 560,
        "wires": [
            [
                "d19579b8ec9353b5"
            ]
        ]
    },
    {
        "id": "919fa0c142ac67a0",
        "type": "file",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 560,
        "y": 560,
        "wires": [
            [
                "f9eb5e7b5755354f"
            ]
        ]
    },
    {
        "id": "d19579b8ec9353b5",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "function 492",
        "func": "\n\nmsg.fromApp = msg.payload\nmsg.payload = msg.req.files[0].buffer;\nmsg.path = `/data/documents/${msg.req.files[0].originalname}`\n// msg.path = `/data/documents/test from ubos.txt`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 560,
        "wires": [
            [
                "919fa0c142ac67a0"
            ]
        ]
    },
    {
        "id": "3ac08972c417107c",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 560,
        "wires": []
    },
    {
        "id": "f8107261ba917794",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "url": "/getContracts",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 60,
        "wires": [
            [
                "5a65c0579fd30460"
            ]
        ]
    },
    {
        "id": "5a65c0579fd30460",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 516",
        "func": "\n\nmsg.collection = \"contracts\";\n\nmsg.payload = [\n    {\n        $match: {\n            projectId: objectid(msg.req.query._id),\n            deleted:false\n        }\n    },\n    {\n        $lookup: {\n            from: \"counterparties\",\n            localField: \"client\",\n            foreignField: \"_id\",\n            as: \"clientInfo\"\n        }\n    },\n    {\n        $addFields: {\n            clientName: {\n                $arrayElemAt: [\"$clientInfo.name\", 0]\n            }\n        }\n    },\n    {\n        $project: {\n            clientInfo: 0 \n        }\n    }\n];\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 370,
        "y": 60,
        "wires": [
            [
                "01191c563f0a44b2"
            ]
        ]
    },
    {
        "id": "01191c563f0a44b2",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 580,
        "y": 60,
        "wires": [
            [
                "c1145e3ed344a9a6"
            ]
        ]
    },
    {
        "id": "d680877d36b6e41e",
        "type": "subflow:9ffc66369df29712",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "x": 950,
        "y": 60,
        "wires": [
            [
                "01a2bbc33f521f83"
            ]
        ]
    },
    {
        "id": "c1145e3ed344a9a6",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 517",
        "func": "msg.fromDB = msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 60,
        "wires": [
            [
                "d680877d36b6e41e"
            ]
        ]
    },
    {
        "id": "01a2bbc33f521f83",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 518",
        "func": "\nmsg.payload = [\n    {\n        key: \"65739de7046b1b1000001d12\",\n        name: \"Тип контрагенту: Замовник\",\n        type: \"\",\n        isAction: true,\n        children: msg.fromDB.filter(e => e.type === \"Замовник\")\n            .map(e => {\n                const childObject = {};\n                for (const key in e) {\n                    if (Array.isArray(e[key]) && e[key].length > 0) {\n                        // Якщо властивість - масив, створюємо об'єкт із JSON-строкою ключа та JSON-строкою значення масиву так треба для структури таблиці\n                        childObject[key] = JSON.stringify(e[key]);\n                    } else {\n                        // Якщо властивість не є масивом, просто додаємо її до об'єкта\n                        childObject[key] = e[key];\n                    }\n                }\n                return childObject;\n            })\n    },\n    {\n        key: \"65739de7046b1b1000001d13\",\n        name: \"Тип контрагенту: Підрядник\",\n        isAction: true,\n        children: msg.fromDB.filter(e => e.type === \"Підрядник\")\n            .map(e => {\n                const childObject = {};\n                for (const key in e) {\n                    if (Array.isArray(e[key]) && e[key].length > 0) {\n                        childObject[key] = JSON.stringify(e[key]);\n                    } else {\n                        childObject[key] = e[key];\n                    }\n                }\n                return childObject;\n            })\n    }\n];\n\nreturn msg;\n;\n\n\n\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 60,
        "wires": [
            [
                "c7948033242081f6"
            ]
        ]
    },
    {
        "id": "db57a9b6cce779b2",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1490,
        "y": 60,
        "wires": []
    },
    {
        "id": "d75a2b0757bb7917",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 660,
        "y": 140,
        "wires": [
            [
                "745b5b49a4a49d75"
            ]
        ]
    },
    {
        "id": "745b5b49a4a49d75",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 140,
        "wires": []
    },
    {
        "id": "53351ac003d9be83",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "",
        "url": "/getCounterpartiesforSelect",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 500,
        "wires": [
            [
                "5cdf8275af0c20a2"
            ]
        ]
    },
    {
        "id": "5b8f9d5440abebde",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 640,
        "y": 500,
        "wires": [
            [
                "3a4e62d715309e7d"
            ]
        ]
    },
    {
        "id": "5cdf8275af0c20a2",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "from app",
        "func": "// Вказуємо назву колекції\nmsg.collection = 'counterparties';\n\n// Вказуємо дані для вставки або оновлення\nmsg.payload = {\n    deleted: false\n};\n\n// Вказуємо поля для вибірки\nmsg.projection = {\n    _id: 1,\n    name: 1\n};\n\n// Повертаємо об'єкт msg\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 460,
        "y": 500,
        "wires": [
            [
                "5b8f9d5440abebde"
            ]
        ]
    },
    {
        "id": "ad3ee56a708222ae",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 990,
        "y": 500,
        "wires": []
    },
    {
        "id": "3a4e62d715309e7d",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "function 527",
        "func": "msg.payload = msg.payload.map(e=>{\n    return { \"label\": e.name, \"value\":e._id }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 500,
        "wires": [
            [
                "ad3ee56a708222ae"
            ]
        ]
    },
    {
        "id": "f9eb5e7b5755354f",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "20afcaf136d6dde7",
        "name": "function 529",
        "func": "\nconst fileName = msg.req.files[0].originalname;\nconst parts = fileName.split('.');\nconst extension = parts[parts.length - 1];\nconst uppercaseExtension = extension.toUpperCase();\n\n// Приклад об'єкту files\nlet newFiles = { fileName, version: \"v1\",fileId:objectid(), type: uppercaseExtension, date: global.get(\"convert_date\"),deleted:false };\nmsg.payload = newFiles\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 710,
        "y": 560,
        "wires": [
            [
                "3ac08972c417107c"
            ]
        ]
    },
    {
        "id": "1c8602006144e782",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "url": "/getAllTasks",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 1000,
        "wires": [
            [
                "5fb97f652fa207e6"
            ]
        ]
    },
    {
        "id": "1c583ec9d72ccdf5",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 559",
        "func": "msg.collection = 'projectsTasks';\n\n\nmsg.payload ={\n    projectTemplateId: objectid(msg.payload[0].template)\n}\nmsg.projection = {\nname: 1,\n_id:1,\nstatus:1\n};\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 615,
        "y": 1000,
        "wires": [
            [
                "8028088e703d14df"
            ]
        ],
        "l": false
    },
    {
        "id": "8028088e703d14df",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 740,
        "y": 1000,
        "wires": [
            [
                "483a635e7d5b0335"
            ]
        ]
    },
    {
        "id": "5fb97f652fa207e6",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 560",
        "func": "msg.collection = 'projects';\n\n\nmsg.payload ={\n  _id:objectid(msg.req.query._id)\n}\n\nmsg.projection = {\n  template:1\n};\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 1000,
        "wires": [
            [
                "ff99d1196e942c2c"
            ]
        ]
    },
    {
        "id": "ff99d1196e942c2c",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 500,
        "y": 1000,
        "wires": [
            [
                "1c583ec9d72ccdf5"
            ]
        ]
    },
    {
        "id": "9aca235bb533829e",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1110,
        "y": 1000,
        "wires": []
    },
    {
        "id": "483a635e7d5b0335",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 561",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n   label:e.name,\n        value:e._id,\n        status:e.status\n    }\n})\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 1000,
        "wires": [
            [
                "9aca235bb533829e"
            ]
        ]
    },
    {
        "id": "a0cac1aae940342b",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "url": "/addRelatedTasks",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 1120,
        "wires": [
            [
                "1af8005243b9f020",
                "3c9f62b170fccd18"
            ]
        ]
    },
    {
        "id": "1af8005243b9f020",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 562",
        "func": "msg.collection = \"contracts\";\nmsg.taskSum =msg.payload?.taskSum\nmsg.taskId = msg.payload.taskId\nmsg.contractType = msg.payload.type ? \"Підрядник\" : \"Замовник\"\nmsg.contractSum = msg.payload.sum\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId),\n    \"relatedTasks.taskId\": { $ne: msg.payload.taskId }\n}\n\nlet task = {\n    \"taskId\": msg.payload.taskId,\n    \"taskSum\": msg.payload.taskSum\n}\nnode.warn(task);\nmsg.payload = {\n    $addToSet: {\n        relatedTasks: task\n    }   \n\n}\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 420,
        "y": 1120,
        "wires": [
            [
                "09e8fd33ae39701d",
                "3c9f62b170fccd18"
            ]
        ]
    },
    {
        "id": "09e8fd33ae39701d",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 630,
        "y": 1120,
        "wires": [
            [
                "48d6f5054425ddcd"
            ]
        ]
    },
    {
        "id": "802ef173e7f2b9c4",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1770,
        "y": 1120,
        "wires": []
    },
    {
        "id": "8b24f2b4ee9bd9ac",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "url": "/getRelatedTasks",
        "method": "get",
        "upload": true,
        "swaggerDoc": "",
        "x": 180,
        "y": 1060,
        "wires": [
            [
                "1d95d265265fb653"
            ]
        ]
    },
    {
        "id": "1d95d265265fb653",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 570",
        "func": "msg.collection = \"contracts\";\n\nmsg.payload= {\n    _id: objectid(msg.req.query.contractId),\n    deleted:false\n}\n\nmsg.projection = {\n    relatedTasks: 1\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1060,
        "wires": [
            [
                "a955652eb0e3dcd2"
            ]
        ]
    },
    {
        "id": "a955652eb0e3dcd2",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 1060,
        "wires": [
            [
                "6798f5ff0cf2801c"
            ]
        ]
    },
    {
        "id": "6798f5ff0cf2801c",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1060,
        "wires": []
    },
    {
        "id": "067b68b976661a9b",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "url": "/deleteContract",
        "method": "delete",
        "upload": true,
        "swaggerDoc": "",
        "x": 180,
        "y": 360,
        "wires": [
            [
                "842fa0ed416bc586"
            ]
        ]
    },
    {
        "id": "842fa0ed416bc586",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 571",
        "func": "msg.collection = \"contracts\";\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId)\n}\nmsg.payload = {\n    $set: {\n        deleted:true,\n        updatedAt: global.get(\"convert_date\")\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 470,
        "y": 360,
        "wires": [
            [
                "4e61643d7e2eeef4"
            ]
        ]
    },
    {
        "id": "4e61643d7e2eeef4",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 680,
        "y": 360,
        "wires": [
            [
                "f11a6518230dad19"
            ]
        ]
    },
    {
        "id": "f11a6518230dad19",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 830,
        "y": 360,
        "wires": []
    },
    {
        "id": "f5cba08970c55c28",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "url": "/addAdminExpenses",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 760,
        "wires": [
            [
                "0aa2797e5bdaaa0b"
            ]
        ]
    },
    {
        "id": "0aa2797e5bdaaa0b",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "function 572",
        "func": "msg.collection = \"contracts\";\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId)\n}\nmsg.payload = {\n    $push: {\n        adminExpenses: {\n            _id: objectid(),\n            ...msg.payload\n        }\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 760,
        "wires": [
            [
                "372117134362e856"
            ]
        ]
    },
    {
        "id": "372117134362e856",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 760,
        "wires": [
            [
                "dff55f8282cda739"
            ]
        ]
    },
    {
        "id": "dff55f8282cda739",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 760,
        "wires": []
    },
    {
        "id": "a9c8a0dc342b6248",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "url": "/getAdminExpenses",
        "method": "get",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 700,
        "wires": [
            [
                "c2e21cdb4be184ba"
            ]
        ]
    },
    {
        "id": "c2e21cdb4be184ba",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "function 573",
        "func": "msg.collection = \"contracts\";\n\nmsg.payload= {\n    _id: objectid(msg.req.query.contractId),\n    deleted:false\n}\n\nmsg.projection = {\n    adminExpenses: 1\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 700,
        "wires": [
            [
                "3e021b2d1294a61f"
            ]
        ]
    },
    {
        "id": "3e021b2d1294a61f",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 700,
        "wires": [
            [
                "2dd98b703d8eb65f"
            ]
        ]
    },
    {
        "id": "2dd98b703d8eb65f",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 700,
        "wires": []
    },
    {
        "id": "f1830b6d3371058a",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "url": "/addRelatedContracts",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 200,
        "y": 1560,
        "wires": [
            [
                "af3bb84c1734c5e2"
            ]
        ]
    },
    {
        "id": "af3bb84c1734c5e2",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "function 574",
        "func": "msg.collection = \"contracts\";\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId)\n}\nmsg.payload = {\n    $push: {\n        relatedContracts: {\n            contractIds: objectid(msg.payload.contractIds)\n        }\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1560,
        "wires": [
            [
                "483fa3d78befdd4c"
            ]
        ]
    },
    {
        "id": "483fa3d78befdd4c",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 1560,
        "wires": [
            [
                "fb8f03f18209b637"
            ]
        ]
    },
    {
        "id": "fb8f03f18209b637",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1560,
        "wires": []
    },
    {
        "id": "57bfa3b6dd3879df",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "url": "/getRelatedContracts",
        "method": "get",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 1500,
        "wires": [
            [
                "df31f16ea9437ba2"
            ]
        ]
    },
    {
        "id": "df31f16ea9437ba2",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "function 575",
        "func": "msg.collection = \"contracts\";\n\nmsg.payload= {\n    _id: objectid(msg.req.query.contractId),\n    deleted:false\n}\n\nmsg.projection = {\n    relatedContracts: 1\n};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1500,
        "wires": [
            [
                "f0c4830b1efc7b8f"
            ]
        ]
    },
    {
        "id": "f0c4830b1efc7b8f",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 1500,
        "wires": [
            [
                "1cb2b27a899b2e3f"
            ]
        ]
    },
    {
        "id": "1cb2b27a899b2e3f",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1500,
        "wires": []
    },
    {
        "id": "b6727db62d61220f",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "url": "/getAllContractsForSelect",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 1440,
        "wires": [
            [
                "1669b0e2a0c5c615"
            ]
        ]
    },
    {
        "id": "1669b0e2a0c5c615",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "function 576",
        "func": "\n\nmsg.collection = \"contracts\";\n\nmsg.payload = {\n            projectId: objectid(msg.req.query._id),\n            deleted:false\n        }\n \n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 450,
        "y": 1440,
        "wires": [
            [
                "a2460af9080770ea"
            ]
        ]
    },
    {
        "id": "a2460af9080770ea",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 1440,
        "wires": [
            [
                "bbe5472f11826c06"
            ]
        ]
    },
    {
        "id": "401f3f2ec5428305",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 970,
        "y": 1440,
        "wires": []
    },
    {
        "id": "bbe5472f11826c06",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "function 577",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n        label:e.name,\n        value:e._id,\n        status:e.status,\n        type:e.type,\n        sum:e.sum,\n        contractType: e.contractType\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1440,
        "wires": [
            [
                "401f3f2ec5428305"
            ]
        ]
    },
    {
        "id": "5e5f504ed2d662c0",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "url": "/updateRelatedTasks",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 1280,
        "wires": [
            [
                "2f47bfacc338c9bc"
            ]
        ]
    },
    {
        "id": "ec498974f9b3c857",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 583",
        "func": "msg.collection = \"contracts\";\nmsg.oldSum = msg.payload[0].currentTask.taskSum\nmsg.contractType = msg.payload[0].type\nlet _id = msg.req.query.contractId;\n\nmsg.query =\n    { \"_id\": _id, \"relatedTasks.taskId\": msg.taskId };\n    \nmsg.payload = {\n    \"$set\": {\n        \"relatedTasks.$.taskId\": msg.taskId,\n        \"relatedTasks.$.taskSum\": msg.taskSum\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 810,
        "y": 1280,
        "wires": [
            [
                "038bcf957fc24d7c",
                "a76d9678e0bca051"
            ]
        ]
    },
    {
        "id": "038bcf957fc24d7c",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1000,
        "y": 1280,
        "wires": [
            [
                "a76d9678e0bca051",
                "ca008617b71152e8"
            ]
        ]
    },
    {
        "id": "d90fa795bd833f4f",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1990,
        "y": 1280,
        "wires": []
    },
    {
        "id": "d0742a0f2f1ae384",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "url": "/deleteRelatedTasks",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 200,
        "y": 1320,
        "wires": [
            [
                "edd6f70fef927d09"
            ]
        ]
    },
    {
        "id": "edd6f70fef927d09",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 584",
        "func": "msg.collection = \"contracts\";\n\nlet _id = msg.req.query.contractId;\nlet taskIdToUpdate = msg.req.query.taskId;\n\n\n\n\nmsg.query = { \"_id\": objectid(_id) };\nmsg.payload = {\n    $pull: {\n        \"relatedTasks\": {\n            \"taskId\": taskIdToUpdate\n        }\n    }\n};\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1320,
        "wires": [
            [
                "d83b27f1656d9ffa"
            ]
        ]
    },
    {
        "id": "d83b27f1656d9ffa",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 1320,
        "wires": [
            [
                "83787c5b17f6e95f"
            ]
        ]
    },
    {
        "id": "83787c5b17f6e95f",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1320,
        "wires": []
    },
    {
        "id": "6c9439a0ebaa9a90",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "url": "/updateAdminExpenses",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 200,
        "y": 820,
        "wires": [
            [
                "60cd9a9ccb5ed6c0"
            ]
        ]
    },
    {
        "id": "60cd9a9ccb5ed6c0",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "function 585",
        "func": "msg.collection = \"contracts\";\n\nlet _id = msg.req.query.contractId;\nlet taskIdToUpdate = msg.payload.taskId;\n\n\nlet newTaskSum = msg.payload?.taskSum;\n\nmsg.query = { \"_id\": _id, \"adminExpenses._id\": objectid(taskIdToUpdate) };\n\nmsg.payload = {\n    $set: {\n        \"adminExpenses.$.taskSum\": newTaskSum\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 450,
        "y": 820,
        "wires": [
            [
                "5f1fd2608e9174e6"
            ]
        ]
    },
    {
        "id": "5f1fd2608e9174e6",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 660,
        "y": 820,
        "wires": [
            [
                "da89b3386508286f"
            ]
        ]
    },
    {
        "id": "da89b3386508286f",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 820,
        "wires": []
    },
    {
        "id": "ae968d5778c122f5",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "url": "/deleteAdminExpenses",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 200,
        "y": 880,
        "wires": [
            [
                "5cd8a26093900df4"
            ]
        ]
    },
    {
        "id": "5cd8a26093900df4",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "function 586",
        "func": "msg.collection = \"contracts\";\n\nlet _id = msg.req.query.contractId;\nlet taskIdToUpdate = msg.payload.taskId;\n\n\nmsg.query = { \"_id\": _id, \"adminExpenses._id\": objectid(taskIdToUpdate) };\n\nmsg.payload = {\n    $set: {\n        // \"adminExpenses.$._id\": taskIdToUpdate,\n        \"adminExpenses.$.deleted\": true,\n        \"adminExpenses.$.updatedAt\": Date.now(),\n\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 880,
        "wires": [
            [
                "830c78036aabcf14"
            ]
        ]
    },
    {
        "id": "830c78036aabcf14",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 610,
        "y": 880,
        "wires": [
            [
                "0a55ba32b5e920b2"
            ]
        ]
    },
    {
        "id": "0a55ba32b5e920b2",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "989e4177d031381d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 760,
        "y": 880,
        "wires": []
    },
    {
        "id": "9a2913b59ad43a2f",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "url": "/terminateContract",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 190,
        "y": 1620,
        "wires": [
            [
                "ceb1e01ecf9c388a"
            ]
        ]
    },
    {
        "id": "ceb1e01ecf9c388a",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "function 587",
        "func": "msg.collection = \"contracts\";\n\nlet _id = msg.req.query.contractId;\nlet contractsIds = msg.payload.contractsIds;\n\nconst contractsIdsObjectId = objectid(contractsIds);\n\nmsg.query = { \"_id\":objectid(_id) };\nmsg.payload = {\n    $pull: {\n        \"relatedContracts\": {\n            \"contractIds\": contractsIdsObjectId\n    }\n}};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1620,
        "wires": [
            [
                "2f6c77a5bd6b17bc"
            ]
        ]
    },
    {
        "id": "2f6c77a5bd6b17bc",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 620,
        "y": 1620,
        "wires": [
            [
                "13c428ce28cf8aab"
            ]
        ]
    },
    {
        "id": "13c428ce28cf8aab",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "a7efc7ad66cb4641",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1620,
        "wires": []
    },
    {
        "id": "f2d195642f902a5b",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "url": "/uploadContractFiles",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 190,
        "y": 1720,
        "wires": [
            [
                "eaeac9194da4aabf"
            ]
        ]
    },
    {
        "id": "f2853d85c0b6a608",
        "type": "file",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 580,
        "y": 1720,
        "wires": [
            [
                "a65defd60ed00b0d"
            ]
        ]
    },
    {
        "id": "eaeac9194da4aabf",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "function 614",
        "func": "\nmsg.payload = msg.req.files[0].buffer;\nmsg.path = `/data/documents/${msg.req.files[0].originalname}`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1720,
        "wires": [
            [
                "f2853d85c0b6a608"
            ]
        ]
    },
    {
        "id": "a65defd60ed00b0d",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "function 615",
        "func": "msg.collection = 'contracts';\nmsg.query={\n    _id: objectid(msg.req.query.contractId)\n};\n\nconst fileName = msg.req.files[0].originalname;\nconst parts = fileName.split('.');\nconst extension = parts[parts.length - 1];\nconst uppercaseExtension = extension.toUpperCase();\n\n// Приклад об'єкту files\nlet newFiles = { fileId: objectid(), fileName, version: \"v1\", type: uppercaseExtension, date: global.get(\"convert_date\"), deleted:false};\nmsg.payload = {\n    $push:{\n        files:  newFiles\n    }\n}\nmsg.file = newFiles\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 750,
        "y": 1720,
        "wires": [
            [
                "d7021d368575cfc0"
            ]
        ]
    },
    {
        "id": "d7021d368575cfc0",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 940,
        "y": 1720,
        "wires": [
            [
                "3202bea804e3ce2a"
            ]
        ]
    },
    {
        "id": "3202bea804e3ce2a",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "function 616",
        "func": "msg.payload = msg.file\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1720,
        "wires": [
            [
                "706092818b736ae5"
            ]
        ]
    },
    {
        "id": "706092818b736ae5",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1250,
        "y": 1720,
        "wires": []
    },
    {
        "id": "23ade0959e470859",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "url": "/getFilesFromContract",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 1780,
        "wires": [
            [
                "8dc972495afc14f0"
            ]
        ]
    },
    {
        "id": "8dc972495afc14f0",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "function 617",
        "func": "msg.collection = 'contracts';\n\nmsg.payload ={\n    _id:objectid(msg.req.query._id)\n}\n\nmsg.projection = {\n    files: 1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1780,
        "wires": [
            [
                "2bcb02a85316f5e5"
            ]
        ]
    },
    {
        "id": "2bcb02a85316f5e5",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 600,
        "y": 1780,
        "wires": [
            [
                "fbf0868688ad85e3"
            ]
        ]
    },
    {
        "id": "06d783a9d85ab013",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 1780,
        "wires": []
    },
    {
        "id": "fbf0868688ad85e3",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "function 618",
        "func": "msg.payload = msg.payload.length > 0 && msg.payload[0]?.files && msg.payload[0]?.files.length >0 ? msg.payload[0]?.files.filter(e=> e.deleted === false):[]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 1780,
        "wires": [
            [
                "06d783a9d85ab013"
            ]
        ]
    },
    {
        "id": "b60aab3c0e88747d",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "url": "/deleteFileFromContract",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 1840,
        "wires": [
            [
                "93e9cb3a1643abdb"
            ]
        ]
    },
    {
        "id": "93e9cb3a1643abdb",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "function 619",
        "func": "msg.collection = 'contracts';\nconst fileIdObjectId = objectid(msg.req.query.fileId);\nmsg.query = {\n    '_id': objectid(msg.req.query.contractId),\n    'files.fileId': fileIdObjectId \n};\n\n\nmsg.payload = {\n    $set: {\n        \"files.$.deleted\": true\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 431.880859375,
        "y": 1841.125,
        "wires": [
            [
                "0699f35de10cf859"
            ]
        ]
    },
    {
        "id": "0699f35de10cf859",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 660,
        "y": 1840,
        "wires": [
            [
                "bbe16133a378f5e5"
            ]
        ]
    },
    {
        "id": "bbe16133a378f5e5",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "1b6ca111575aced8",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 830,
        "y": 1840,
        "wires": []
    },
    {
        "id": "1eb58dfc3c53652e",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 523",
        "func": "\nmsg.collection =\"contracts\";\n\nmsg.payload={\n    ...msg.payload,\n    sum: new Intl.NumberFormat('en-US').format(msg.payload.sum),\n    projectId: objectid(msg.req.query._id),\n    client: msg.payload.client && msg.payload.client !== \"\" ? objectid(msg.payload.client):\"\",\n    contractType: msg.payload.contractType ? \"Додатковий\" : \"Основний\",\n    type: msg.payload.type ? \"Підрядник\" : \"Замовник\",\n    files: msg.payload.files && msg.payload.files !== null && msg.payload.files !== 'null' ? msg.payload.files.map(e => {\n        return {\n            ...e,\n            fileId: objectid(e.fileId),\n\n        }\n    }) :[],\n    createdAt: global.get(\"convert_date\"),\n    updatedAt: \"\",\n    deleted:false\n}\nreturn msg\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 470,
        "y": 140,
        "wires": [
            [
                "d75a2b0757bb7917"
            ]
        ]
    },
    {
        "id": "c7948033242081f6",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "convert data",
        "func": "function clearChildrenData(data) {\n    return data.map(item => {\n        if (item.children && item.children.length === 0) {\n            let dataArr = {\n                \"_id\": \"\",\n                \"name\": \"\",\n                \"status\": \"\",\n                \"type\": \"\",\n                \"client\": \"\",\n                \"contractType\": \"\",\n                \"sum\": \"\",\n                \"relatedContracts\": \"\",\n                \"relatedTasks\": \"\",\n                \"adminExpenses\": \"\",\n                \"files\": \"\",\n                \"projectId\": \"\",\n                \"createdAt\": \"\",\n                \"deleted\": \"\",\n                \"updatedAt\": \"\",\n                \"clientName\": \"\"\n            };\n\n          \n\n            // Повертаємо новий масив, додаючи об'єкт dataArr до \"children\"\n            return { ...item, children: [...item.children, dataArr] };\n        } else {\n            return item;\n        }\n    });\n}\n\n// Приклад використання функції\nconst yourData = msg.payload;\n\nconst result = clearChildrenData(yourData);\nmsg.payload = result;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 60,
        "wires": [
            [
                "db57a9b6cce779b2",
                "4c93b07221cdbc2c"
            ]
        ]
    },
    {
        "id": "afedd21cd8476d9f",
        "type": "http in",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "url": "/updateContract",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 180,
        "y": 240,
        "wires": [
            [
                "dee2cc530ca7302b"
            ]
        ]
    },
    {
        "id": "43ce92f8a2d68c14",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 569",
        "func": "msg.collection = \"contracts\";\n\n// msg.sum = msg.payload.sum && msg.payload.sum !== \"\" && msg.payload.sum !== \"null\" && msg.payload.sum !== null && msg.payload.sum !== \"undefined\" ? msg.payload.sum : '';\n// msg.relatedTasks = msg.payload.relatedTasks && msg.payload.relatedTasks !== \"\" && msg.payload.relatedTasks !== \"null\" && msg.payload.relatedTasks !== null && msg.payload.relatedTasks !== \"undefined\" ? JSON.parse(msg.payload.relatedTasks) : '';\n// msg.type = msg.payload.type ? \"Підрядник\" : \"Замовник\";\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId)\n}\nmsg.payload = {\n    $set: {\n       ...msg.oldPayload,\n        sum: new Intl.NumberFormat('en-US').format(msg.oldPayload.sum),\n        relatedTasks: msg.relatedTasks,\n        client: msg.oldPayload.client && msg.oldPayload.client !== \"\" ? objectid(msg.oldPayload.client) : \"\",\n        contractType: msg.oldPayload.contractType ? \"Додатковий\" : \"Основний\",\n        type: msg.oldPayload.type ? \"Підрядник\" : \"Замовник\",\n        files: msg.oldPayload.files && msg.oldPayload.files !== null && msg.oldPayload.files !== 'null' ? msg.oldPayload.files : [],\n        updatedAt: global.get(\"convert_date\")\n    }\n\n}\n\nreturn msg\n// if (msg.relatedTasks.length>0 && msg.sum !== msg.oldSum) {\n//     return [msg, msg];\n//     } else{\n//     return [msg, null]\n    \n//     }\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 850,
        "y": 240,
        "wires": [
            [
                "d6df89ac8abd270d",
                "b5e59ef8c474dbd2"
            ]
        ]
    },
    {
        "id": "d6df89ac8abd270d",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1040,
        "y": 240,
        "wires": [
            [
                "bc50b6ad50753784"
            ]
        ]
    },
    {
        "id": "bc50b6ad50753784",
        "type": "http response",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1230,
        "y": 240,
        "wires": []
    },
    {
        "id": "61a8d3db925de742",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "update projectsTasks summary",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.query = {\n    \"_id\": objectid(msg.payload[0]._id),\n};\n\n\n\n\n\n// \"difference\":,\n// \"customer\": \n// \"client\": \n\n// 1 Відповідно від типу договора  розрахувати правильно маржу \n// 2 Оновити саме ті поля  (з підрядником або з замовником)\n// 3 Перевірити чи все працює з іншим функціоналом (типи даних повинні бути однакові)\nlet data = {}\n\nif (msg.type === \"Замовник\") {\n    // parseFloat(clientAmount.text.replace(/,/g, '')\n    // new Intl.NumberFormat('en-US').format()\n    let totalSum = msg.sum !== msg.oldSum ? ((+msg.sum) - (+msg.oldSum)) : (+msg.sum);\n    const clientAmount = msg.payload[0].client && parseFloat(msg.payload[0].client.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) + totalSum) : (+msg.sum);\n    const newDifference = msg.payload[0].customer ? (clientAmount - parseFloat(msg.payload[0].customer.replace(/,/g, ''))) : (clientAmount - 0);\n\n    data = {\n        \"client\": new Intl.NumberFormat('en-US').format(clientAmount),\n        \"customer\": msg.payload[0].customer ? msg.payload[0].customer : '0',\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\n\nif (msg.type === \"Підрядник\") {\n    let totalSum = msg.sum !== msg.oldSum ? ((+msg.sum) - (+msg.oldSum)) : (+msg.sum);\n        \n    const customerAmount = msg.payload[0].customer && parseFloat(msg.payload[0].customer.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].customer.replace(/,/g, '')) + totalSum) : (+msg.sum);\n    const newDifference = msg.payload[0].client ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) - customerAmount) : (0 - customerAmount);\n         \n    data = {\n        \"client\": msg.payload[0].client ? msg.payload[0].client : '0',\n        \"customer\": new Intl.NumberFormat('en-US').format(customerAmount),\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\nnode.warn(data)\nmsg.payload = {\n    $set: {\n        ...data,\n        updatedAt: global.get(\"convert_date\")\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1630,
        "y": 360,
        "wires": [
            [
                "697bf9f3871fd9e6",
                "956201174fa905ba"
            ]
        ]
    },
    {
        "id": "76f7a6644dcdf9cf",
        "type": "array-loop",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "key": "count",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 1340,
        "y": 280,
        "wires": [
            [
                "c53b7c709cec0285"
            ],
            [
                "e3b0f976b7fab6da",
                "c53b7c709cec0285"
            ]
        ]
    },
    {
        "id": "7b804d228b0b44da",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "data for array-loop",
        "func": "msg.array = msg.relatedTasks\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 280,
        "wires": [
            [
                "76f7a6644dcdf9cf"
            ]
        ]
    },
    {
        "id": "697bf9f3871fd9e6",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1900,
        "y": 360,
        "wires": [
            [
                "76f7a6644dcdf9cf",
                "956201174fa905ba"
            ]
        ]
    },
    {
        "id": "e3b0f976b7fab6da",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 644",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.payload = {\n    '_id': objectid(msg.payload.taskId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1190,
        "y": 360,
        "wires": [
            [
                "9d141589bbc28a80",
                "5490da38d0c299d2"
            ]
        ]
    },
    {
        "id": "9d141589bbc28a80",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1370,
        "y": 360,
        "wires": [
            [
                "61a8d3db925de742",
                "5490da38d0c299d2"
            ]
        ]
    },
    {
        "id": "dee2cc530ca7302b",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 648",
        "func": "msg.collection = \"contracts\";\nmsg.oldPayload = msg.payload;\n\nmsg.sum = msg.payload.sum && msg.payload.sum !== \"\" && msg.payload.sum !== \"null\" && msg.payload.sum !== null && msg.payload.sum !== \"undefined\" ? msg.payload.sum : '';\n\nmsg.relatedTasks = msg.payload.relatedTasks && msg.payload.relatedTasks !== \"\" && msg.payload.relatedTasks !== \"null\" && msg.payload.relatedTasks !== null && msg.payload.relatedTasks !== \"undefined\" && msg.payload.relatedTasks.length > 0 ? JSON.parse(msg.payload.relatedTasks) : [];\nmsg.type = msg.payload.type ? \"Підрядник\" : \"Замовник\";\n\nmsg.payload = {\n    _id: objectid(msg.req.query.contractId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 370,
        "y": 240,
        "wires": [
            [
                "b539feaed9250c26"
            ]
        ]
    },
    {
        "id": "b539feaed9250c26",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 530,
        "y": 240,
        "wires": [
            [
                "284d11b060e43c49",
                "b5e59ef8c474dbd2"
            ]
        ]
    },
    {
        "id": "284d11b060e43c49",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "function 649",
        "func": "msg.oldSum = msg.payload[0].sum\nmsg.oldRelatedTasks = msg.payload[0].relatedTasks\nmsg.payload = {}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 240,
        "wires": [
            [
                "43ce92f8a2d68c14",
                "b5e59ef8c474dbd2"
            ]
        ]
    },
    {
        "id": "956201174fa905ba",
        "type": "debug",
        "z": "2fce404005fef31a",
        "name": "debug 534",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1770,
        "y": 460,
        "wires": []
    },
    {
        "id": "5490da38d0c299d2",
        "type": "debug",
        "z": "2fce404005fef31a",
        "name": "debug 535",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 460,
        "wires": []
    },
    {
        "id": "c53b7c709cec0285",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "debug 536",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1490,
        "y": 220,
        "wires": []
    },
    {
        "id": "b5e59ef8c474dbd2",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "debug 537",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 300,
        "wires": []
    },
    {
        "id": "7737bccbc88d3eb0",
        "type": "http in",
        "z": "2fce404005fef31a",
        "name": "",
        "url": "/updateContract2",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 160,
        "y": 1980,
        "wires": [
            [
                "a0c5671fd17eca51"
            ]
        ]
    },
    {
        "id": "c737544efa4da2bb",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "function 663",
        "func": "msg.collection = \"contracts\";\n\n// msg.sum = msg.payload.sum && msg.payload.sum !== \"\" && msg.payload.sum !== \"null\" && msg.payload.sum !== null && msg.payload.sum !== \"undefined\" ? msg.payload.sum : '';\n// msg.relatedTasks = msg.payload.relatedTasks && msg.payload.relatedTasks !== \"\" && msg.payload.relatedTasks !== \"null\" && msg.payload.relatedTasks !== null && msg.payload.relatedTasks !== \"undefined\" ? JSON.parse(msg.payload.relatedTasks) : '';\n// msg.type = msg.payload.type ? \"Підрядник\" : \"Замовник\";\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId)\n}\nmsg.payload = {\n    $set: {\n       ...msg.oldPayload,\n        relatedTasks: msg.relatedTasks,\n        client: msg.oldPayload.client && msg.oldPayload.client !== \"\" ? objectid(msg.oldPayload.client) : \"\",\n        contractType: msg.oldPayload.contractType ? \"Додатковий\" : \"Основний\",\n        type: msg.oldPayload.type ? \"Підрядник\" : \"Замовник\",\n        files: msg.oldPayload.files && msg.oldPayload.files !== null && msg.oldPayload.files !== 'null' ? msg.oldPayload.files : [],\n        updatedAt: global.get(\"convert_date\")\n    }\n\n}\nif (msg.relatedTasks.length>0) {\n    return [msg, msg];\n    } else{\n    return [msg, null]\n    \n    }\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 850,
        "y": 1980,
        "wires": [
            [
                "2a22aaa43ac480ec"
            ],
            [
                "ab9514bd3ef221a3"
            ]
        ]
    },
    {
        "id": "2a22aaa43ac480ec",
        "type": "link call",
        "z": "2fce404005fef31a",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1080,
        "y": 1980,
        "wires": [
            [
                "5dcc5ef853bfa402"
            ]
        ]
    },
    {
        "id": "5dcc5ef853bfa402",
        "type": "http response",
        "z": "2fce404005fef31a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1270,
        "y": 1980,
        "wires": []
    },
    {
        "id": "91c9d664d9944fc0",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "update projectsTasks summary",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.query = {\n    \"_id\": objectid(msg.payload[0]._id),\n};\n\n// \"difference\":,\n// \"customer\": \n// \"client\": \n\n// 1 Відповідно від типу договора  розрахувати правильно маржу \n// 2 Оновити саме ті поля  (з підрядником або з замовником)\n// 3 Перевірити чи все працює з іншим функціоналом (типи даних повинні бути однакові)\nlet data = {}\nnode.warn(msg.payload)\nif (msg.type === \"Замовник\") {\n    // parseFloat(clientAmount.text.replace(/,/g, '')\n    // new Intl.NumberFormat('en-US').format()\n    let totalSum = msg.sum !== msg.oldSum ? ((+msg.sum) - (+msg.oldSum)) : (+msg.sum);\n    const clientAmount = msg.payload[0].client && parseFloat(msg.payload[0].client.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) + totalSum) : (+msg.sum);\n    const newDifference = msg.payload[0].customer ? (clientAmount - parseFloat(msg.payload[0].customer.replace(/,/g, ''))) : (clientAmount - 0);\n    node.warn(parseFloat(msg.payload[0].client.replace(/,/g, '')))\n    node.warn(clientAmount)\n    node.warn(newDifference)\n\n    data = {\n        \"client\": new Intl.NumberFormat('en-US').format(clientAmount),\n        \"customer\": msg.payload[0].customer ? msg.payload[0].customer : '0',\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\n\nif (msg.type === \"Підрядник\") {\n    let totalSum = msg.sum !== msg.oldSum ? ((+msg.sum) - (+msg.oldSum)) : (+msg.sum);\n        \n    const customerAmount = msg.payload[0].customer && parseFloat(msg.payload[0].customer.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].customer.replace(/,/g, '')) + totalSum) : (+msg.sum);\n    const newDifference = msg.payload[0].client ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) - customerAmount) : (0 - customerAmount);\n    node.warn(customerAmount)\n    node.warn(newDifference)\n    node.warn(parseFloat(msg.payload[0].customer.replace(/,/g, '')))\n      \n    data = {\n        \"client\": msg.payload[0].client ? msg.payload[0].client : '0',\n        \"customer\": new Intl.NumberFormat('en-US').format(customerAmount),\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\nnode.warn(data)\nmsg.payload = {\n    $set: {\n        ...data,\n        updatedAt: global.get(\"convert_date\")\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1670,
        "y": 2100,
        "wires": [
            [
                "957d28afb3f19e52"
            ]
        ]
    },
    {
        "id": "c075181840f4b270",
        "type": "array-loop",
        "z": "2fce404005fef31a",
        "name": "",
        "key": "count",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 1380,
        "y": 2020,
        "wires": [
            [
                "acd88e5ce330660b"
            ],
            [
                "aa9a98b4c20830a8",
                "acd88e5ce330660b"
            ]
        ]
    },
    {
        "id": "ab9514bd3ef221a3",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "data for array-loop",
        "func": "let array \n\nlet checkArr = []\n\nmsg.oldTasks.forEach(oldE => {\n    let found = msg.relatedTasks.some(e => oldE._id === e._id);\n    if (!found) {\n        checkArr.push(oldE);\n    }\n});\n\nif (checkArr.length > 0 && msg.sum !== msg.oldSum) array = checkArr\nif(msg.sum !== msg.oldSum) array = msg.relatedTasks\nif (checkArr.length === 0 && msg.sum === msg.oldSum) array = []\n\nmsg.array = array\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 2040,
        "wires": [
            [
                "c075181840f4b270"
            ]
        ]
    },
    {
        "id": "957d28afb3f19e52",
        "type": "link call",
        "z": "2fce404005fef31a",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1940,
        "y": 2100,
        "wires": [
            [
                "c075181840f4b270"
            ]
        ]
    },
    {
        "id": "aa9a98b4c20830a8",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "function 664",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.payload = {\n    '_id': objectid(msg.payload.taskId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1230,
        "y": 2100,
        "wires": [
            [
                "85b6bb0305caa3f1"
            ]
        ]
    },
    {
        "id": "85b6bb0305caa3f1",
        "type": "link call",
        "z": "2fce404005fef31a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1410,
        "y": 2100,
        "wires": [
            [
                "91c9d664d9944fc0"
            ]
        ]
    },
    {
        "id": "a0c5671fd17eca51",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "function 665",
        "func": "msg.collection = \"contracts\";\nmsg.oldPayload = msg.payload;\n\nmsg.sum = msg.payload.sum && msg.payload.sum !== \"\" && msg.payload.sum !== \"null\" && msg.payload.sum !== null && msg.payload.sum !== \"undefined\" ? msg.payload.sum : '';\n\nmsg.relatedTasks = msg.payload.relatedTasks && msg.payload.relatedTasks !== \"\" && msg.payload.relatedTasks !== \"null\" && msg.payload.relatedTasks !== null && msg.payload.relatedTasks !== \"undefined\" && msg.payload.relatedTasks.length > 0 ? JSON.parse(msg.payload.relatedTasks) : [];\nmsg.type = msg.payload.type ? \"Підрядник\" : \"Замовник\";\n\nmsg.payload = {\n    _id: objectid(msg.req.query.contractId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 1980,
        "wires": [
            [
                "fbca07aa00b124fb"
            ]
        ]
    },
    {
        "id": "fbca07aa00b124fb",
        "type": "link call",
        "z": "2fce404005fef31a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 510,
        "y": 1980,
        "wires": [
            [
                "b4c2c0fa3eb51b2a",
                "9ed08598265e0b48"
            ]
        ]
    },
    {
        "id": "b4c2c0fa3eb51b2a",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "function 666",
        "func": "msg.oldSum = msg.payload[0].sum\nmsg.oldRelatedTasks = msg.payload[0].relatedTasks\nmsg.payload = {}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1980,
        "wires": [
            [
                "c737544efa4da2bb"
            ]
        ]
    },
    {
        "id": "acd88e5ce330660b",
        "type": "debug",
        "z": "2fce404005fef31a",
        "name": "debug 538",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 1960,
        "wires": []
    },
    {
        "id": "9ed08598265e0b48",
        "type": "debug",
        "z": "2fce404005fef31a",
        "name": "debug 539",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 2040,
        "wires": []
    },
    {
        "id": "95fd3a97c18b1720",
        "type": "inject",
        "z": "2fce404005fef31a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1280,
        "y": 620,
        "wires": [
            [
                "72a5439a20838b91"
            ]
        ]
    },
    {
        "id": "8aea1240fde938b4",
        "type": "debug",
        "z": "2fce404005fef31a",
        "name": "debug 540",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1810,
        "y": 620,
        "wires": []
    },
    {
        "id": "72a5439a20838b91",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "function 667",
        "func": "msg.collection = 'projectsTasks';\nmsg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 620,
        "wires": [
            [
                "d9c41a107c2ec4d3"
            ]
        ]
    },
    {
        "id": "d9c41a107c2ec4d3",
        "type": "link call",
        "z": "2fce404005fef31a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1630,
        "y": 620,
        "wires": [
            [
                "8aea1240fde938b4"
            ]
        ]
    },
    {
        "id": "defee9fcc890722e",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "update projectsTasks summary",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.query = {\n    \"_id\": objectid(msg.taskId),\n};\n\n\n// \"difference\":,\n// \"customer\": \n// \"client\": \n\n// 1 Відповідно від типу договора  розрахувати правильно маржу \n// 2 Оновити саме ті поля  (з підрядником або з замовником)\n// 3 Перевірити чи все працює з іншим функціоналом (типи даних повинні бути однакові)\nlet data = {}\nif (msg.contractType === \"Замовник\") {\n    // parseFloat(clientAmount.text.replace(/,/g, '')\n    // new Intl.NumberFormat('en-US').format()\n    // let totalSum = msg.sum !== msg.oldSum ? ((+msg.sum) - (+msg.oldSum)) : (+msg.sum);\n    const clientAmount = msg.payload[0].client && parseFloat(msg.payload[0].client.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) + (msg.taskSum)) : (msg.taskSum);\n    const newDifference = msg.payload[0].customer ? (clientAmount - parseFloat(msg.payload[0].customer.replace(/,/g, ''))) : (clientAmount - 0);\n    node.warn(parseFloat(msg.payload[0].client.replace(/,/g, '')))\n    node.warn(clientAmount)\n    node.warn(newDifference)\n\n    data = {\n        \"client\": new Intl.NumberFormat('en-US').format(clientAmount),\n        \"customer\": msg.payload[0].customer ? msg.payload[0].customer : '0',\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\n\nif (msg.contractType === \"Підрядник\") {\n    // let totalSum = msg.sum !== msg.oldSum ? ((+msg.sum) - (+msg.oldSum)) : (+msg.sum);\n        \n    const customerAmount = msg.payload[0].customer && parseFloat(msg.payload[0].customer.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].customer.replace(/,/g, '')) + (msg.taskSum)) : (msg.taskSum);\n    const newDifference = msg.payload[0].client ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) - customerAmount) : (0 - customerAmount);\n    node.warn(customerAmount)\n    node.warn(newDifference)\n    node.warn(parseFloat(msg.payload[0].customer.replace(/,/g, '')))\n      \n    data = {\n        \"client\": msg.payload[0].client ? msg.payload[0].client : '0',\n        \"customer\": new Intl.NumberFormat('en-US').format(customerAmount),\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\nnode.warn(data)\nmsg.payload = {\n    $set: {\n        ...data,\n        updatedAt: global.get(\"convert_date\")\n    }\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1330,
        "y": 1120,
        "wires": [
            [
                "14845c805539c303",
                "d93bbd24bb7d51a7"
            ]
        ]
    },
    {
        "id": "14845c805539c303",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1600,
        "y": 1120,
        "wires": [
            [
                "d93bbd24bb7d51a7",
                "802ef173e7f2b9c4"
            ]
        ]
    },
    {
        "id": "48d6f5054425ddcd",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 668",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.payload = {\n    '_id': objectid(msg.taskId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 890,
        "y": 1120,
        "wires": [
            [
                "24e7624cdcf5b536",
                "344993d9ea90795c"
            ]
        ]
    },
    {
        "id": "24e7624cdcf5b536",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1070,
        "y": 1120,
        "wires": [
            [
                "344993d9ea90795c",
                "defee9fcc890722e"
            ]
        ]
    },
    {
        "id": "3c9f62b170fccd18",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 541",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 1080,
        "wires": []
    },
    {
        "id": "344993d9ea90795c",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 542",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1050,
        "y": 1180,
        "wires": []
    },
    {
        "id": "d93bbd24bb7d51a7",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 543",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1450,
        "y": 1180,
        "wires": []
    },
    {
        "id": "4c93b07221cdbc2c",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "af30c153e4a2f931",
        "name": "debug 553",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 120,
        "wires": []
    },
    {
        "id": "a76d9678e0bca051",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 559",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 910,
        "y": 1220,
        "wires": []
    },
    {
        "id": "830a8012206b15eb",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "update projectsTasks summary",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.query = {\n    \"_id\": objectid(msg.taskId),\n};\n\n\n// \"difference\":,\n// \"customer\": \n// \"client\": \n\n// 1 Відповідно від типу договора  розрахувати правильно маржу \n// 2 Оновити саме ті поля  (з підрядником або з замовником)\n// 3 Перевірити чи все працює з іншим функціоналом (типи даних повинні бути однакові)\nlet data = {}\nif (msg.contractType === \"Замовник\") {\n    // parseFloat(clientAmount.text.replace(/,/g, '')\n    // new Intl.NumberFormat('en-US').format()\n    let totalSum = msg.taskSum !== msg.oldSum ? ((msg.taskSum) - (+msg.oldSum)) : (msg.taskSum);\n    const clientAmount = msg.payload[0].client && parseFloat(msg.payload[0].client.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) + totalSum) : (msg.taskSum);\n   \n    // const clientAmount = msg.payload[0].client && parseFloat(msg.payload[0].client.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) + (+msg.taskSum)) : (+msg.taskSum);\n    const newDifference = msg.payload[0].customer ? (clientAmount - parseFloat(msg.payload[0].customer.replace(/,/g, ''))) : (clientAmount - 0);\n\n    data = {\n        \"client\": new Intl.NumberFormat('en-US').format(clientAmount),\n        \"customer\": msg.payload[0].customer ? msg.payload[0].customer : '0',\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\n\nif (msg.contractType === \"Підрядник\") {\n    let totalSum = msg.taskSum !== msg.oldSum ? ((+msg.taskSum) - (+msg.oldSum)) : (+msg.taskSum);\n\n    const customerAmount = msg.payload[0].customer && parseFloat(msg.payload[0].customer.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].customer.replace(/,/g, '')) + totalSum) : (+msg.taskSum);\n    // const customerAmount = msg.payload[0].customer && parseFloat(msg.payload[0].customer.replace(/,/g, '')) !== 0 ? (parseFloat(msg.payload[0].customer.replace(/,/g, '')) + (+msg.taskSum)) : (+ msg.taskSum);\n    const newDifference = msg.payload[0].client ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) - customerAmount) : (0 - customerAmount);\n    \n      \n    data = {\n        \"client\": msg.payload[0].client ? msg.payload[0].client : '0',\n        \"customer\": new Intl.NumberFormat('en-US').format(customerAmount),\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }\n}\nmsg.payload = {\n    $set: {\n        ...data,\n        updatedAt: global.get(\"convert_date\")\n    }\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1590,
        "y": 1280,
        "wires": [
            [
                "451538534f99b497",
                "6e1f58672a97ee9b"
            ]
        ]
    },
    {
        "id": "451538534f99b497",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1820,
        "y": 1280,
        "wires": [
            [
                "6e1f58672a97ee9b",
                "d90fa795bd833f4f"
            ]
        ]
    },
    {
        "id": "ca008617b71152e8",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 670",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.payload = {\n    '_id': objectid(msg.taskId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1210,
        "y": 1280,
        "wires": [
            [
                "c18ff9866bc98e67",
                "6f7d709e0d6e7abd"
            ]
        ]
    },
    {
        "id": "c18ff9866bc98e67",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1370,
        "y": 1280,
        "wires": [
            [
                "6f7d709e0d6e7abd",
                "830a8012206b15eb"
            ]
        ]
    },
    {
        "id": "6f7d709e0d6e7abd",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 560",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1310,
        "y": 1340,
        "wires": []
    },
    {
        "id": "6e1f58672a97ee9b",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 561",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1810,
        "y": 1340,
        "wires": []
    },
    {
        "id": "2f47bfacc338c9bc",
        "type": "function",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "function 671",
        "func": "msg.collection = \"contracts\";\nmsg.taskSum = +msg.payload.taskSum\nmsg.taskId = msg.payload.taskId\n\nmsg.payload = [\n    {\n        $match: {\n            \"_id\": objectid(msg.req.query.contractId), \n            'relatedTasks.taskId': msg.taskId,           \n            deleted: false\n        }\n    },\n    {\n        $addFields: {\n            currentTask: {\n                $filter: {\n                    input: \"$relatedTasks\",\n                    as: \"task\",\n                    cond: { $eq: [\"$$task.taskId\", msg.payload.taskId] }\n                }\n            }\n        }\n    },\n    {\n        $project: {\n            _id: 1,\n            name: 1,\n            status: 1,\n            type: 1,\n            client: 1,\n            contractType: 1,\n            sum: 1,\n            relatedTasks: 1,\n            currentTask: { $arrayElemAt: [\"$currentTask\", 0] }\n        }\n    }\n];\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 410,
        "y": 1280,
        "wires": [
            [
                "a40eb23045701770"
            ]
        ]
    },
    {
        "id": "a40eb23045701770",
        "type": "link call",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 590,
        "y": 1280,
        "wires": [
            [
                "e39cd6d6fa11d3f0",
                "ec498974f9b3c857"
            ]
        ]
    },
    {
        "id": "e39cd6d6fa11d3f0",
        "type": "debug",
        "z": "2fce404005fef31a",
        "g": "27c22d2d957ff945",
        "name": "debug 562",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 510,
        "y": 1220,
        "wires": []
    },
    {
        "id": "28385a830eab55f9",
        "type": "inject",
        "z": "2fce404005fef31a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 2140,
        "wires": [
            [
                "4f244dcf524ae219"
            ]
        ]
    },
    {
        "id": "4f244dcf524ae219",
        "type": "function",
        "z": "2fce404005fef31a",
        "name": "function 681",
        "func": "msg.collection = \"contracts\";\nmsg.payload={}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 2140,
        "wires": [
            [
                "50ef400d8734fb58"
            ]
        ]
    },
    {
        "id": "50ef400d8734fb58",
        "type": "mongodb out",
        "z": "2fce404005fef31a",
        "mongodb": "40e92400c5b4fa25",
        "name": "",
        "collection": "",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 520,
        "y": 2140,
        "wires": []
    },
    {
        "id": "09bf4d031a8bc6ab",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 548",
        "func": "msg.collection = 'projectsTasks';\n\n\n\n\nmsg.payload=[\n    {\n        $match:{ projectTemplateId: objectid(msg.payload[0].template)}\n    },\n    {\n   \n        $lookup: {\n            \"from\": \"counterparties\",\n        \"localField\": \"performer\",\n            \"foreignField\": \"_id\",\n            \"as\": \"clientData\"\n        }\n    }\n\n]\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 685,
        "y": 80,
        "wires": [
            [
                "4e96844dd33e2963"
            ]
        ],
        "l": false
    },
    {
        "id": "4e96844dd33e2963",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 820,
        "y": 80,
        "wires": [
            [
                "7346dda9aed9e709",
                "99dac3c9f0867017"
            ]
        ]
    },
    {
        "id": "b510cec7a3cce9a8",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "url": "/getTemplate",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "25b4680492fd81b1"
            ]
        ]
    },
    {
        "id": "25b4680492fd81b1",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 549",
        "func": "msg.collection = 'projects';\n\n\nmsg.payload ={\n  _id:objectid(msg.req.query._id)\n}\n\nmsg.projection = {\n  template:1\n};\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 360,
        "y": 80,
        "wires": [
            [
                "05a87d36d28e0f78"
            ]
        ]
    },
    {
        "id": "05a87d36d28e0f78",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 80,
        "wires": [
            [
                "09bf4d031a8bc6ab"
            ]
        ]
    },
    {
        "id": "7346dda9aed9e709",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "tasks",
        "func": "\nmsg.tasks = msg.payload.map(e => {\n\n    return {\n        _id: e._id ?? \"\",\n        type: e.type ?? \"\",\n        name: e.name ?? \"\",\n        status: e.status ?? \"\",\n        startDate: e.startDate ?? \"\",\n        deadline: e.deadline ?? \"\",\n        client: e.client ?? \"\",\n        customer: e.customer ?? \"\",\n        difference: e.difference ?? \"\",\n        isAction: e.isAction ?? \"\",\n        parentGroupId: e.parentGroupId ?? \"\",\n        parentSectionId: e.parentSectionId ?? \"\",\n        parentStageId: e.parentStageId ?? \"\",\n        position: e.position ?? \"\",\n        key: e.key ?? \"\",\n        projectTemplateId: e.projectTemplateId ?? \"\",\n        deleted: e.deleted ?? \"\",\n        createdAt: e.createdAt ?? \"\",\n        files: e.files ?? [],\n        updatedAt: e.updatedAt ?? \"\",\n        performer: e.clientData.length > 0 ? e.clientData[0].name : \"\",\n        clientName: e.clientData.length > 0 ? e.clientData[0]._id : \"\",\n        dependencies: e.dependencies && e.dependencies.length > 0 ? e.dependencies:JSON.stringify([]),\n        isOncriticalPath: e.isOncriticalPath??false\n    }\n});\nmsg.collection = \"stages\";\nmsg.payload = {\n\n}\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 80,
        "wires": [
            [
                "d4e73fb9ec8d4928"
            ]
        ]
    },
    {
        "id": "d4e73fb9ec8d4928",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1140,
        "y": 80,
        "wires": [
            [
                "5becc68119dcc218"
            ]
        ]
    },
    {
        "id": "5becc68119dcc218",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "stages",
        "func": "msg.stages = msg.payload\nmsg.collection=\"group\";\nmsg.payload ={\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 80,
        "wires": [
            [
                "a0ff14e0e2ed8f4d"
            ]
        ]
    },
    {
        "id": "a0ff14e0e2ed8f4d",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1430,
        "y": 80,
        "wires": [
            [
                "c51d0170ab259232"
            ]
        ]
    },
    {
        "id": "c51d0170ab259232",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "section",
        "func": "msg.group = msg.payload\nmsg.collection = \"section\";\nmsg.payload = {\n    projectIds: { $in: [objectid(msg.req.query._id)] },\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1590,
        "y": 80,
        "wires": [
            [
                "bbff4f8088a44f91"
            ]
        ]
    },
    {
        "id": "bbff4f8088a44f91",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1740,
        "y": 80,
        "wires": [
            [
                "1a602ac5529d1eb2"
            ]
        ]
    },
    {
        "id": "1a602ac5529d1eb2",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 550",
        "func": "msg.section = msg.payload\n\n\n\nfunction createStructure(tasks, groups, sections, stages) {\n    groups.forEach(group => {\n        group.children = tasks\n            .filter(task => task.parentGroupId.toString() === group._id.toString())\n            .map(task => {\n                const childObject = Object.fromEntries(\n                    Object.entries(task).map(([key, value]) => [\n                        key,\n                        Array.isArray(value) && value.length > 0 ? JSON.stringify(value) : value,\n                    ])\n                );\n                return childObject;\n            });\n    });\n\n    sections.forEach(section => {\n        section.children = groups.filter(group => group.parentSectionId.toString() === section._id.toString());\n    });\n\n    stages.forEach(stage => {\n        const groupforStage = groups.filter(group => group.parentStageId.toString() === stage._id.toString() && group.parentSectionId === \"\");\n        const sectionforStage = sections.filter(section => section.parentStageId.toString() === stage._id.toString());\n\n        stage.children = sectionforStage.length > 0 ? sectionforStage : groupforStage;\n    });\n}\n\ncreateStructure(msg.tasks, msg.group, msg.section, msg.stages);\nmsg.payload = msg.stages;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1900,
        "y": 80,
        "wires": [
            [
                "a001579cf250c47d",
                "425a53cbaa7a56eb"
            ]
        ]
    },
    {
        "id": "a001579cf250c47d",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2060,
        "y": 80,
        "wires": []
    },
    {
        "id": "e3d35efaef992176",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "url": "/getContractsForSelect",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 260,
        "wires": [
            [
                "1bcd034b84df529c"
            ]
        ]
    },
    {
        "id": "1bcd034b84df529c",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 590",
        "func": "msg.collection = \"contracts\"\n\nmsg.payload = {\n    progectId: objectid(msg.req.query._id)\n}\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 400,
        "y": 260,
        "wires": [
            [
                "f9d8b43f44239ccf"
            ]
        ]
    },
    {
        "id": "f9d8b43f44239ccf",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 260,
        "wires": [
            [
                "93e543775aa7762a"
            ]
        ]
    },
    {
        "id": "93e543775aa7762a",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 700,
        "y": 260,
        "wires": []
    },
    {
        "id": "70e538942bf89972",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "url": "/uploadTaskFiles",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "57003c487e04905f",
                "8a34ce1a4615020c"
            ]
        ]
    },
    {
        "id": "5fb93b1673fe1bba",
        "type": "file",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "filename": "path",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 550,
        "y": 140,
        "wires": [
            [
                "b20dc1823e58b854"
            ]
        ]
    },
    {
        "id": "57003c487e04905f",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 591",
        "func": "\nmsg.payload = msg.req.files[0].buffer;\nmsg.path = `/data/documents/${msg.req.files[0].originalname}`\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 140,
        "wires": [
            [
                "5fb93b1673fe1bba"
            ]
        ]
    },
    {
        "id": "b20dc1823e58b854",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 592",
        "func": "msg.collection = 'projectsTasks';\nmsg.query={\n    _id: objectid(msg.req.query.taskId)\n};\n\nconst fileName = msg.req.files[0].originalname;\nconst parts = fileName.split('.');\nconst extension = parts[parts.length - 1];\nconst uppercaseExtension = extension.toUpperCase();\n\n// Приклад об'єкту files\nlet newFiles = { fileId: objectid(), fileName, version: \"v1\", type: uppercaseExtension, date: global.get(\"convert_date\"), deleted:false};\nmsg.payload = {\n    $push:{\n        files:  newFiles\n    }\n}\nmsg.file = newFiles\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 720,
        "y": 140,
        "wires": [
            [
                "f7a1457df1fd98e1"
            ]
        ]
    },
    {
        "id": "f7a1457df1fd98e1",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 930,
        "y": 140,
        "wires": [
            [
                "b45b533cf18f84a6"
            ]
        ]
    },
    {
        "id": "b45b533cf18f84a6",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 593",
        "func": "msg.payload = msg.file\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 140,
        "wires": [
            [
                "36ba4af3784e168a"
            ]
        ]
    },
    {
        "id": "36ba4af3784e168a",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1260,
        "y": 140,
        "wires": []
    },
    {
        "id": "eed809dfda35e3f9",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "url": "/getFilesFromTasks",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 200,
        "wires": [
            [
                "fd4d016fc81051a5"
            ]
        ]
    },
    {
        "id": "fd4d016fc81051a5",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 594",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.payload ={\n    _id:objectid(msg.req.query._id)\n}\n\nmsg.projection = {\n    files: 1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 380,
        "y": 200,
        "wires": [
            [
                "90c1cd9d8ab6bf55"
            ]
        ]
    },
    {
        "id": "90c1cd9d8ab6bf55",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 200,
        "wires": [
            [
                "4a7ee60186a990df"
            ]
        ]
    },
    {
        "id": "f0de0410c3525cd2",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 900,
        "y": 200,
        "wires": []
    },
    {
        "id": "4a7ee60186a990df",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 595",
        "func": "msg.payload = msg.payload.length > 0 && msg.payload[0]?.files && msg.payload[0]?.files.length >0 ? msg.payload[0]?.files.filter(e=> e.deleted === false):[]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 200,
        "wires": [
            [
                "f0de0410c3525cd2"
            ]
        ]
    },
    {
        "id": "b0a772d0ad46e62f",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "url": "/deleteFileFromTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 320,
        "wires": [
            [
                "1a755fb538ca8bfe"
            ]
        ]
    },
    {
        "id": "1a755fb538ca8bfe",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 596",
        "func": "msg.collection = 'projectsTasks';\nconst fileIdObjectId = objectid(msg.req.query.fileId);\nmsg.query = {\n    '_id': objectid(msg.req.query.taskId),\n    'files.fileId': fileIdObjectId \n};\n\n\nmsg.payload = {\n    $set: {\n        \"files.$.deleted\": true\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 401.880859375,
        "y": 321.125,
        "wires": [
            [
                "c8d60dfdad78e6a2"
            ]
        ]
    },
    {
        "id": "c8d60dfdad78e6a2",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 610,
        "y": 320,
        "wires": [
            [
                "dc0839267f84ab94"
            ]
        ]
    },
    {
        "id": "dc0839267f84ab94",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 800,
        "y": 320,
        "wires": []
    },
    {
        "id": "a3504e17aa715ac7",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "url": "/updateTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 380,
        "wires": [
            [
                "b09c8a21731ead0f",
                "56614656293393f9"
            ]
        ]
    },
    {
        "id": "b09c8a21731ead0f",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "function 597",
        "func": "msg.collection = 'projectsTasks';\nmsg.query = {\n    '_id': objectid(msg.req.query.taskId),\n};\n\nfunction formatDateTime(inputStr) {\n    let currentDate = new Date(inputStr);\n\n    let options = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        timeZone: 'Europe/Kiev',\n    };\n\n \n    let formattedDate = currentDate.toLocaleDateString('uk-UA', options);\n    return formattedDate\n}\n\n\nmsg.payload ={\n    $set:{\n        ...msg.payload,\n        startDate: formatDateTime(msg.payload.startDate),\n        deadline: formatDateTime(msg.payload.deadline),\n        performer: msg.payload.performer ? objectid(msg.payload.performer):\"\",\n        dependencies: msg.payload.dependencies && JSON.parse(msg.payload.dependencies).length > 0 ?JSON.parse(msg.payload.dependencies).map(e=>{ return e}):[],\n        updatedAt: global.get(\"convert_date\")\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 340,
        "y": 380,
        "wires": [
            [
                "e2c2c3cc68f9d82a",
                "56614656293393f9"
            ]
        ]
    },
    {
        "id": "e2c2c3cc68f9d82a",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 550,
        "y": 380,
        "wires": [
            [
                "301969398eac6c02"
            ]
        ]
    },
    {
        "id": "301969398eac6c02",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 780,
        "y": 380,
        "wires": []
    },
    {
        "id": "c44248c6bf6e8b09",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 603",
        "func": "msg.collection = \"contracts\";\n\nmsg.payload = [\n    {\n        $match: {\n            projectId: objectid(msg.req.query._id),\n            'relatedTasks.taskId': msg.req.query.taskId,\n            type: \"Замовник\",\n            deleted: false\n        }\n    },\n    {\n        $addFields: {\n            currentTask: {\n                $filter: {\n                    input: \"$relatedTasks\",\n                    as: \"task\",\n                    cond: { $eq: [\"$$task.taskId\", msg.req.query.taskId] }\n                }\n            }\n        }\n    },\n    {\n        $project: {\n            _id: 1,\n            name: 1,\n            status: 1,\n            type: 1,\n            client: 1,\n            contractType: 1,\n            sum: 1,\n            relatedTasks: 1,\n            currentTask: { $arrayElemAt: [\"$currentTask\", 0] }\n        }\n    }\n];\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 490,
        "y": 700,
        "wires": [
            [
                "56b5db5dd6ce57e7"
            ]
        ]
    },
    {
        "id": "56b5db5dd6ce57e7",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 680,
        "y": 700,
        "wires": [
            [
                "3e48e13d7e4a3e86",
                "42cb9cb39169aade"
            ]
        ]
    },
    {
        "id": "3e48e13d7e4a3e86",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 700,
        "wires": []
    },
    {
        "id": "d80789a3c721658e",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 604",
        "func": "msg.collection = \"contracts\";\nmsg.payload = [\n    {\n        $match: {\n            projectId: objectid(msg.req.query._id),\n            'relatedTasks.taskId': msg.req.query.taskId,\n            type: \"Підрядник\",\n            deleted: false\n        }\n    },\n    {\n        $addFields: {\n            currentTask: {\n                $filter: {\n                    input: \"$relatedTasks\",\n                    as: \"task\",\n                    cond: { $eq: [\"$$task.taskId\", msg.req.query.taskId] }\n                }\n            }\n        }\n    },\n    {\n        $project: {\n            _id: 1,\n            name: 1,\n            status: 1,\n            type: 1,\n            client: 1,\n            contractType: 1,\n            sum: 1,\n            relatedTasks: 1,\n            currentTask: { $arrayElemAt: [\"$currentTask\", 0] }\n        }\n    }\n];\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 510,
        "y": 780,
        "wires": [
            [
                "bb49491fe8c8f6c5"
            ]
        ]
    },
    {
        "id": "bb49491fe8c8f6c5",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "b7c366424b9b7e6e"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 720,
        "y": 780,
        "wires": [
            [
                "22425a15704e5f76",
                "c03ae43e9279e964"
            ]
        ]
    },
    {
        "id": "22425a15704e5f76",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 890,
        "y": 780,
        "wires": []
    },
    {
        "id": "3d516991c14bcf76",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/getRelatedContractforTaskCustomer",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 700,
        "wires": [
            [
                "c44248c6bf6e8b09"
            ]
        ]
    },
    {
        "id": "11beda57b9408624",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/getRelatedContractforTaskContractor",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 220,
        "y": 780,
        "wires": [
            [
                "d80789a3c721658e"
            ]
        ]
    },
    {
        "id": "181d68c484b0c8d6",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/addRelatedTasks2",
        "method": "post",
        "upload": true,
        "swaggerDoc": "",
        "x": 170,
        "y": 1000,
        "wires": [
            [
                "74133a96953a3b83"
            ]
        ]
    },
    {
        "id": "74133a96953a3b83",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 605",
        "func": "// msg.collection = \"contracts\";\n// msg.taskSum =msg.payload?.taskSum\n// msg.query = {\n//     _id: objectid(msg.req.query.contractId),\n//     projectId: objectid(msg.req.query._id)\n// }\n// msg.payload = {\n//     $push: {\n//         relatedTasks:msg.payload\n//     }\n\n// }\n// return msg;\nmsg.collection = \"contracts\";\nmsg.taskSum = msg.payload?.taskSum;\n\nmsg.query = {\n    _id: objectid(msg.req.query.contractId),\n    projectId: objectid(msg.req.query._id),\n    \"relatedTasks.taskId\": { $ne: msg.payload.taskId } // Додати умову, щоб виключити дублікати за taskId\n};\n\nmsg.payload = {\n    $addToSet: {\n        relatedTasks: {\n            taskId: msg.payload.taskId,\n            taskSum: msg.payload.taskSum\n        }\n    }\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 400,
        "y": 1000,
        "wires": [
            [
                "31dca149954bb883"
            ]
        ]
    },
    {
        "id": "31dca149954bb883",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 610,
        "y": 1000,
        "wires": [
            [
                "6e5c5ecd8645ed46"
            ]
        ]
    },
    {
        "id": "6e5c5ecd8645ed46",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 760,
        "y": 1000,
        "wires": []
    },
    {
        "id": "02cf7ae6bb9f1533",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/addTaskContractsCustomer",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 840,
        "wires": [
            [
                "d5f6614e54fcb112"
            ]
        ]
    },
    {
        "id": "d5f6614e54fcb112",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 607",
        "func": "\nmsg.collection = \"contracts\";\nmsg.taskSum = msg.payload?.taskSum\nmsg.query = {\n    _id: objectid(msg.req.query.contractId)\n}\nmsg.payload = {\n    $push: {\n        relatedTasks: msg.payload\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 470,
        "y": 840,
        "wires": [
            [
                "0e6a43b82da9839b"
            ]
        ]
    },
    {
        "id": "0e6a43b82da9839b",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 700,
        "y": 840,
        "wires": [
            [
                "8110bc8711a2e285"
            ]
        ]
    },
    {
        "id": "4a578b5692b022a2",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 840,
        "wires": []
    },
    {
        "id": "5b1fdb3da92eba80",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/addTaskContractContractor",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 920,
        "wires": [
            [
                "ce7e6d08b25048d2"
            ]
        ]
    },
    {
        "id": "ce7e6d08b25048d2",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 608",
        "func": "msg.collection = 'projectsTasks';\nmsg.query = {\n    '_id': objectid(msg.req.query.taskId),\n};\nmsg.payload = {\n    $push: {\n        ...msg.payload,\n        updatedAt: new Date()\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 470,
        "y": 920,
        "wires": [
            [
                "f63b0363f29d6a6b"
            ]
        ]
    },
    {
        "id": "f63b0363f29d6a6b",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 700,
        "y": 920,
        "wires": [
            [
                "a07928bab16fc814"
            ]
        ]
    },
    {
        "id": "e5874f6214fc308f",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1010,
        "y": 920,
        "wires": []
    },
    {
        "id": "a07928bab16fc814",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 609",
        "func": "msg.payload = msg.payload.map(e => {\n    return {\n        label: e.name,\n        value: e._id,\n        status: e.status,\n        type: e.type,\n        contractType: e.contractType,\n        sum: e.sum\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 920,
        "wires": [
            [
                "e5874f6214fc308f"
            ]
        ]
    },
    {
        "id": "8110bc8711a2e285",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 610",
        "func": "msg.payload = msg.payload.map(e => {\n    return {\n        label: e.name,\n        value: e._id,\n        status: e.status,\n        type: e.type,\n        contractType: e.contractType,\n        sum: e.sum\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 840,
        "wires": [
            [
                "4a578b5692b022a2"
            ]
        ]
    },
    {
        "id": "97e7c25d11f4f7c7",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "735e9617b665865a",
        "name": "",
        "url": "/getProjectInfo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 2310,
        "y": 420,
        "wires": [
            [
                "9bf628bd1715e171"
            ]
        ]
    },
    {
        "id": "9bf628bd1715e171",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "735e9617b665865a",
        "name": "function 620",
        "func": "msg.collection = 'projects';\n\n\nmsg.payload = {\n    _id: objectid(msg.req.query._id)\n}\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2530,
        "y": 420,
        "wires": [
            [
                "9d504ac206d7ba26"
            ]
        ]
    },
    {
        "id": "9d504ac206d7ba26",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "735e9617b665865a",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2740,
        "y": 420,
        "wires": [
            [
                "cbc6214cda2ef4b1"
            ]
        ]
    },
    {
        "id": "cbc6214cda2ef4b1",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "735e9617b665865a",
        "name": "function 621",
        "func": "msg.payload = {\n    \"name\": msg.payload[0].name,\n    \"codeProject\": msg.payload[0].codeProject,\n    \"queue\": msg.payload[0].queue,\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2930,
        "y": 420,
        "wires": [
            [
                "3ace07a31bb9c912"
            ]
        ]
    },
    {
        "id": "3ace07a31bb9c912",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "735e9617b665865a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 3110,
        "y": 420,
        "wires": []
    },
    {
        "id": "235f2a43b15819dc",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "url": "/addNewSection",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 2320,
        "y": 100,
        "wires": [
            [
                "d505651e1af88476"
            ]
        ]
    },
    {
        "id": "3446e41b57f373fa",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2515,
        "y": 100,
        "wires": [
            [
                "34169a8552f94d74"
            ]
        ],
        "l": false
    },
    {
        "id": "d505651e1af88476",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 625",
        "func": "msg.old = msg.payload;\nmsg.newSectionID =objectid()\nmsg.collection = \"section\";\nmsg.payload = {\n\n}\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2455,
        "y": 100,
        "wires": [
            [
                "3446e41b57f373fa"
            ]
        ],
        "l": false
    },
    {
        "id": "996869a33dae8be9",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 626",
        "func": "msg.collection = \"section\";\nmsg.payload = {\n    _id: msg.newSectionID,\n    type: \"секція\",\n    name: msg.old.name,\n    isAction: true,\n    children: [],\n    parentStageId: objectid(\"65732f83046b1b1000001360\"),\n    projectIds:[objectid(msg.req.query.projectId)],\n    position: msg.position,\n    key: msg.newSectionID\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 3095,
        "y": 80,
        "wires": [
            [
                "61424dd16d0be35e"
            ]
        ],
        "l": false
    },
    {
        "id": "61424dd16d0be35e",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 3230,
        "y": 80,
        "wires": [
            [
                "4b5c61bba904dbbe"
            ]
        ]
    },
    {
        "id": "dde2994d9ae385eb",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 627",
        "func": "msg.projectTemplateId = msg.payload[0].template\nmsg.collection = \"group\";\nmsg.payload={\n    parentSectionId:objectid(msg.req.query.parentSectionId) \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2675,
        "y": 100,
        "wires": [
            [
                "8f08e8a3eed73807"
            ]
        ],
        "l": false
    },
    {
        "id": "8f08e8a3eed73807",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2725,
        "y": 100,
        "wires": [
            [
                "ed2b98dfe29bf971"
            ]
        ],
        "l": false
    },
    {
        "id": "ed2b98dfe29bf971",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 629",
        "func": "\nmsg.array = msg.payload \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2785,
        "y": 100,
        "wires": [
            [
                "72514d8dfa0cfb1a"
            ]
        ],
        "l": false
    },
    {
        "id": "72514d8dfa0cfb1a",
        "type": "array-loop",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "key": "count",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 2960,
        "y": 100,
        "wires": [
            [
                "996869a33dae8be9"
            ],
            [
                "1cb2116cdf6f4439"
            ]
        ]
    },
    {
        "id": "1cb2116cdf6f4439",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 630",
        "func": "msg.collection = \"group\";\nmsg.oldGroupID = msg.payload._id\nmsg._idGroup = objectid()\nmsg.payload = {\n     \"_id\": msg._idGroup,\n     \"type\": \"група\",\n     \"name\": msg.payload.name,\n     \"isAction\": true,\n     \"children\": [],\n     \"parentSectionId\":objectid(msg.newSectionID),\n     \"parentStageId\": objectid(\"65732f83046b1b1000001360\"),\n     \"position\": msg.payload.position,\n     \"key\": msg._idGroup\n}\n\n//додати створення задачі тут з новою ід группи до якої ця задача відноситься\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2575,
        "y": 180,
        "wires": [
            [
                "d7223274e658456a"
            ]
        ],
        "l": false
    },
    {
        "id": "d7223274e658456a",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2690,
        "y": 180,
        "wires": [
            [
                "99277a62d46d87a6"
            ]
        ]
    },
    {
        "id": "4b5c61bba904dbbe",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 3380,
        "y": 80,
        "wires": []
    },
    {
        "id": "fe84a0564d5406d1",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2930,
        "y": 180,
        "wires": [
            [
                "6404252790d9250f"
            ]
        ]
    },
    {
        "id": "6404252790d9250f",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 631",
        "func": "\nmsg.array2 =msg.payload\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3055,
        "y": 180,
        "wires": [
            [
                "3c1fe1e925b52a2b"
            ]
        ],
        "l": false
    },
    {
        "id": "3c1fe1e925b52a2b",
        "type": "array-loop",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "key": "count2",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array2",
        "arrayType": "msg",
        "x": 3230,
        "y": 180,
        "wires": [
            [
                "72514d8dfa0cfb1a"
            ],
            [
                "5eabb50d68265a27"
            ]
        ]
    },
    {
        "id": "1914b80f20bb4ccc",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 632",
        "func": "msg.collection = 'projectsTasks';\nmsg._idTask2 = objectid()\nmsg.payload =\n{\n     \"_id\": msg._idTask2,\n     \"type\": \"задача\",\n     \"name\": msg.payload.name,\n     \"deadline\": \"\",\n     \"customer\": \"\",\n     \"client\": \"\",\n     \"difference\": \"\",\n     \"performer\": \"\",\n     \"isAction\": true,\n     \"parentGroupId\": objectid(msg._idGroup),\n     \"parentSectionId\": objectid(msg.newSectionID),\n     \"parentStageId\": objectid(\"65732f83046b1b1000001360\"),\n     \"projectTemplateId\":objectid(msg.projectTemplateId),\n     \"position\": msg.payload.position,\n     \"key\": msg._idTask2,\n     \"deleted\": false,\n     \"status\": \"Очікується\",\n     \"createdAt\": global.get(\"convert_date\")\n}\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 3325,
        "y": 280,
        "wires": [
            [
                "6f9b8b689d5a3802"
            ]
        ],
        "l": false
    },
    {
        "id": "6f9b8b689d5a3802",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 3490,
        "y": 280,
        "wires": [
            [
                "3c1fe1e925b52a2b"
            ]
        ]
    },
    {
        "id": "99277a62d46d87a6",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 634",
        "func": "msg.group = msg.payload;\nmsg.collection = 'tasks';\n\n\nmsg.payload = {\n    parentSectionId: objectid(msg.req.query.parentSectionId),\n    parentGroupId: objectid(msg.oldGroupID)\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2805,
        "y": 180,
        "wires": [
            [
                "fe84a0564d5406d1"
            ]
        ],
        "l": false
    },
    {
        "id": "34169a8552f94d74",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 635",
        "func": "\nmsg.position = msg.payload.length + 1;\nmsg.collection = 'projects';\n\n\nmsg.payload = {\n    _id: objectid(msg.req.query.projectId)\n}\n\nmsg.projection = {\n    template: 1\n};\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2575,
        "y": 100,
        "wires": [
            [
                "18578002c0caa36b"
            ]
        ],
        "l": false
    },
    {
        "id": "18578002c0caa36b",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2625,
        "y": 100,
        "wires": [
            [
                "dde2994d9ae385eb"
            ]
        ],
        "l": false
    },
    {
        "id": "5eabb50d68265a27",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "function 636",
        "func": "msg.collection = 'tasks';\nmsg._idTask = objectid()\nmsg.payload =\n{\n    \"_id\": msg._idTask,\n    \"type\": \"задача\",\n    \"name\": msg.payload.name,\n    \"status\": \"\",\n    \"deadline\": \"\",\n    \"customer\": \"\",\n    \"client\": \"\",\n    \"difference\": \"\",\n    \"performer\": \"\",\n    \"isAction\": true,\n    \"parentGroupId\": objectid(msg._idGroup),\n    \"parentSectionId\": objectid(msg.newSectionID),\n    \"parentStageId\": objectid(\"65732f83046b1b1000001360\"),\n    \"position\": msg.payload.position,\n    \"key\": msg._idTask,  \n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 3085,
        "y": 280,
        "wires": [
            [
                "ec2b4ac2259bbd8d"
            ]
        ],
        "l": false
    },
    {
        "id": "ec2b4ac2259bbd8d",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "3767b80692da44bf",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 3210,
        "y": 280,
        "wires": [
            [
                "1914b80f20bb4ccc"
            ]
        ]
    },
    {
        "id": "425a53cbaa7a56eb",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "debug 527",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2040,
        "y": 160,
        "wires": []
    },
    {
        "id": "33dffa05ef97cd45",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/getContractsCustomer",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 560,
        "wires": [
            [
                "0c9dcf98bbf14589"
            ]
        ]
    },
    {
        "id": "0c9dcf98bbf14589",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 590",
        "func": "msg.collection = \"contracts\"\n\nmsg.payload = {\n    projectId: objectid(msg.req.query.progectId),\n    type: \"Замовник\",\n    deleted:false\n}\n\nmsg.projection = {\n    \"_id\": 1,\n    \"name\": 1,\n    \"status\": 1,\n    \"type\": 1,\n    \"contractType\": 1,\n    \"sum\": 1,\n    \"relatedTasks\":1\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 560,
        "wires": [
            [
                "26d924b7a75c09d6"
            ]
        ]
    },
    {
        "id": "26d924b7a75c09d6",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 560,
        "wires": [
            [
                "edae50cfc78c5f76"
            ]
        ]
    },
    {
        "id": "fa0e4b2bd431fac2",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 560,
        "wires": []
    },
    {
        "id": "be73909d9deef3c6",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/getContractContractor",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 620,
        "wires": [
            [
                "cad3a06032e63733"
            ]
        ]
    },
    {
        "id": "cad3a06032e63733",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 591",
        "func": "msg.collection = \"contracts\"\n\nmsg.payload = {\n    projectId: objectid(msg.req.query.progectId),\n    type: \"Підрядник\",\n    deleted: false\n}\nmsg.projection = {\n    \"_id\": 1,\n    \"name\": 1,\n    \"status\": 1,\n    \"type\": 1,\n    \"contractType\": 1,\n    \"sum\": 1,\n    \"relatedTasks\": 1\n}\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 620,
        "wires": [
            [
                "bfff11711962b5c7"
            ]
        ]
    },
    {
        "id": "bfff11711962b5c7",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 560,
        "y": 620,
        "wires": [
            [
                "d6957686550cd08d"
            ]
        ]
    },
    {
        "id": "c9549a83baf6194d",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 620,
        "wires": []
    },
    {
        "id": "d6957686550cd08d",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 593",
        "func": "msg.payload = msg.payload.map(e => {\n    return {\n        label: e.name,\n        value: e._id,\n        status: e.status,\n        type: e.type,\n        contractType: e.contractType,\n        sum: e.sum,\n        relatedTasks: e.relatedTasks\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 620,
        "wires": [
            [
                "c9549a83baf6194d"
            ]
        ]
    },
    {
        "id": "edae50cfc78c5f76",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 594",
        "func": "msg.payload = msg.payload.map(e => {\n    return {\n        label: e.name,\n        value: e._id,\n        status: e.status,\n        type: e.type,\n        contractType: e.contractType,\n        sum: e.sum,\n        relatedTasks: e.relatedTasks\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 560,
        "wires": [
            [
                "fa0e4b2bd431fac2"
            ]
        ]
    },
    {
        "id": "99dac3c9f0867017",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "debug 529",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 880,
        "y": 120,
        "wires": []
    },
    {
        "id": "290ed3ac63f878e4",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "update projectsTasks summary",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.query = {\n    \"_id\": objectid(msg.payload[0]._id),\n    deleted: false\n};\n\n// \"difference\":,\n// \"customer\": \n// \"client\": \n\n// 1 Відповідно від типу договора  розрахувати правильно маржу \n// 2 Оновити саме ті поля  (з підрядником або з замовником)\n// 3 Перевірити чи все працює з іншим функціоналом (типи даних повинні бути однакові)\nlet data = {}\nif(msg.contractType === \"Замовник\") {\n    // parseFloat(clientAmount.text.replace(/,/g, '')\n    // new Intl.NumberFormat('en-US').format()\n    const clientAmount = msg.payload[0].client ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) + (msg.taskSum)) : (msg.taskSum);\n    const newDifference = msg.payload[0].customer ? (clientAmount - parseFloat(msg.payload[0].customer.replace(/,/g, ''))) : (clientAmount - 0);\n\n    data = {\n        \"client\": new Intl.NumberFormat('en-US').format(clientAmount),\n        \"customer\": msg.payload[0].customer ? msg.payload[0].customer : '0',\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }   \n}\n\nif (msg.contractType === \"Підрядник\") {\n    const customerAmount = msg.payload[0].customer ? (parseFloat(msg.payload[0].customer.replace(/,/g, '')) + (msg.taskSum)) : (msg.taskSum); \n    const newDifference = msg.payload[0].client ? (parseFloat(msg.payload[0].client.replace(/,/g, '')) - customerAmount): (0 - customerAmount);\n    data = {\n        \"client\": msg.payload[0].client ? msg.payload[0].client : '0',\n        \"customer\": new Intl.NumberFormat('en-US').format(customerAmount),\n        \"difference\": new Intl.NumberFormat('en-US').format(newDifference)\n    }   \n}\n\n\n\nmsg.payload = {\n    $set: {\n        ...data,\n        updatedAt: global.get(\"convert_date\")\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1190,
        "y": 1180,
        "wires": [
            [
                "403ea0ffd1b0048f",
                "0e9b686fe28cda64"
            ]
        ]
    },
    {
        "id": "403ea0ffd1b0048f",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1440,
        "y": 1180,
        "wires": [
            [
                "9797931c6e2fc458"
            ]
        ]
    },
    {
        "id": "8e045652e842cb6e",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 659",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.payload = {\n    '_id': objectid(msg.taskId),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 810,
        "y": 1180,
        "wires": [
            [
                "928422543da3c165"
            ]
        ]
    },
    {
        "id": "928422543da3c165",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 970,
        "y": 1180,
        "wires": [
            [
                "290ed3ac63f878e4",
                "0e9b686fe28cda64"
            ]
        ]
    },
    {
        "id": "639218032cd060c6",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/addRelatedTasksMany",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 1100,
        "wires": [
            [
                "b19900c6f17740d9"
            ]
        ]
    },
    {
        "id": "a0eeda0d78a44bfd",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 642",
        "func": "msg.contractSum = msg.payload[0].sum\nmsg.contractType = msg.payload[0].type\nmsg.payload = {}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1100,
        "wires": [
            [
                "9797931c6e2fc458"
            ]
        ]
    },
    {
        "id": "c715b366f1828723",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1110,
        "y": 1100,
        "wires": []
    },
    {
        "id": "9797931c6e2fc458",
        "type": "array-loop",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "key": "count",
        "keyType": "msg",
        "reset": false,
        "resetValue": "value-null",
        "array": "array",
        "arrayType": "msg",
        "x": 900,
        "y": 1100,
        "wires": [
            [
                "c715b366f1828723"
            ],
            [
                "556530fbb67892a0"
            ]
        ]
    },
    {
        "id": "556530fbb67892a0",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 643",
        "func": "msg.collection = \"contracts\";\nmsg.taskSum =msg.payload?.taskSum\nmsg.taskId = msg.payload.taskId\nmsg.query = {\n    _id: objectid(msg.req.query.contractId),\n    projectId: objectid(msg.req.query._id),\n    \"relatedTasks.taskId\": { $ne: msg.payload.taskId }\n}\nmsg.payload = {\n    $addToSet: {\n        relatedTasks:msg.payload\n    }\n\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 450,
        "y": 1180,
        "wires": [
            [
                "6265d27831e2392c"
            ]
        ]
    },
    {
        "id": "6265d27831e2392c",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 640,
        "y": 1180,
        "wires": [
            [
                "8e045652e842cb6e"
            ]
        ]
    },
    {
        "id": "b19900c6f17740d9",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 658",
        "func": "msg.collection = \"contracts\";\nmsg.oldPayload = msg.payload;\nmsg.array = JSON.parse(msg.payload.tasksArr)\n\nmsg.payload = {\n    _id: objectid(msg.req.query.contractId),\n    projectId: objectid(msg.req.query._id),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 1100,
        "wires": [
            [
                "03256cfb4b3d8c5f"
            ]
        ]
    },
    {
        "id": "03256cfb4b3d8c5f",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 570,
        "y": 1100,
        "wires": [
            [
                "a0eeda0d78a44bfd"
            ]
        ]
    },
    {
        "id": "3cc8704d4aef9dca",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "url": "/addNewTask",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1420,
        "wires": [
            [
                "b1514f504b8eb737"
            ]
        ]
    },
    {
        "id": "c72f8ef34625fc8b",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "get all stages",
        "func": "msg.collection = \"stages\";\nmsg.payload = {\n\n}\nmsg.projection = {\n   _id: 1,\n   name:1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 1280,
        "wires": [
            [
                "ac704515ae83fc34"
            ]
        ]
    },
    {
        "id": "78fbfa77a8e6500d",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "url": "/getStages",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1280,
        "wires": [
            [
                "c72f8ef34625fc8b"
            ]
        ]
    },
    {
        "id": "ac704515ae83fc34",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 515,
        "y": 1280,
        "wires": [
            [
                "08bd8d66da225b16"
            ]
        ],
        "l": false
    },
    {
        "id": "ab9b9df3a575502f",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 770,
        "y": 1280,
        "wires": []
    },
    {
        "id": "1bc31a56e64cd895",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "get all groups",
        "func": "msg.collection = \"group\";\nif (msg.req.query.parentSectionId && msg.req.query.parentSectionId !== \"\"){\n    msg.payload = {\n    parentSectionId:objectid(msg.req.query.parentSectionId),\n    parentStageId: objectid(msg.req.query.parentStageId)\n};\n}else{\n    msg.payload = {\n        parentStageId: objectid(msg.req.query.parentStageId)\n    }; \n}\n\nmsg.projection = {\n    _id: 1,\n    name: 1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 380,
        "y": 1360,
        "wires": [
            [
                "f2018d7d93224eaf"
            ]
        ]
    },
    {
        "id": "86925d8fbfa1ba82",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "url": "/getGroup",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1360,
        "wires": [
            [
                "1bc31a56e64cd895"
            ]
        ]
    },
    {
        "id": "f2018d7d93224eaf",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 515,
        "y": 1360,
        "wires": [
            [
                "68beaffaf0139b21"
            ]
        ],
        "l": false
    },
    {
        "id": "952fc3d0a04c20db",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 850,
        "y": 1360,
        "wires": []
    },
    {
        "id": "8d9d2d2157272493",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "get all sections",
        "func": "msg.collection = \"section\";\nmsg.payload = {\n    parentStageId: objectid(msg.req.query.parentStageId),\n    projectIds: objectid(msg.req.query.projectIds)\n}\n\nmsg.projection = {\n    _id: 1,\n    name: 1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 400,
        "y": 1320,
        "wires": [
            [
                "adf77aa9e81ec34f"
            ]
        ]
    },
    {
        "id": "265d418790a27a93",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "url": "/getSections",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1320,
        "wires": [
            [
                "8d9d2d2157272493"
            ]
        ]
    },
    {
        "id": "adf77aa9e81ec34f",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 515,
        "y": 1320,
        "wires": [
            [
                "133f2e03a2fcbc9e"
            ]
        ],
        "l": false
    },
    {
        "id": "dbaf96a1e74e7d16",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 910,
        "y": 1320,
        "wires": []
    },
    {
        "id": "08bd8d66da225b16",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "convert data",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n        label:e.name,\n        value:e._id\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 1280,
        "wires": [
            [
                "ab9b9df3a575502f"
            ]
        ]
    },
    {
        "id": "133f2e03a2fcbc9e",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "convert data",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n        label:e.name,\n        value:e._id\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1320,
        "wires": [
            [
                "dbaf96a1e74e7d16"
            ]
        ]
    },
    {
        "id": "68beaffaf0139b21",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "convert data",
        "func": "msg.payload = msg.payload.map(e=>{\n    return {\n        label:e.name,\n        value:e._id\n    }\n})\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1360,
        "wires": [
            [
                "952fc3d0a04c20db"
            ]
        ]
    },
    {
        "id": "165239088e4f52f9",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "add to projectsTasks",
        "func": "msg.collection = 'projectsTasks';\nmsg.projectTemplateId = msg.payload[0].template\nmsg._idTask2 = objectid()\nmsg.payload =\n{\n     \"_id\": msg._idTask2,\n     \"type\": \"задача\",\n     name: msg.old.name,\n     status: msg.old.status,\n     startDate: msg.old.startDate,\n     deadline: msg.old.deadline,\n     \"customer\": \"\",\n     \"client\": \"\",\n     \"difference\": \"\",\n     \"performer\": \"\",\n     \"isAction\": true,\n     parentGroupId: msg.req.query.parentGroupId,\n     parentSectionId: msg.req.query.parentSectionId,\n     parentStageId: msg.req.query.parentStageId,\n     \"projectTemplateId\":objectid(msg.projectTemplateId),\n     \"position\":\"\",\n     \"key\": msg._idTask2,\n     \"deleted\": false,\n     \"createdAt\": global.get(\"convert_date\")\n}\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 840,
        "y": 1420,
        "wires": [
            [
                "4d5b8e4d4f21d01e"
            ]
        ]
    },
    {
        "id": "4d5b8e4d4f21d01e",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "links": [
            "1764f8568a80ddbd"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1050,
        "y": 1420,
        "wires": [
            [
                "7fb607085048eccd"
            ]
        ]
    },
    {
        "id": "7fb607085048eccd",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1210,
        "y": 1420,
        "wires": []
    },
    {
        "id": "b1514f504b8eb737",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "function 661",
        "func": "msg.collection = 'projects';\nmsg._idTask = objectid()\nmsg.old = msg.payload\n\nmsg.payload ={\n  _id: objectid(msg.req.query.projectId)\n}\n\nmsg.projection = {\n  template:1\n};\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 390,
        "y": 1420,
        "wires": [
            [
                "460ff8aec99f0138"
            ]
        ]
    },
    {
        "id": "460ff8aec99f0138",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "4b6589c667fa1af4",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 610,
        "y": 1420,
        "wires": [
            [
                "165239088e4f52f9"
            ]
        ]
    },
    {
        "id": "a011f5b38f17d868",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "url": "/getContractsCustomerContractor",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 210,
        "y": 520,
        "wires": [
            [
                "9c5001444520276d"
            ]
        ]
    },
    {
        "id": "9c5001444520276d",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 590",
        "func": "msg.collection = \"contracts\"\n\nmsg.payload = {\n    projectId: objectid(msg.req.query.progectId),\n    deleted:false\n}\n\nmsg.projection = {\n    \"_id\": 1,\n    \"name\": 1,\n    \"status\": 1,\n    \"type\": 1,\n    \"contractType\": 1,\n    \"sum\": 1,\n    \"relatedTasks\":1\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 470,
        "y": 520,
        "wires": [
            [
                "6a67558cfbe618ee",
                "89cfd7ec9eb38c97"
            ]
        ]
    },
    {
        "id": "6a67558cfbe618ee",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 650,
        "y": 520,
        "wires": [
            [
                "2614eb0b5065dbdc"
            ]
        ]
    },
    {
        "id": "9a4d0e3b374f7b6c",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 970,
        "y": 520,
        "wires": []
    },
    {
        "id": "2614eb0b5065dbdc",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "function 594",
        "func": "\nlet contractor = msg.payload.filter(c => c.type === \"Підрядник\").map(e => {\n    return {\n        label: e.name,\n        value: e._id,\n        status: e.status,\n        type: e.type,\n        contractType: e.contractType,\n        sum: e.sum,\n        relatedTasks: e.relatedTasks\n    }\n})\nlet customer = msg.payload.filter(c => c.type === \"Замовник\").map(e => {\n    return {\n        label: e.name,\n        value: e._id,\n        status: e.status,\n        type: e.type,\n        contractType: e.contractType,\n        sum: e.sum,\n        relatedTasks: e.relatedTasks\n    }\n})\nmsg.payload ={\n    contractor,\n    customer\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 520,
        "wires": [
            [
                "9a4d0e3b374f7b6c",
                "89cfd7ec9eb38c97"
            ]
        ]
    },
    {
        "id": "89cfd7ec9eb38c97",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "debug 533",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 520,
        "wires": []
    },
    {
        "id": "42cb9cb39169aade",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "debug 555",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 660,
        "wires": []
    },
    {
        "id": "c03ae43e9279e964",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "debug 556",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 740,
        "wires": []
    },
    {
        "id": "0e9b686fe28cda64",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "8674d609260a3fc0",
        "name": "debug 558",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1350,
        "y": 1100,
        "wires": []
    },
    {
        "id": "56614656293393f9",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "debug 568",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 400,
        "y": 420,
        "wires": []
    },
    {
        "id": "81ad1fc4f1dec749",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "url": "/stages",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1670,
        "y": 520,
        "wires": [
            [
                "d0d349fe530d32eb"
            ]
        ]
    },
    {
        "id": "348fb0e38f12a2a5",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "url": "/groups",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1670,
        "y": 580,
        "wires": [
            [
                "e80fb4e18d71a36f"
            ]
        ]
    },
    {
        "id": "0c1ab8a2f63c3aad",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "url": "/sections",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1670,
        "y": 680,
        "wires": [
            [
                "4d9853a9cf0e26fe"
            ]
        ]
    },
    {
        "id": "d0d349fe530d32eb",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "function 677",
        "func": "msg.collection = \"stages\";\nmsg.payload = {\n_id:objectid(msg.req.query._id)\n}\nmsg.projection = {\n    name: 1\n};\nreturn msg\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1795,
        "y": 520,
        "wires": [
            [
                "f75150102630f853"
            ]
        ],
        "l": false
    },
    {
        "id": "f75150102630f853",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1930,
        "y": 520,
        "wires": [
            [
                "641c27051a22e993"
            ]
        ]
    },
    {
        "id": "641c27051a22e993",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2090,
        "y": 520,
        "wires": []
    },
    {
        "id": "e80fb4e18d71a36f",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "function 678",
        "func": "msg.collection = \"group\";\nmsg.payload = {\n_id:objectid(msg.req.query._id)\n}\nmsg.projection = {\n    name: 1\n};\nreturn msg\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1795,
        "y": 580,
        "wires": [
            [
                "b299b28befa18854"
            ]
        ],
        "l": false
    },
    {
        "id": "b299b28befa18854",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 1930,
        "y": 580,
        "wires": [
            [
                "9b143a89257e169d"
            ]
        ]
    },
    {
        "id": "9b143a89257e169d",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2090,
        "y": 580,
        "wires": []
    },
    {
        "id": "e380f07992b64d42",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "function 679",
        "func": "msg.collection = \"section\";\nmsg.payload = {\n_id:objectid(msg.req.query._id)\n}\nmsg.projection = {\n    name: 1\n};\nreturn msg\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1895,
        "y": 660,
        "wires": [
            [
                "3b78f7ccf254397b"
            ]
        ],
        "l": false
    },
    {
        "id": "3b78f7ccf254397b",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2010,
        "y": 660,
        "wires": [
            [
                "763ef4debcb59b7d"
            ]
        ]
    },
    {
        "id": "763ef4debcb59b7d",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2150,
        "y": 660,
        "wires": []
    },
    {
        "id": "4d9853a9cf0e26fe",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": ">",
        "func": "if (msg.req.query._id!== \"\"){\n    return [msg,null]\n}else{\n    msg.payload =[{\n        _id:\"\",\n        name:\"секція відсутня\"\n    }]\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1810,
        "y": 680,
        "wires": [
            [
                "e380f07992b64d42"
            ],
            [
                "6b8182973c07a7e5"
            ]
        ]
    },
    {
        "id": "6b8182973c07a7e5",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1930,
        "y": 700,
        "wires": []
    },
    {
        "id": "6354983948bb2271",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "url": "/getTasksForAddRelated",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1720,
        "y": 760,
        "wires": [
            [
                "b9d63c345b7f48fb"
            ]
        ]
    },
    {
        "id": "b9d63c345b7f48fb",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "function 680",
        "func": "msg.collection = 'projectsTasks';\nmsg.payload = {\n    parentGroupId:objectid(msg.req.query._id),\n    projectTemplateId: objectid(msg.req.query.projectTemplateId)\n}\nmsg.projection = {\n    _id:1,\n    name: 1,\n    status:1\n};\nreturn msg\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1915,
        "y": 760,
        "wires": [
            [
                "8e526c34e8b90458"
            ]
        ],
        "l": false
    },
    {
        "id": "8e526c34e8b90458",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2050,
        "y": 760,
        "wires": [
            [
                "07cc1b528d90ed18"
            ]
        ]
    },
    {
        "id": "915f13a2e2e26286",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2810,
        "y": 760,
        "wires": []
    },
    {
        "id": "8a34ce1a4615020c",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "g": "b63354a505b04f2a",
        "name": "debug 569",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 390,
        "y": 180,
        "wires": []
    },
    {
        "id": "ef16c47740cf4678",
        "type": "inject",
        "z": "acc787df1bb9a04e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1740,
        "wires": [
            [
                "54a34e63891b21d2"
            ]
        ]
    },
    {
        "id": "54a34e63891b21d2",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 682",
        "func": "msg.collection = \"contracts\";\nmsg.payload={\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 1740,
        "wires": [
            [
                "188a1ef0e85be770"
            ]
        ]
    },
    {
        "id": "188a1ef0e85be770",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 470,
        "y": 1740,
        "wires": [
            [
                "b9196c64a4f8a322"
            ]
        ]
    },
    {
        "id": "b9196c64a4f8a322",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 570",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 1760,
        "wires": []
    },
    {
        "id": "c2d793cbc498af80",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 685",
        "func": "msg.collection = 'tasks';\nmsg.payload = {\n   \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 330,
        "y": 1820,
        "wires": [
            [
                "acd17a105dc5322a"
            ]
        ]
    },
    {
        "id": "acd17a105dc5322a",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 1820,
        "wires": [
            [
                "21df9d3537044bbc"
            ]
        ]
    },
    {
        "id": "93f703ffb9be442d",
        "type": "inject",
        "z": "acc787df1bb9a04e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1820,
        "wires": [
            [
                "c2d793cbc498af80"
            ]
        ]
    },
    {
        "id": "21df9d3537044bbc",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 572",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 430,
        "y": 1780,
        "wires": []
    },
    {
        "id": "864809361c6cc93c",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 687",
        "func": "msg.collection = 'projectsTasks';\nmsg.payload = {\n    projectTemplateId: objectid(msg.payload[0].template),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 710,
        "y": 1980,
        "wires": [
            [
                "56a1d375a5faa340",
                "84ea87dbb875e75b"
            ]
        ]
    },
    {
        "id": "56a1d375a5faa340",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 920,
        "y": 1980,
        "wires": [
            [
                "84ea87dbb875e75b",
                "cfaf331a7f8dc6fd"
            ]
        ]
    },
    {
        "id": "84ea87dbb875e75b",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 574",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 1920,
        "wires": []
    },
    {
        "id": "d6df6949165aafa2",
        "type": "inject",
        "z": "acc787df1bb9a04e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1900,
        "wires": [
            [
                "65d7b67908f9c8ea"
            ]
        ]
    },
    {
        "id": "65d7b67908f9c8ea",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 688",
        "func": "msg.collection = 'projects';\n\n\nmsg.payload = {\n    _id: objectid(msg.req.query._id)\n    // _id: objectid(\"65aa7a60805aa511000008d4\")\n}\n\nmsg.projection = {\n    template: 1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 1980,
        "wires": [
            [
                "7b730e3f37667058"
            ]
        ]
    },
    {
        "id": "7b730e3f37667058",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 520,
        "y": 1980,
        "wires": [
            [
                "864809361c6cc93c",
                "84ea87dbb875e75b"
            ]
        ]
    },
    {
        "id": "cfaf331a7f8dc6fd",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 689",
        "func": "// {\n// \"start\": \"2023-08-05T00:00:00.000Z\",\n// \"end\": \"2023-08-06T00:00:00.000Z\",\n// \"name\": \"Discussion with team\",\n// \"id\": \"Task 2\",\n// \"dependencies\": [\n\n// ],\n// \"type\": \"task\",\n// \"displayOrder\": 4\n// }\nfunction convertDateForGant(time) {\n    // Вхідна рядок з датою та часом\n    const inputDateString = time;\n\n    // Розділити рядок на частини\n    const parts = inputDateString.split(/[\\s,]+/);\n\n    // Розбити частини дати та часу\n    const dateParts = parts[0].split('.');\n    const timeParts = parts[1].split(':');\n\n    // Створити новий об'єкт Date\n    const formattedDate = new Date(Date.UTC(dateParts[2], dateParts[1] - 1, dateParts[0], timeParts[0], timeParts[1], timeParts[2]));\n\n    // Форматувати дату\n    const outputDateString = formattedDate.toISOString();\n    return outputDateString\n}\n\nlet tasks = msg.payload\nconst newTasks = []\ntasks.map((e, index) => {   \n    const newTask = {\n        \"start\": convertDateForGant(e.startDate),\n        \"end\": convertDateForGant(e.deadline),\n        \"name\": e.name,\n        \"id\": e._id,\n        \"dependencies\": [],\n        \"type\": \"task\",\n        \"displayOrder\": index + 1   \n    }   \n    newTasks.push(newTask)\n})\nnode.warn(tasks);\n\nmsg.payload = {\n    newTasks\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1980,
        "wires": [
            [
                "a8942be2de9d78e1",
                "bd7542dccced6a2d"
            ]
        ]
    },
    {
        "id": "a8942be2de9d78e1",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 575",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 1920,
        "wires": []
    },
    {
        "id": "0e1cdfbd02be60cb",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "name": "",
        "url": "/getTasksForGantPrevV",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1980,
        "wires": [
            [
                "65d7b67908f9c8ea"
            ]
        ]
    },
    {
        "id": "bd7542dccced6a2d",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1290,
        "y": 1980,
        "wires": []
    },
    {
        "id": "3790c66d233578c2",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 683",
        "func": "msg.collection = 'projectsTasks';\nmsg.payload = {\n    projectTemplateId: objectid(msg.payload[0].template),\n    deleted: false\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 710,
        "y": 1580,
        "wires": [
            [
                "0385bd1af3335710",
                "1552f3d433c9da24"
            ]
        ]
    },
    {
        "id": "0385bd1af3335710",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 890,
        "y": 1580,
        "wires": [
            [
                "1552f3d433c9da24",
                "8514f0cbfadd72d9"
            ]
        ]
    },
    {
        "id": "1552f3d433c9da24",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 571",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 1500,
        "wires": []
    },
    {
        "id": "078901356bf92c60",
        "type": "inject",
        "z": "acc787df1bb9a04e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 1500,
        "wires": [
            [
                "c092a9a48edce054"
            ]
        ]
    },
    {
        "id": "c092a9a48edce054",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 684",
        "func": "msg.collection = 'projects';\nmsg.options = []\n// Задана дата\nfunction convertDateForGant(data) {\n    const originalDate = new Date(data);\n\n    // Функція для додавання ведучого нуля до числа, якщо воно менше 10\n    function addLeadingZero(num) {\n        return num < 10 ? \"0\" + num : num;\n    }\n\n    // Отримання компонентів дати та часу\n    const day = addLeadingZero(originalDate.getUTCDate());\n    const month = addLeadingZero(originalDate.getUTCMonth() + 1);\n    const year = originalDate.getUTCFullYear();\n\n    // Форматування результату\n    const formattedDate = day + \".\" + month + \".\" + year;\n    return formattedDate\n}\n\n\nif (JSON.parse(msg.payload.status)) msg.options.push({ \"status\": JSON.parse(msg.payload.status) }) \nif (JSON.parse(msg.payload.isOncriticalPath)) msg.options.push({ \"isOncriticalPath\": JSON.parse(msg.payload.isOncriticalPath)}) \nif (JSON.parse(msg.payload.performer)) msg.options.push({ \"performer\": JSON.parse(msg.payload.performer)}) \nif (JSON.parse(msg.payload.startDate)) msg.options.push({ \"startDate\": convertDateForGant(JSON.parse(msg.payload.startDate))}) \nif (JSON.parse(msg.payload.deadline)) msg.options.push({ \"deadline\": convertDateForGant(JSON.parse(msg.payload.deadline))}) \n\nmsg.payload = {\n    _id: objectid(msg.req.query._id)\n    // _id: objectid(\"65aa7a60805aa511000008d4\")\n}\n\nmsg.projection = {\n    template: 1\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 350,
        "y": 1580,
        "wires": [
            [
                "6b58b81aa330572d"
            ]
        ]
    },
    {
        "id": "6b58b81aa330572d",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 540,
        "y": 1580,
        "wires": [
            [
                "3790c66d233578c2",
                "1552f3d433c9da24"
            ]
        ]
    },
    {
        "id": "8514f0cbfadd72d9",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 686",
        "func": "function convertDateForCompare(data) {\n    const dateString = data;\n    const dateMatch = dateString.match(/(\\d{2})\\.(\\d{2})\\.(\\d{4})/);\n\n    if (dateMatch) {\n        // Форматування дати: \"DD.MM.YYYY\"\n        const formattedDate = `${dateMatch[3]}-${dateMatch[2]}-${dateMatch[1]}`;\n        return new Date(formattedDate);\n    }\n\n    // Якщо формат дати не вдалося розпізнати\n    return null;\n}\n\n\nfunction filterArr(arr, options) {\n    return arr.filter(task => {\n        return options.every(option => {\n            const optionKey = Object.keys(option)[0];\n            const optionValue = option[optionKey];            \n            \n            if (optionKey === \"performer\" && task.performer) {\n                return task.performer == optionValue;\n            }    \n            if (optionKey === \"startDate\" && task.startDate) {\n                const taskStartDate = convertDateForCompare(task.startDate);\n                const optionDate = convertDateForCompare(optionValue);\n\n                // Порівняння дат, не враховуючи час\n                return taskStartDate && optionDate && taskStartDate.toISOString().split('T')[0] >= optionDate.toISOString().split('T')[0];\n            }\n            if (optionKey === \"deadline\" && task.deadline) {\n                const taskEndDate = convertDateForCompare(task.deadline);\n                const optionDate = convertDateForCompare(optionValue);\n                \n                // Порівняння дат, не враховуючи час\n                return taskEndDate && optionDate && taskEndDate.toISOString().split('T')[0] <= optionDate.toISOString().split('T')[0];\n            }\n         \n            return task[optionKey] === optionValue;\n        });\n    });\n}\n\n\nfunction convertDateForGant(time) {\n    // Вхідна рядок з датою та часом\n    const inputDateString = time;\n\n    // Розділити рядок на частини\n    const parts = inputDateString.split(/[\\s,]+/);\n\n    // Розбити частини дати та часу\n    const dateParts = parts[0].split('.');\n    const timeParts = parts[1].split(':');\n\n    // Створити новий об'єкт Date\n    const formattedDate = new Date(Date.UTC(dateParts[2], dateParts[1] - 1, dateParts[0], timeParts[0], timeParts[1], timeParts[2]));\n\n    // Форматувати дату\n    const outputDateString = formattedDate.toISOString();\n    return outputDateString\n}\n\nlet tasks = msg.options.length === 0 ? msg.payload : filterArr(msg.payload, msg.options)\nconst newTasks = []\n\ntasks.map((e, index) => { \nconst dependencies = []\n\n    if (e.dependencies && e.dependencies.length !==0) {\n        e.dependencies.map(dependencie => {\n        dependencies.push(dependencie._id)\n    })}\n    const newTask = {\n        \"start\": convertDateForGant(e.startDate),\n        \"end\": convertDateForGant(e.deadline),\n        \"name\": e.name,\n        \"id\": e._id,\n        \"dependencies\": dependencies,\n        \"type\": \"task\",\n        \"displayOrder\": index + 1   \n    }   \n    newTasks.push(newTask)\n})\n\nmsg.payload = {\n    newTasks\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1070,
        "y": 1580,
        "wires": [
            [
                "6d5e4b38aaf27158",
                "e67acb3cbb0bfcd4"
            ]
        ]
    },
    {
        "id": "6d5e4b38aaf27158",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 573",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 1520,
        "wires": []
    },
    {
        "id": "abed74f1a31adad1",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "name": "",
        "url": "/getTasksForGant",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1580,
        "wires": [
            [
                "c092a9a48edce054",
                "1552f3d433c9da24"
            ]
        ]
    },
    {
        "id": "e67acb3cbb0bfcd4",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1250,
        "y": 1580,
        "wires": []
    },
    {
        "id": "7468ae454049c7be",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 576",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2790,
        "y": 840,
        "wires": []
    },
    {
        "id": "07cc1b528d90ed18",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "function 690",
        "func": "msg.old = msg.payload;\nmsg.collection = 'projectsTasks';\nmsg.payload = {\n    _id: objectid(msg.req.query.taskId),\n\n}\nmsg.projection = {\n    dependencies:1\n};\nreturn msg\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 2230,
        "y": 760,
        "wires": [
            [
                "909eb1ad0e131b80"
            ]
        ]
    },
    {
        "id": "909eb1ad0e131b80",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "",
        "links": [
            "346e518816416d1d"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2410,
        "y": 760,
        "wires": [
            [
                "09bc51a558ca4e8f",
                "7468ae454049c7be"
            ]
        ]
    },
    {
        "id": "09bc51a558ca4e8f",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "g": "89c8ac8cfeb7384d",
        "name": "function 691",
        "func": "function filterData(mainArray, excludeArray) {\n    let arr = [];\n\n    mainArray.forEach(function (element) {\n        if (!excludeArray.some(el => element._id == el._id)) {\n            arr.push(element);\n        } return\n    });\n\n\n    return arr;\n}\n\n\nconst mainData = msg.old;\n\nconst excludeData = msg.payload[0].dependencies;\n\n\nconst filteredData =\n    msg.payload[0].dependencies && msg.payload[0].dependencies.length > 0 ? filterData(mainData, excludeData) : msg.old;\n\nmsg.payload = filteredData;\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2610,
        "y": 760,
        "wires": [
            [
                "915f13a2e2e26286",
                "7468ae454049c7be"
            ]
        ]
    },
    {
        "id": "97b02f9a510d2b41",
        "type": "http in",
        "z": "acc787df1bb9a04e",
        "name": "",
        "url": "/delTaksDev",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1700,
        "y": 860,
        "wires": [
            [
                "ad01fe7daad39a8d",
                "cceb5da47478c227"
            ]
        ]
    },
    {
        "id": "cceb5da47478c227",
        "type": "debug",
        "z": "acc787df1bb9a04e",
        "name": "debug 577",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2190,
        "y": 940,
        "wires": []
    },
    {
        "id": "ad01fe7daad39a8d",
        "type": "function",
        "z": "acc787df1bb9a04e",
        "name": "function 692",
        "func": "msg.collection = 'projectsTasks';\n\nmsg.query = {\n    '_id': objectid(msg.req.query.taskId),\n    'dependencies._id': msg.req.query.depTaskId\n};\n\nmsg.payload = {\n    $pull: {\n        \"dependencies\": {\n            \"_id\": msg.req.query.depTaskId\n        }\n    }\n};\n\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "objectid",
                "module": "objectid"
            }
        ],
        "x": 1950,
        "y": 860,
        "wires": [
            [
                "3deb0b849b2d7b82",
                "cceb5da47478c227"
            ]
        ]
    },
    {
        "id": "3deb0b849b2d7b82",
        "type": "link call",
        "z": "acc787df1bb9a04e",
        "name": "",
        "links": [
            "286431cd31c9fc7a"
        ],
        "linkType": "static",
        "timeout": "30",
        "x": 2140,
        "y": 860,
        "wires": [
            [
                "a63ee1eb49e753e4",
                "cceb5da47478c227"
            ]
        ]
    },
    {
        "id": "a63ee1eb49e753e4",
        "type": "http response",
        "z": "acc787df1bb9a04e",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2350,
        "y": 860,
        "wires": []
    }
]